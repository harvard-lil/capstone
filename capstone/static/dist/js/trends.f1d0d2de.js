(function(t){function e(e){for(var n,o,s=e[0],l=e[1],u=e[2],h=0,p=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,s=1;s<i.length;s++){var l=i[s];0!==r[l]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},r={trends:0},a=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/static/dist/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var c=l;a.push([5,"chunk-common"]),i()})({"1a7f":function(t,e,i){"use strict";(function(t){var n=i("6094"),r=function(){if(!(this instanceof r))throw new Error("constructor needs to be called with the 'new' keyword")};
/**
 *  Tone.js
 *  @author Yotam Mann
 *  @license http://opensource.org/licenses/MIT MIT License
 *  @copyright 2014-2019 Yotam Mann
 */r.prototype.toString=function(){for(var t in r){var e=t[0].match(/^[A-Z]$/),i=r[t]===this.constructor;if(r.isFunction(r[t])&&e&&i)return t}return"Tone"},r.prototype.dispose=function(){return this},r.prototype.set=function(t,e){if(r.isString(t)){var i={};i[t]=e,t=i}t:for(var n in t){e=t[n];var a=this;if(-1!==n.indexOf(".")){for(var o=n.split("."),s=0;s<o.length-1;s++)if(a=a[o[s]],a instanceof r){o.splice(0,s+1);var l=o.join(".");a.set(l,e);continue t}n=o[o.length-1]}var u=a[n];r.isUndef(u)||(r.Signal&&u instanceof r.Signal||r.Param&&u instanceof r.Param||u instanceof AudioParam?u.value!==e&&(u.value=e):r.TimeBase&&u instanceof r.TimeBase?a[n]=e:u instanceof r?u.set(e):u!==e&&(a[n]=e))}return this},r.prototype.get=function(t){r.isUndef(t)?t=this._collectDefaults(this.constructor):r.isString(t)&&(t=[t]);for(var e={},i=0;i<t.length;i++){var n=t[i],a=this,o=e;if(-1!==n.indexOf(".")){for(var s=n.split("."),l=0;l<s.length-1;l++){var u=s[l];o[u]=o[u]||{},o=o[u],a=a[u]}n=s[s.length-1]}var c=a[n];r.isObject(t[n])?o[n]=c.get():r.Signal&&c instanceof r.Signal||r.Param&&c instanceof r.Param||c instanceof AudioParam?o[n]=c.value:c instanceof r?o[n]=c.get():!r.isFunction(c)&&r.isDefined(c)&&(o[n]=c)}return e},r.prototype._collectDefaults=function(t){var e=[];if(r.isDefined(t.defaults)&&(e=Object.keys(t.defaults)),r.isDefined(t._super))for(var i=this._collectDefaults(t._super),n=0;n<i.length;n++)-1===e.indexOf(i[n])&&e.push(i[n]);return e},r.defaults=function(t,e,i){var n={};if(1===t.length&&r.isObject(t[0]))n=t[0];else for(var a=0;a<e.length;a++)n[e[a]]=t[a];return r.isDefined(i.defaults)?r.defaultArg(n,i.defaults):r.isObject(i)?r.defaultArg(n,i):n},r.defaultArg=function(t,e){if(r.isObject(t)&&r.isObject(e)){var i={};for(var n in t)i[n]=r.defaultArg(e[n],t[n]);for(var a in e)i[a]=r.defaultArg(t[a],e[a]);return i}return r.isUndef(t)?e:t},r.prototype.log=function(){if(this.debug||this.toString()===r.global.TONE_DEBUG_CLASS){var t=Array.from(arguments);t.unshift(this.toString()+":"),console.log.apply(void 0,t)}},r.prototype.assert=function(t,e){if(!t)throw new Error(e)},r.connectSeries=function(){for(var t=arguments[0],e=1;e<arguments.length;e++){var i=arguments[e];r.connect(t,i),t=i}return r},r.connect=function(t,e,i,n){while(r.isDefined(e.input))r.isArray(e.input)?(n=r.defaultArg(n,0),e=e.input[n],n=0):e.input&&(e=e.input);return e instanceof AudioParam?t.connect(e,i):e instanceof AudioNode&&t.connect(e,i,n),r},r.disconnect=function(t,e,i,n){if(e){var a=!1;while(!a)r.isArray(e.input)?(r.isDefined(n)?r.disconnect(t,e.input[n],i):e.input.forEach((function(e){try{r.disconnect(t,e,i)}catch(n){}})),a=!0):e.input?e=e.input:a=!0;e instanceof AudioParam?t.disconnect(e,i):e instanceof AudioNode&&t.disconnect(e,i,n)}else t.disconnect();return r},r.isUndef=function(t){return"undefined"===typeof t},r.isDefined=function(t){return!r.isUndef(t)},r.isFunction=function(t){return"function"===typeof t},r.isNumber=function(t){return"number"===typeof t},r.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},r.isBoolean=function(t){return"boolean"===typeof t},r.isArray=function(t){return Array.isArray(t)},r.isString=function(t){return"string"===typeof t},r.isNote=function(t){return r.isString(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)},r.noOp=function(){},r.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},r.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},r.State={Started:"started",Stopped:"stopped",Paused:"paused"},r.global=r.isUndef(t)?window:t,r.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},r.dbToGain=function(t){return Math.pow(10,t/20)},r.gainToDb=function(t){return Math.log(t)/Math.LN10*20},r.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},r.prototype.now=function(){return r.context.now()},r.now=function(){return r.context.now()},r.prototype.immediate=function(){return r.context.currentTime},r.immediate=function(){return r.context.currentTime},r.extend=function(t,e){function i(){}r.isUndef(e)&&(e=r),i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t._super=e},r._audioContext=null,r.start=function(){return r.context.resume()},Object.defineProperty(r,"context",{get:function(){return r._audioContext},set:function(t){t.isContext?r._audioContext=t:r._audioContext=new r.Context(t),r.Context.emit("init",r._audioContext)}}),Object.defineProperty(r.prototype,"context",{get:function(){return r.context}}),r.setContext=function(t){r.context=t},Object.defineProperty(r.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(r.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(r,"supported",{get:function(){var t=r.global.hasOwnProperty("AudioContext")||r.global.hasOwnProperty("webkitAudioContext"),e=r.global.hasOwnProperty("Promise");return t&&e}}),Object.defineProperty(r,"initialized",{get:function(){return Boolean(r.context)}}),r.getContext=function(t){if(r.initialized)t(r.context);else{var e=function(){t(r.context),r.Context.off("init",e)};r.Context.on("init",e)}return r},r.version=n["a"],e["a"]=r}).call(this,i("a42b"))},"27d7":function(t,e,i){(function(e,n){t.exports=n(i("a4b5"))})("undefined"!==typeof self&&self,(function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({"091b":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".vue-slider-dot{position:absolute;-webkit-transition:all 0s;transition:all 0s;z-index:5}.vue-slider-dot:focus{outline:none}.vue-slider-dot-tooltip{position:absolute;visibility:hidden}.vue-slider-dot-hover:hover .vue-slider-dot-tooltip,.vue-slider-dot-tooltip-show{visibility:visible}.vue-slider-dot-tooltip-top{top:-10px;left:50%;-webkit-transform:translate(-50%,-100%);transform:translate(-50%,-100%)}.vue-slider-dot-tooltip-bottom{bottom:-10px;left:50%;-webkit-transform:translate(-50%,100%);transform:translate(-50%,100%)}.vue-slider-dot-tooltip-left{left:-10px;top:50%;-webkit-transform:translate(-100%,-50%);transform:translate(-100%,-50%)}.vue-slider-dot-tooltip-right{right:-10px;top:50%;-webkit-transform:translate(100%,-50%);transform:translate(100%,-50%)}",""]),t.exports=e},"24fb":function(t,e,i){"use strict";function n(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"===typeof btoa){var a=r(n),o=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[i].concat(o).concat([a]).join("\n")}return[i].join("\n")}function r(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e);return"/*# ".concat(i," */")}t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=n(e,t);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,n){"string"===typeof t&&(t=[[null,t,""]]);var r={};if(n)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(r[o]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);n&&r[l[0]]||(i&&(l[2]?l[2]="".concat(i," and ").concat(l[2]):l[2]=i),e.push(l))}},e}},2638:function(t,e,i){"use strict";function n(){return n=Object.assign||function(t){for(var e,i=1;i<arguments.length;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n.apply(this,arguments)}var r=["attrs","props","domProps"],a=["class","style","directives"],o=["on","nativeOn"],s=function(t){return t.reduce((function(t,e){for(var i in e)if(t[i])if(-1!==r.indexOf(i))t[i]=n({},t[i],e[i]);else if(-1!==a.indexOf(i)){var s=t[i]instanceof Array?t[i]:[t[i]],u=e[i]instanceof Array?e[i]:[e[i]];t[i]=s.concat(u)}else if(-1!==o.indexOf(i))for(var c in e[i])if(t[i][c]){var h=t[i][c]instanceof Array?t[i][c]:[t[i][c]],p=e[i][c]instanceof Array?e[i][c]:[e[i][c]];t[i][c]=h.concat(p)}else t[i][c]=e[i][c];else if("hook"==i)for(var d in e[i])t[i][d]=t[i][d]?l(t[i][d],e[i][d]):e[i][d];else t[i]=e[i];else t[i]=e[i];return t}),{})},l=function(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}};t.exports=s},"499e":function(t,e,i){"use strict";function n(t,e){for(var i=[],n={},r=0;r<e.length;r++){var a=e[r],o=a[0],s=a[1],l=a[2],u=a[3],c={id:t+":"+r,css:s,media:l,sourceMap:u};n[o]?n[o].parts.push(c):i.push(n[o]={id:o,parts:[c]})}return i}i.r(e),i.d(e,"default",(function(){return f}));var r="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},o=r&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,u=!1,c=function(){},h=null,p="data-vue-ssr-id",d="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t,e,i,r){u=i,h=r||{};var o=n(t,e);return m(o),function(e){for(var i=[],r=0;r<o.length;r++){var s=o[r],l=a[s.id];l.refs--,i.push(l)}for(e?(o=n(t,e),m(o)):o=[],r=0;r<i.length;r++)if(l=i[r],0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete a[l.id]}}}function m(t){for(var e=0;e<t.length;e++){var i=t[e],n=a[i.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](i.parts[r]);for(;r<i.parts.length;r++)n.parts.push(v(i.parts[r]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var o=[];for(r=0;r<i.parts.length;r++)o.push(v(i.parts[r]));a[i.id]={id:i.id,refs:1,parts:o}}}}function y(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function v(t){var e,i,n=document.querySelector("style["+p+'~="'+t.id+'"]');if(n){if(u)return c;n.parentNode.removeChild(n)}if(d){var r=l++;n=s||(s=y()),e=_.bind(null,n,r,!1),i=_.bind(null,n,r,!0)}else n=y(),e=b.bind(null,n),i=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else i()}}var g=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}();function _(t,e,i,n){var r=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=g(e,r);else{var a=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function b(t,e){var i=e.css,n=e.media,r=e.sourceMap;if(n&&t.setAttribute("media",n),h.ssrId&&t.setAttribute(p,e.id),r&&(i+="\n/*# sourceURL="+r.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=i;else{while(t.firstChild)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}},"4abb":function(t,e,i){var n=i("7a57");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=i("499e").default;r("b2af7572",n,!0,{sourceMap:!1,shadowMode:!1})},"4ed8":function(t,e,i){var n=i("091b");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=i("499e").default;r("2f6bee1a",n,!0,{sourceMap:!1,shadowMode:!1})},"556c":function(t,e,i){var n=i("eef2");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=i("499e").default;r("1209fd47",n,!0,{sourceMap:!1,shadowMode:!1})},"65d9":function(t,e,i){"use strict";
/**
  * vue-class-component v7.0.1
  * (c) 2015-present Evan You
  * @license MIT
  */function n(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i("8bbf")),a="undefined"!==typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys;function o(t,e){s(t,e),Object.getOwnPropertyNames(e.prototype).forEach((function(i){s(t.prototype,e.prototype,i)})),Object.getOwnPropertyNames(e).forEach((function(i){s(t,e,i)}))}function s(t,e,i){var n=i?Reflect.getOwnMetadataKeys(e,i):Reflect.getOwnMetadataKeys(e);n.forEach((function(n){var r=i?Reflect.getOwnMetadata(n,e,i):Reflect.getOwnMetadata(n,e);i?Reflect.defineMetadata(n,r,t,i):Reflect.defineMetadata(n,r,t)}))}var l={__proto__:[]},u=l instanceof Array;function c(t){return function(e,i,n){var r="function"===typeof e?e:e.constructor;r.__decorators__||(r.__decorators__=[]),"number"!==typeof n&&(n=void 0),r.__decorators__.push((function(e){return t(e,i,n)}))}}function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.extend({mixins:t})}function p(t){var e=typeof t;return null==t||"object"!==e&&"function"!==e}function d(t,e){var i=e.prototype._init;e.prototype._init=function(){var e=this,i=Object.getOwnPropertyNames(t);if(t.$options.props)for(var n in t.$options.props)t.hasOwnProperty(n)||i.push(n);i.forEach((function(i){"_"!==i.charAt(0)&&Object.defineProperty(e,i,{get:function(){return t[i]},set:function(e){t[i]=e},configurable:!0})}))};var n=new e;e.prototype._init=i;var r={};return Object.keys(n).forEach((function(t){void 0!==n[t]&&(r[t]=n[t])})),r}var f=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function m(t,e){void 0===e&&(e={}),e.name=e.name||t._componentTag||t.name;var i=t.prototype;Object.getOwnPropertyNames(i).forEach((function(t){if("constructor"!==t)if(f.indexOf(t)>-1)e[t]=i[t];else{var n=Object.getOwnPropertyDescriptor(i,t);void 0!==n.value?"function"===typeof n.value?(e.methods||(e.methods={}))[t]=n.value:(e.mixins||(e.mixins=[])).push({data:function(){var e;return e={},e[t]=n.value,e}}):(n.get||n.set)&&((e.computed||(e.computed={}))[t]={get:n.get,set:n.set})}})),(e.mixins||(e.mixins=[])).push({data:function(){return d(this,t)}});var n=t.__decorators__;n&&(n.forEach((function(t){return t(e)})),delete t.__decorators__);var s=Object.getPrototypeOf(t.prototype),l=s instanceof r?s.constructor:r,u=l.extend(e);return y(u,t,l),a&&o(u,t),u}function y(t,e,i){Object.getOwnPropertyNames(e).forEach((function(n){if("prototype"!==n){var r=Object.getOwnPropertyDescriptor(t,n);if(!r||r.configurable){var a=Object.getOwnPropertyDescriptor(e,n);if(!u){if("cid"===n)return;var o=Object.getOwnPropertyDescriptor(i,n);if(!p(a.value)&&o&&o.value===a.value)return}Object.defineProperty(t,n,a)}}}))}function v(t){return"function"===typeof t?m(t):function(e){return m(e,t)}}v.registerHooks=function(t){f.push.apply(f,t)},e.default=v,e.createDecorator=c,e.mixins=h},"7a57":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".vue-slider{position:relative;-webkit-box-sizing:content-box;box-sizing:content-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.vue-slider-rail{position:relative;width:100%;height:100%;-webkit-transition-property:width,height,left,right,top,bottom;transition-property:width,height,left,right,top,bottom}.vue-slider-process{position:absolute;z-index:1}",""]),t.exports=e},8875:function(t,e,i){var n,r,a;(function(i,o){r=[],n=o,a="function"===typeof n?n.apply(e,r):n,void 0===a||(t.exports=a)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(d){var i,n,r,a=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,o=/@([^@]*):(\d+):(\d+)\s*$/gi,s=a.exec(d.stack)||o.exec(d.stack),l=s&&s[1]||!1,u=s&&s[2]||!1,c=document.location.href.replace(document.location.hash,""),h=document.getElementsByTagName("script");l===c&&(i=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(u-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),r=i.replace(n,"$1").trim());for(var p=0;p<h.length;p++){if("interactive"===h[p].readyState)return h[p];if(h[p].src===l)return h[p];if(l===c&&h[p].innerHTML&&h[p].innerHTML.trim()===r)return h[p]}return null}}return t}))},"8bbf":function(e,i){e.exports=t},eef2:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".vue-slider-marks{position:relative;width:100%;height:100%}.vue-slider-mark{position:absolute;z-index:1}.vue-slider-ltr .vue-slider-mark,.vue-slider-rtl .vue-slider-mark{width:0;height:100%;top:50%}.vue-slider-ltr .vue-slider-mark-step,.vue-slider-rtl .vue-slider-mark-step{top:0}.vue-slider-ltr .vue-slider-mark-label,.vue-slider-rtl .vue-slider-mark-label{top:100%;margin-top:10px}.vue-slider-ltr .vue-slider-mark{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-slider-ltr .vue-slider-mark-step{left:0}.vue-slider-ltr .vue-slider-mark-label{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.vue-slider-rtl .vue-slider-mark{-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%)}.vue-slider-rtl .vue-slider-mark-step{right:0}.vue-slider-rtl .vue-slider-mark-label{right:50%;-webkit-transform:translateX(50%);transform:translateX(50%)}.vue-slider-btt .vue-slider-mark,.vue-slider-ttb .vue-slider-mark{width:100%;height:0;left:50%}.vue-slider-btt .vue-slider-mark-step,.vue-slider-ttb .vue-slider-mark-step{left:0}.vue-slider-btt .vue-slider-mark-label,.vue-slider-ttb .vue-slider-mark-label{left:100%;margin-left:10px}.vue-slider-btt .vue-slider-mark{-webkit-transform:translate(-50%,50%);transform:translate(-50%,50%)}.vue-slider-btt .vue-slider-mark-step{top:0}.vue-slider-btt .vue-slider-mark-label{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.vue-slider-ttb .vue-slider-mark{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-slider-ttb .vue-slider-mark-step{bottom:0}.vue-slider-ttb .vue-slider-mark-label{bottom:50%;-webkit-transform:translateY(50%);transform:translateY(50%)}.vue-slider-mark-label,.vue-slider-mark-step{position:absolute}",""]),t.exports=e},fb15:function(t,e,i){"use strict";if(i.r(e),i.d(e,"ERROR_TYPE",(function(){return J})),i.d(e,"VueSliderMark",(function(){return U})),i.d(e,"VueSliderDot",(function(){return P})),"undefined"!==typeof window){var n=window.document.currentScript,r=i("8875");n=r(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:r});var a=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);a&&(i.p=a[1])}var o=i("2638"),s=i.n(o);function l(t,e,i,n){var r,a=arguments.length,o=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,i,o):r(e,i))||o);return a>3&&o&&Object.defineProperty(e,i,o),o}var u=i("8bbf"),c=i.n(u),h=i("65d9"),p=i.n(h);function d(t,e){return void 0===e&&(e={}),Object(h["createDecorator"])((function(i,n){(i.props||(i.props={}))[n]=e,i.model={prop:n,event:t||n}}))}function f(t){return void 0===t&&(t={}),Object(h["createDecorator"])((function(e,i){(e.props||(e.props={}))[i]=t}))}function m(t,e){void 0===e&&(e={});var i=e.deep,n=void 0!==i&&i,r=e.immediate,a=void 0!==r&&r;return Object(h["createDecorator"])((function(e,i){"object"!==typeof e.watch&&(e.watch=Object.create(null));var r=e.watch;"object"!==typeof r[t]||Array.isArray(r[t])?"undefined"===typeof r[t]&&(r[t]=[]):r[t]=[r[t]],r[t].push({handler:i,deep:n,immediate:a})}))}function y(t){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _(t,e,i){return e&&g(t.prototype,e),i&&g(t,i),t}function b(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}function T(t,e){return T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},T(t,e)}function S(t){var e=x();return function(){var i,n=w(t);if(e){var r=w(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return O(this,i)}}function O(t,e){return!e||"object"!==y(e)&&"function"!==typeof e?k(t):e}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}i("4ed8");var A=function(){var t=function(t){b(i,t);var e=S(i);function i(){return v(this,i),e.apply(this,arguments)}return _(i,[{key:"dragStart",value:function(t){if(this.disabled)return!1;this.$emit("drag-start")}},{key:"render",value:function(){var t=arguments[0];return t("div",{ref:"dot",class:this.dotClasses,attrs:{"aria-valuetext":this.tooltipValue},on:{mousedown:this.dragStart,touchstart:this.dragStart}},[this.$slots.dot||t("div",{class:this.handleClasses,style:this.dotStyle}),"none"!==this.tooltip?t("div",{class:this.tooltipClasses},[this.$slots.tooltip||t("div",{class:this.tooltipInnerClasses,style:this.tooltipStyle},[t("span",{class:"vue-slider-dot-tooltip-text"},[this.tooltipValue])])]):null])}},{key:"dotClasses",get:function(){return["vue-slider-dot",{"vue-slider-dot-hover":"hover"===this.tooltip||"active"===this.tooltip,"vue-slider-dot-disabled":this.disabled,"vue-slider-dot-focus":this.focus}]}},{key:"handleClasses",get:function(){return["vue-slider-dot-handle",{"vue-slider-dot-handle-disabled":this.disabled,"vue-slider-dot-handle-focus":this.focus}]}},{key:"tooltipClasses",get:function(){return["vue-slider-dot-tooltip",["vue-slider-dot-tooltip-".concat(this.tooltipPlacement)],{"vue-slider-dot-tooltip-show":this.showTooltip}]}},{key:"tooltipInnerClasses",get:function(){return["vue-slider-dot-tooltip-inner",["vue-slider-dot-tooltip-inner-".concat(this.tooltipPlacement)],{"vue-slider-dot-tooltip-inner-disabled":this.disabled,"vue-slider-dot-tooltip-inner-focus":this.focus}]}},{key:"showTooltip",get:function(){switch(this.tooltip){case"always":return!0;case"none":return!1;case"focus":case"active":return!!this.focus;default:return!1}}},{key:"tooltipValue",get:function(){return this.tooltipFormatter?"string"===typeof this.tooltipFormatter?this.tooltipFormatter.replace(/\{value\}/,String(this.value)):this.tooltipFormatter(this.value):this.value}}]),i}(c.a);return l([f({default:0})],t.prototype,"value",void 0),l([f()],t.prototype,"tooltip",void 0),l([f()],t.prototype,"dotStyle",void 0),l([f()],t.prototype,"tooltipStyle",void 0),l([f({type:String,validator:function(t){return["top","right","bottom","left"].indexOf(t)>-1},required:!0})],t.prototype,"tooltipPlacement",void 0),l([f({type:[String,Function]})],t.prototype,"tooltipFormatter",void 0),l([f({type:Boolean,default:!1})],t.prototype,"focus",void 0),l([f({default:!1})],t.prototype,"disabled",void 0),t=l([p.a],t),t}(),P=A;function C(t){return C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function M(t,e,i){return e&&j(t.prototype,e),i&&j(t,i),t}function R(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}function D(t,e){return D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},D(t,e)}function I(t){var e=B();return function(){var i,n=V(t);if(e){var r=V(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return q(this,i)}}function q(t,e){return!e||"object"!==C(e)&&"function"!==typeof e?N(t):e}function N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function V(t){return V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},V(t)}i("556c");var F,L=function(){var t=function(t){R(i,t);var e=I(i);function i(){return E(this,i),e.apply(this,arguments)}return M(i,[{key:"labelClickHandle",value:function(t){t.stopPropagation(),this.$emit("pressLabel",this.mark.pos)}},{key:"render",value:function(){var t=arguments[0],e=this.mark;return t("div",{class:this.marksClasses},[this.$slots.step||t("div",{class:this.stepClasses,style:[this.stepStyle,e.style,e.active?this.stepActiveStyle:null,e.active?e.activeStyle:null]}),this.hideLabel?null:this.$slots.label||t("div",{class:this.labelClasses,style:[this.labelStyle,e.labelStyle,e.active?this.labelActiveStyle:null,e.active?e.labelActiveStyle:null],on:{click:this.labelClickHandle}},[e.label])])}},{key:"marksClasses",get:function(){return["vue-slider-mark",{"vue-slider-mark-active":this.mark.active}]}},{key:"stepClasses",get:function(){return["vue-slider-mark-step",{"vue-slider-mark-step-active":this.mark.active}]}},{key:"labelClasses",get:function(){return["vue-slider-mark-label",{"vue-slider-mark-label-active":this.mark.active}]}}]),i}(c.a);return l([f({required:!0})],t.prototype,"mark",void 0),l([f(Boolean)],t.prototype,"hideLabel",void 0),l([f()],t.prototype,"stepStyle",void 0),l([f()],t.prototype,"stepActiveStyle",void 0),l([f()],t.prototype,"labelStyle",void 0),l([f()],t.prototype,"labelActiveStyle",void 0),t=l([p.a],t),t}(),U=L,Y=function(t){return"number"===typeof t?"".concat(t,"px"):t},W=function(t){var e=document.documentElement,i=document.body,n=t.getBoundingClientRect(),r={y:n.top+(window.pageYOffset||e.scrollTop)-(e.clientTop||i.clientTop||0),x:n.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||i.clientLeft||0)};return r},G=function(t,e,i){var n="targetTouches"in t?t.targetTouches[0]:t,r=W(e),a={x:n.pageX-r.x,y:n.pageY-r.y};return{x:i?e.offsetWidth-a.x:a.x,y:i?e.offsetHeight-a.y:a.y}};(function(t){t[t["PAGE_UP"]=33]="PAGE_UP",t[t["PAGE_DOWN"]=34]="PAGE_DOWN",t[t["END"]=35]="END",t[t["HOME"]=36]="HOME",t[t["LEFT"]=37]="LEFT",t[t["UP"]=38]="UP",t[t["RIGHT"]=39]="RIGHT",t[t["DOWN"]=40]="DOWN"})(F||(F={}));var H=function(t,e){if(e.hook){var i=e.hook(t);if("function"===typeof i)return i;if(!i)return null}switch(t.keyCode){case F.UP:return function(t){return"ttb"===e.direction?t-1:t+1};case F.RIGHT:return function(t){return"rtl"===e.direction?t-1:t+1};case F.DOWN:return function(t){return"ttb"===e.direction?t+1:t-1};case F.LEFT:return function(t){return"rtl"===e.direction?t+1:t-1};case F.END:return function(){return e.max};case F.HOME:return function(){return e.min};case F.PAGE_UP:return function(t){return t+10};case F.PAGE_DOWN:return function(t){return t-10};default:return null}};function $(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Q(t,e,i){return e&&z(t.prototype,e),i&&z(t,i),t}var X,J,K=function(){function t(e){$(this,t),this.num=e}return Q(t,[{key:"decimal",value:function(t,e){var i=this.num,n=this.getDecimalLen(i),r=this.getDecimalLen(t),a=0;switch(e){case"+":a=this.getExponent(n,r),this.num=(this.safeRoundUp(i,a)+this.safeRoundUp(t,a))/a;break;case"-":a=this.getExponent(n,r),this.num=(this.safeRoundUp(i,a)-this.safeRoundUp(t,a))/a;break;case"*":this.num=this.safeRoundUp(this.safeRoundUp(i,this.getExponent(n)),this.safeRoundUp(t,this.getExponent(r)))/this.getExponent(n+r);break;case"/":a=this.getExponent(n,r),this.num=this.safeRoundUp(i,a)/this.safeRoundUp(t,a);break;case"%":a=this.getExponent(n,r),this.num=this.safeRoundUp(i,a)%this.safeRoundUp(t,a)/a;break}return this}},{key:"plus",value:function(t){return this.decimal(t,"+")}},{key:"minus",value:function(t){return this.decimal(t,"-")}},{key:"multiply",value:function(t){return this.decimal(t,"*")}},{key:"divide",value:function(t){return this.decimal(t,"/")}},{key:"remainder",value:function(t){return this.decimal(t,"%")}},{key:"toNumber",value:function(){return this.num}},{key:"getDecimalLen",value:function(t){var e="".concat(t).split("e");return("".concat(e[0]).split(".")[1]||"").length-(e[1]?+e[1]:0)}},{key:"getExponent",value:function(t,e){return Math.pow(10,void 0!==e?Math.max(t,e):t)}},{key:"safeRoundUp",value:function(t,e){return Math.round(t*e)}}]),t}();function Z(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function tt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(i),!0).forEach((function(e){ft(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Z(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function et(t,e){return rt(t)||nt(t,e)||st(t,e)||it()}function it(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nt(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)if(i.push(o.value),e&&i.length===e)break}catch(l){r=!0,a=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw a}}return i}}function rt(t){if(Array.isArray(t))return t}function at(t){return ut(t)||lt(t)||st(t)||ot()}function ot(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function st(t,e){if(t){if("string"===typeof t)return ct(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ct(t,e):void 0}}function lt(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function ut(t){if(Array.isArray(t))return ct(t)}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dt(t,e,i){return e&&pt(t.prototype,e),i&&pt(t,i),t}function ft(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}(function(t){t[t["VALUE"]=1]="VALUE",t[t["INTERVAL"]=2]="INTERVAL",t[t["MIN"]=3]="MIN",t[t["MAX"]=4]="MAX",t[t["ORDER"]=5]="ORDER"})(J||(J={}));var mt=(X={},ft(X,J.VALUE,'The type of the "value" is illegal'),ft(X,J.INTERVAL,'The prop "interval" is invalid, "(max - min)" must be divisible by "interval"'),ft(X,J.MIN,'The "value" must be greater than or equal to the "min".'),ft(X,J.MAX,'The "value" must be less than or equal to the "max".'),ft(X,J.ORDER,'When "order" is false, the parameters "minRange", "maxRange", "fixed", "enabled" are invalid.'),X),yt=function(){function t(e){ht(this,t),this.dotsPos=[],this.dotsValue=[],this.cacheRangeDir={},this.data=e.data,this.max=e.max,this.min=e.min,this.interval=e.interval,this.order=e.order,this.marks=e.marks,this.included=e.included,this.process=e.process,this.adsorb=e.adsorb,this.dotOptions=e.dotOptions,this.onError=e.onError,this.order?(this.minRange=e.minRange||0,this.maxRange=e.maxRange||0,this.enableCross=e.enableCross,this.fixed=e.fixed):((e.minRange||e.maxRange||!e.enableCross||e.fixed)&&this.emitError(J.ORDER),this.minRange=0,this.maxRange=0,this.enableCross=!0,this.fixed=!1),this.setValue(e.value)}return dt(t,[{key:"setValue",value:function(t){var e=this;this.setDotsValue(Array.isArray(t)?this.order?at(t).sort((function(t,i){return e.getIndexByValue(t)-e.getIndexByValue(i)})):at(t):[t],!0)}},{key:"setDotsValue",value:function(t,e){this.dotsValue=t,e&&this.syncDotsPos()}},{key:"setDotsPos",value:function(t){var e=this,i=this.order?at(t).sort((function(t,e){return t-e})):t;this.dotsPos=i,this.setDotsValue(i.map((function(t){return e.getValueByPos(t)})),this.adsorb)}},{key:"getValueByPos",value:function(t){var e=this.parsePos(t);if(this.included){var i=100;this.markList.forEach((function(n){var r=Math.abs(n.pos-t);r<i&&(i=r,e=n.value)}))}return e}},{key:"syncDotsPos",value:function(){var t=this;this.dotsPos=this.dotsValue.map((function(e){return t.parseValue(e)}))}},{key:"getRecentDot",value:function(t){var e=this.dotsPos.map((function(e){return Math.abs(e-t)}));return e.indexOf(Math.min.apply(Math,at(e)))}},{key:"getIndexByValue",value:function(t){return this.data?this.data.indexOf(t):new K(+t).minus(this.min).divide(this.interval).toNumber()}},{key:"getValueByIndex",value:function(t){return t<0?t=0:t>this.total&&(t=this.total),this.data?this.data[t]:new K(t).multiply(this.interval).plus(this.min).toNumber()}},{key:"setDotPos",value:function(t,e){t=this.getValidPos(t,e).pos;var i=t-this.dotsPos[e];if(i){var n=new Array(this.dotsPos.length);this.fixed?n=this.getFixedChangePosArr(i,e):this.minRange||this.maxRange?n=this.getLimitRangeChangePosArr(t,i,e):n[e]=i,this.setDotsPos(this.dotsPos.map((function(t,e){return t+(n[e]||0)})))}}},{key:"getFixedChangePosArr",value:function(t,e){var i=this;return this.dotsPos.forEach((function(n,r){if(r!==e){var a=i.getValidPos(n+t,r),o=a.pos,s=a.inRange;s||(t=Math.min(Math.abs(o-n),Math.abs(t))*(t<0?-1:1))}})),this.dotsPos.map((function(e){return t}))}},{key:"getLimitRangeChangePosArr",value:function(t,e,i){var n=this,r=[{index:i,changePos:e}],a=e;return[this.minRange,this.maxRange].forEach((function(o,s){if(!o)return!1;var l=0===s,u=e>0,c=0;c=l?u?1:-1:u?-1:1;var h=function(t,e){var i=Math.abs(t-e);return l?i<n.minRangeDir:i>n.maxRangeDir},p=i+c,d=n.dotsPos[p],f=t;while(n.isPos(d)&&h(d,f)){var m=n.getValidPos(d+a,p),y=m.pos;r.push({index:p,changePos:y-d}),p+=c,f=y,d=n.dotsPos[p]}})),this.dotsPos.map((function(t,e){var i=r.filter((function(t){return t.index===e}));return i.length?i[0].changePos:0}))}},{key:"isPos",value:function(t){return"number"===typeof t}},{key:"getValidPos",value:function(t,e){var i=this.valuePosRange[e],n=!0;return t<i[0]?(t=i[0],n=!1):t>i[1]&&(t=i[1],n=!1),{pos:t,inRange:n}}},{key:"parseValue",value:function(t){if(this.data)t=this.data.indexOf(t);else if("number"===typeof t||"string"===typeof t){if(t=+t,t<this.min)return this.emitError(J.MIN),0;if(t>this.max)return this.emitError(J.MAX),0;if("number"!==typeof t||t!==t)return this.emitError(J.VALUE),0;t=new K(t).minus(this.min).divide(this.interval).toNumber()}var e=new K(t).multiply(this.gap).toNumber();return e<0?0:e>100?100:e}},{key:"parsePos",value:function(t){var e=Math.round(t/this.gap);return this.getValueByIndex(e)}},{key:"isActiveByPos",value:function(t){return this.processArray.some((function(e){var i=et(e,2),n=i[0],r=i[1];return t>=n&&t<=r}))}},{key:"getValues",value:function(){if(this.data)return this.data;for(var t=[],e=0;e<=this.total;e++)t.push(new K(e).multiply(this.interval).plus(this.min).toNumber());return t}},{key:"getRangeDir",value:function(t){return t?new K(t).divide(new K(this.data?this.data.length-1:this.max).minus(this.data?0:this.min).toNumber()).multiply(100).toNumber():100}},{key:"emitError",value:function(t){this.onError&&this.onError(t,mt[t])}},{key:"getDotRange",value:function(t,e,i){if(!this.dotOptions)return i;var n=Array.isArray(this.dotOptions)?this.dotOptions[t]:this.dotOptions;return n&&void 0!==n[e]?this.parseValue(n[e]):i}},{key:"markList",get:function(){var t=this;if(!this.marks)return[];var e=function(e,i){var n=t.parseValue(e);return tt({pos:n,value:e,label:e,active:t.isActiveByPos(n)},i)};return!0===this.marks?this.getValues().map((function(t){return e(t)})):"[object Object]"===Object.prototype.toString.call(this.marks)?Object.keys(this.marks).sort((function(t,e){return+t-+e})).map((function(i){var n=t.marks[i];return e(i,"string"!==typeof n?n:{label:n})})):Array.isArray(this.marks)?this.marks.map((function(t){return e(t)})):"function"===typeof this.marks?this.getValues().map((function(e){return{value:e,result:t.marks(e)}})).filter((function(t){var e=t.result;return!!e})).map((function(t){var i=t.value,n=t.result;return e(i,n)})):[]}},{key:"processArray",get:function(){if(this.process){if("function"===typeof this.process)return this.process(this.dotsPos);if(1===this.dotsPos.length)return[[0,this.dotsPos[0]]];if(this.dotsPos.length>1)return[[Math.min.apply(Math,at(this.dotsPos)),Math.max.apply(Math,at(this.dotsPos))]]}return[]}},{key:"total",get:function(){var t=0;return t=this.data?this.data.length-1:new K(this.max).minus(this.min).divide(this.interval).toNumber(),t-Math.floor(t)!==0?(this.emitError(J.INTERVAL),0):t}},{key:"gap",get:function(){return 100/this.total}},{key:"minRangeDir",get:function(){return this.cacheRangeDir[this.minRange]?this.cacheRangeDir[this.minRange]:this.cacheRangeDir[this.minRange]=this.getRangeDir(this.minRange)}},{key:"maxRangeDir",get:function(){return this.cacheRangeDir[this.maxRange]?this.cacheRangeDir[this.maxRange]:this.cacheRangeDir[this.maxRange]=this.getRangeDir(this.maxRange)}},{key:"valuePosRange",get:function(){var t=this,e=this.dotsPos,i=[];return e.forEach((function(n,r){i.push([Math.max(t.minRange?t.minRangeDir*r:0,t.enableCross?0:e[r-1]||0,t.getDotRange(r,"min",0)),Math.min(t.minRange?100-t.minRangeDir*(e.length-1-r):100,t.enableCross?100:e[r+1]||100,t.getDotRange(r,"max",100))])})),i}},{key:"dotsIndex",get:function(){var t=this;return this.dotsValue.map((function(e){return t.getIndexByValue(e)}))}}]),t}();function vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _t(t,e,i){return e&&gt(t.prototype,e),i&&gt(t,i),t}var bt=function(){function t(e){vt(this,t),this.states=0,this.map=e}return _t(t,[{key:"add",value:function(t){this.states|=t}},{key:"delete",value:function(t){this.states&=~t}},{key:"toggle",value:function(t){this.has(t)?this.delete(t):this.add(t)}},{key:"has",value:function(t){return!!(this.states&t)}}]),t}();function Tt(t,e){return kt(t)||Ot(t,e)||Et(t,e)||St()}function St(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ot(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)if(i.push(o.value),e&&i.length===e)break}catch(l){r=!0,a=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw a}}return i}}function kt(t){if(Array.isArray(t))return t}function xt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function wt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(i),!0).forEach((function(e){At(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):xt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function At(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Pt(t){return Mt(t)||jt(t)||Et(t)||Ct()}function Ct(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Et(t,e){if(t){if("string"===typeof t)return Rt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Rt(t,e):void 0}}function jt(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function Mt(t){if(Array.isArray(t))return Rt(t)}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Dt(t){return Dt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function It(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Nt(t,e,i){return e&&qt(t.prototype,e),i&&qt(t,i),t}function Bt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vt(t,e)}function Vt(t,e){return Vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Vt(t,e)}function Ft(t){var e=Yt();return function(){var i,n=Wt(t);if(e){var r=Wt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Lt(this,i)}}function Lt(t,e){return!e||"object"!==Dt(e)&&"function"!==typeof e?Ut(t):e}function Ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Wt(t){return Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Wt(t)}i("4abb");var Gt={None:0,Drag:2,Focus:4},Ht=4,$t=function(){var t=function(t){Bt(i,t);var e=Ft(i);function i(){var t;return It(this,i),t=e.apply(this,arguments),t.states=new bt(Gt),t.scale=1,t.focusDotIndex=0,t}return Nt(i,[{key:"isObjectData",value:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)}},{key:"isObjectArrayData",value:function(t){return!!t&&Array.isArray(t)&&t.length>0&&"object"===Dt(t[0])}},{key:"onValueChanged",value:function(){this.control&&!this.states.has(Gt.Drag)&&this.isNotSync&&(this.control.setValue(this.value),this.syncValueByPos())}},{key:"created",value:function(){this.initControl()}},{key:"mounted",value:function(){this.bindEvent()}},{key:"beforeDestroy",value:function(){this.unbindEvent()}},{key:"bindEvent",value:function(){document.addEventListener("touchmove",this.dragMove,{passive:!1}),document.addEventListener("touchend",this.dragEnd,{passive:!1}),document.addEventListener("mousedown",this.blurHandle),document.addEventListener("mousemove",this.dragMove),document.addEventListener("mouseup",this.dragEnd),document.addEventListener("mouseleave",this.dragEnd),document.addEventListener("keydown",this.keydownHandle)}},{key:"unbindEvent",value:function(){document.removeEventListener("touchmove",this.dragMove),document.removeEventListener("touchend",this.dragEnd),document.removeEventListener("mousedown",this.blurHandle),document.removeEventListener("mousemove",this.dragMove),document.removeEventListener("mouseup",this.dragEnd),document.removeEventListener("mouseleave",this.dragEnd),document.removeEventListener("keydown",this.keydownHandle)}},{key:"setScale",value:function(){var t=new K(Math.floor(this.isHorizontal?this.$refs.rail.offsetWidth:this.$refs.rail.offsetHeight));void 0!==this.zoom&&t.multiply(this.zoom),t.divide(100),this.scale=t.toNumber()}},{key:"initControl",value:function(){var t=this;this.control=new yt({value:this.value,data:this.sliderData,enableCross:this.enableCross,fixed:this.fixed,max:this.max,min:this.min,interval:this.interval,minRange:this.minRange,maxRange:this.maxRange,order:this.order,marks:this.sliderMarks,included:this.included,process:this.process,adsorb:this.adsorb,dotOptions:this.dotOptions,onError:this.emitError}),this.syncValueByPos(),["data","enableCross","fixed","max","min","interval","minRange","maxRange","order","marks","process","adsorb","included","dotOptions"].forEach((function(e){t.$watch(e,(function(i){if("data"===e&&Array.isArray(t.control.data)&&Array.isArray(i)&&t.control.data.length===i.length&&i.every((function(e,i){return e===t.control.data[i]})))return!1;switch(e){case"data":case"dataLabel":case"dataValue":t.control.data=t.sliderData;break;case"mark":t.control.marks=t.sliderMarks;break;default:t.control[e]=i}["data","max","min","interval"].indexOf(e)>-1&&t.control.syncDotsPos()}))}))}},{key:"syncValueByPos",value:function(){var t=this.control.dotsValue;this.isDiff(t,Array.isArray(this.value)?this.value:[this.value])&&this.$emit("change",1===t.length?t[0]:Pt(t),this.focusDotIndex)}},{key:"isDiff",value:function(t,e){return t.length!==e.length||t.some((function(t,i){return t!==e[i]}))}},{key:"emitError",value:function(t,e){this.silent||console.error("[VueSlider error]: ".concat(e)),this.$emit("error",t,e)}},{key:"dragStartOnProcess",value:function(t){if(this.dragOnClick){this.setScale();var e=this.getPosByEvent(t),i=this.control.getRecentDot(e);if(this.dots[i].disabled)return;this.dragStart(i),this.control.setDotPos(e,this.focusDotIndex),this.lazy||this.syncValueByPos()}}},{key:"dragStart",value:function(t){this.focusDotIndex=t,this.setScale(),this.states.add(Gt.Drag),this.states.add(Gt.Focus),this.$emit("drag-start",this.focusDotIndex)}},{key:"dragMove",value:function(t){if(!this.states.has(Gt.Drag))return!1;t.preventDefault();var e=this.getPosByEvent(t);this.isCrossDot(e),this.control.setDotPos(e,this.focusDotIndex),this.lazy||this.syncValueByPos();var i=this.control.dotsValue;this.$emit("dragging",1===i.length?i[0]:Pt(i),this.focusDotIndex)}},{key:"isCrossDot",value:function(t){if(this.canSort){var e=this.focusDotIndex,i=t;if(i>this.dragRange[1]?(i=this.dragRange[1],this.focusDotIndex++):i<this.dragRange[0]&&(i=this.dragRange[0],this.focusDotIndex--),e!==this.focusDotIndex){var n=this.$refs["dot-".concat(this.focusDotIndex)];n&&n.$el&&n.$el.focus(),this.control.setDotPos(i,e)}}}},{key:"dragEnd",value:function(t){var e=this;if(!this.states.has(Gt.Drag))return!1;setTimeout((function(){e.lazy&&e.syncValueByPos(),e.included&&e.isNotSync?e.control.setValue(e.value):e.control.syncDotsPos(),e.states.delete(Gt.Drag),e.useKeyboard&&!("targetTouches"in t)||e.states.delete(Gt.Focus),e.$emit("drag-end",e.focusDotIndex)}))}},{key:"blurHandle",value:function(t){if(!this.states.has(Gt.Focus)||!this.$refs.container||this.$refs.container.contains(t.target))return!1;this.states.delete(Gt.Focus)}},{key:"clickHandle",value:function(t){if(!this.clickable||this.disabled)return!1;if(!this.states.has(Gt.Drag)){this.setScale();var e=this.getPosByEvent(t);this.setValueByPos(e)}}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.states.add(Gt.Focus),this.focusDotIndex=t}},{key:"blur",value:function(){this.states.delete(Gt.Focus)}},{key:"getValue",value:function(){var t=this.control.dotsValue;return 1===t.length?t[0]:t}},{key:"getIndex",value:function(){var t=this.control.dotsIndex;return 1===t.length?t[0]:t}},{key:"setValue",value:function(t){this.control.setValue(Array.isArray(t)?Pt(t):[t]),this.syncValueByPos()}},{key:"setIndex",value:function(t){var e=this,i=Array.isArray(t)?t.map((function(t){return e.control.getValueByIndex(t)})):this.control.getValueByIndex(t);this.setValue(i)}},{key:"setValueByPos",value:function(t){var e=this,i=this.control.getRecentDot(t);if(this.disabled||this.dots[i].disabled)return!1;this.focusDotIndex=i,this.control.setDotPos(t,i),this.syncValueByPos(),this.useKeyboard&&this.states.add(Gt.Focus),setTimeout((function(){e.included&&e.isNotSync?e.control.setValue(e.value):e.control.syncDotsPos()}))}},{key:"keydownHandle",value:function(t){var e=this;if(!this.useKeyboard||!this.states.has(Gt.Focus))return!1;var i=this.included&&this.marks,n=H(t,{direction:this.direction,max:i?this.control.markList.length-1:this.control.total,min:0,hook:this.keydownHook});if(n){t.preventDefault();var r=-1,a=0;i?(this.control.markList.some((function(t,i){return t.value===e.control.dotsValue[e.focusDotIndex]&&(r=n(i),!0)})),r<0?r=0:r>this.control.markList.length-1&&(r=this.control.markList.length-1),a=this.control.markList[r].pos):(r=n(this.control.getIndexByValue(this.control.dotsValue[this.focusDotIndex])),a=this.control.parseValue(this.control.getValueByIndex(r))),this.isCrossDot(a),this.control.setDotPos(a,this.focusDotIndex),this.syncValueByPos()}}},{key:"getPosByEvent",value:function(t){return G(t,this.$refs.rail,this.isReverse)[this.isHorizontal?"x":"y"]/this.scale}},{key:"renderSlot",value:function(t,e,i,n){var r=this.$createElement,a=this.$scopedSlots[t];return a?n?a(e):r("template",{slot:t},[a(e)]):i}},{key:"render",value:function(){var t=this,e=arguments[0];return e("div",s()([{ref:"container",class:this.containerClasses,style:this.containerStyles,on:{click:this.clickHandle,touchstart:this.dragStartOnProcess,mousedown:this.dragStartOnProcess}},this.$attrs]),[e("div",{ref:"rail",class:"vue-slider-rail",style:this.railStyle},[this.processArray.map((function(i,n){return t.renderSlot("process",i,e("div",{class:"vue-slider-process",key:"process-".concat(n),style:i.style}),!0)})),this.sliderMarks?e("div",{class:"vue-slider-marks"},[this.control.markList.map((function(i,n){var r;return t.renderSlot("mark",i,e("vue-slider-mark",{key:"mark-".concat(n),attrs:{mark:i,hideLabel:t.hideLabel,stepStyle:t.stepStyle,stepActiveStyle:t.stepActiveStyle,labelStyle:t.labelStyle,labelActiveStyle:t.labelActiveStyle},style:(r={},At(r,t.isHorizontal?"height":"width","100%"),At(r,t.isHorizontal?"width":"height",t.tailSize),At(r,t.mainDirection,"".concat(i.pos,"%")),r),on:{pressLabel:function(e){return t.clickable&&t.setValueByPos(e)}}},[t.renderSlot("step",i,null),t.renderSlot("label",i,null)]),!0)}))]):null,this.dots.map((function(i,n){var r;return e("vue-slider-dot",{ref:"dot-".concat(n),key:"dot-".concat(n),attrs:wt({value:i.value,disabled:i.disabled,focus:i.focus,"dot-style":[i.style,i.disabled?i.disabledStyle:null,i.focus?i.focusStyle:null],tooltip:i.tooltip||t.tooltip,"tooltip-style":[t.tooltipStyle,i.tooltipStyle,i.disabled?i.tooltipDisabledStyle:null,i.focus?i.tooltipFocusStyle:null],"tooltip-formatter":Array.isArray(t.sliderTooltipFormatter)?t.sliderTooltipFormatter[n]:t.sliderTooltipFormatter,"tooltip-placement":t.tooltipDirections[n],role:"slider","aria-valuenow":i.value,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-orientation":t.isHorizontal?"horizontal":"vertical",tabindex:"0"},t.dotAttrs),style:[t.dotBaseStyle,(r={},At(r,t.mainDirection,"".concat(i.pos,"%")),At(r,"transition","".concat(t.mainDirection," ").concat(t.animateTime,"s")),r)],on:{"drag-start":function(){return t.dragStart(n)}},nativeOn:{focus:function(){return!i.disabled&&t.focus(n)},blur:function(){return t.blur()}}},[t.renderSlot("dot",i,null),t.renderSlot("tooltip",i,null)])})),this.renderSlot("default",{value:this.getValue()},null,!0)])])}},{key:"tailSize",get:function(){return Y((this.isHorizontal?this.height:this.width)||Ht)}},{key:"containerClasses",get:function(){return["vue-slider",["vue-slider-".concat(this.direction)],{"vue-slider-disabled":this.disabled}]}},{key:"containerStyles",get:function(){var t=Array.isArray(this.dotSize)?this.dotSize:[this.dotSize,this.dotSize],e=Tt(t,2),i=e[0],n=e[1],r=this.width?Y(this.width):this.isHorizontal?"auto":Y(Ht),a=this.height?Y(this.height):this.isHorizontal?Y(Ht):"auto";return{padding:this.contained?"".concat(n/2,"px ").concat(i/2,"px"):this.isHorizontal?"".concat(n/2,"px 0"):"0 ".concat(i/2,"px"),width:r,height:a}}},{key:"processArray",get:function(){var t=this;return this.control.processArray.map((function(e,i){var n,r=Tt(e,3),a=r[0],o=r[1],s=r[2];if(a>o){var l=[o,a];a=l[0],o=l[1]}var u=t.isHorizontal?"width":"height";return{start:a,end:o,index:i,style:wt(wt((n={},At(n,t.isHorizontal?"height":"width","100%"),At(n,t.isHorizontal?"top":"left",0),At(n,t.mainDirection,"".concat(a,"%")),At(n,u,"".concat(o-a,"%")),At(n,"transitionProperty","".concat(u,",").concat(t.mainDirection)),At(n,"transitionDuration","".concat(t.animateTime,"s")),n),t.processStyle),s)}}))}},{key:"dotBaseStyle",get:function(){var t,e=Array.isArray(this.dotSize)?this.dotSize:[this.dotSize,this.dotSize],i=Tt(e,2),n=i[0],r=i[1];return t=this.isHorizontal?At({transform:"translate(".concat(this.isReverse?"50%":"-50%",", -50%)"),WebkitTransform:"translate(".concat(this.isReverse?"50%":"-50%",", -50%)"),top:"50%"},"ltr"===this.direction?"left":"right","0"):At({transform:"translate(-50%, ".concat(this.isReverse?"50%":"-50%",")"),WebkitTransform:"translate(-50%, ".concat(this.isReverse?"50%":"-50%",")"),left:"50%"},"btt"===this.direction?"bottom":"top","0"),wt({width:"".concat(n,"px"),height:"".concat(r,"px")},t)}},{key:"mainDirection",get:function(){switch(this.direction){case"ltr":return"left";case"rtl":return"right";case"btt":return"bottom";case"ttb":return"top"}}},{key:"isHorizontal",get:function(){return"ltr"===this.direction||"rtl"===this.direction}},{key:"isReverse",get:function(){return"rtl"===this.direction||"btt"===this.direction}},{key:"tooltipDirections",get:function(){var t=this.tooltipPlacement||(this.isHorizontal?"top":"left");return Array.isArray(t)?t:this.dots.map((function(){return t}))}},{key:"dots",get:function(){var t=this;return this.control.dotsPos.map((function(e,i){return wt({pos:e,index:i,value:t.control.dotsValue[i],focus:t.states.has(Gt.Focus)&&t.focusDotIndex===i,disabled:t.disabled,style:t.dotStyle},(Array.isArray(t.dotOptions)?t.dotOptions[i]:t.dotOptions)||{})}))}},{key:"animateTime",get:function(){return this.states.has(Gt.Drag)?0:this.duration}},{key:"canSort",get:function(){return this.order&&!this.minRange&&!this.maxRange&&!this.fixed&&this.enableCross}},{key:"sliderData",get:function(){var t=this;return this.isObjectArrayData(this.data)?this.data.map((function(e){return e[t.dataValue]})):this.isObjectData(this.data)?Object.keys(this.data):this.data}},{key:"sliderMarks",get:function(){var t=this;return this.marks?this.marks:this.isObjectArrayData(this.data)?function(e){var i={label:e};return t.data.some((function(n){return n[t.dataValue]===e&&(i.label=n[t.dataLabel],!0)})),i}:this.isObjectData(this.data)?this.data:void 0}},{key:"sliderTooltipFormatter",get:function(){var t=this;if(this.tooltipFormatter)return this.tooltipFormatter;if(this.isObjectArrayData(this.data))return function(e){var i=""+e;return t.data.some((function(n){return n[t.dataValue]===e&&(i=n[t.dataLabel],!0)})),i};if(this.isObjectData(this.data)){var e=this.data;return function(t){return e[t]}}}},{key:"isNotSync",get:function(){var t=this.control.dotsValue;return Array.isArray(this.value)?this.value.length!==t.length||this.value.some((function(e,i){return e!==t[i]})):this.value!==t[0]}},{key:"dragRange",get:function(){var t=this.dots[this.focusDotIndex-1],e=this.dots[this.focusDotIndex+1];return[t?t.pos:-1/0,e?e.pos:1/0]}}]),i}(c.a);return l([d("change",{default:0})],t.prototype,"value",void 0),l([f({type:Boolean,default:!1})],t.prototype,"silent",void 0),l([f({default:"ltr",validator:function(t){return["ltr","rtl","ttb","btt"].indexOf(t)>-1}})],t.prototype,"direction",void 0),l([f({type:[Number,String]})],t.prototype,"width",void 0),l([f({type:[Number,String]})],t.prototype,"height",void 0),l([f({default:14})],t.prototype,"dotSize",void 0),l([f({default:!1})],t.prototype,"contained",void 0),l([f({type:Number,default:0})],t.prototype,"min",void 0),l([f({type:Number,default:100})],t.prototype,"max",void 0),l([f({type:Number,default:1})],t.prototype,"interval",void 0),l([f({type:Boolean,default:!1})],t.prototype,"disabled",void 0),l([f({type:Boolean,default:!0})],t.prototype,"clickable",void 0),l([f({type:Boolean,default:!1})],t.prototype,"dragOnClick",void 0),l([f({type:Number,default:.5})],t.prototype,"duration",void 0),l([f({type:[Object,Array]})],t.prototype,"data",void 0),l([f({type:String,default:"value"})],t.prototype,"dataValue",void 0),l([f({type:String,default:"label"})],t.prototype,"dataLabel",void 0),l([f({type:Boolean,default:!1})],t.prototype,"lazy",void 0),l([f({type:String,validator:function(t){return["none","always","focus","hover","active"].indexOf(t)>-1},default:"active"})],t.prototype,"tooltip",void 0),l([f({type:[String,Array],validator:function(t){return(Array.isArray(t)?t:[t]).every((function(t){return["top","right","bottom","left"].indexOf(t)>-1}))}})],t.prototype,"tooltipPlacement",void 0),l([f({type:[String,Array,Function]})],t.prototype,"tooltipFormatter",void 0),l([f({type:Boolean,default:!0})],t.prototype,"useKeyboard",void 0),l([f(Function)],t.prototype,"keydownHook",void 0),l([f({type:Boolean,default:!0})],t.prototype,"enableCross",void 0),l([f({type:Boolean,default:!1})],t.prototype,"fixed",void 0),l([f({type:Boolean,default:!0})],t.prototype,"order",void 0),l([f(Number)],t.prototype,"minRange",void 0),l([f(Number)],t.prototype,"maxRange",void 0),l([f({type:[Boolean,Object,Array,Function],default:!1})],t.prototype,"marks",void 0),l([f({type:[Boolean,Function],default:!0})],t.prototype,"process",void 0),l([f({type:[Number]})],t.prototype,"zoom",void 0),l([f(Boolean)],t.prototype,"included",void 0),l([f(Boolean)],t.prototype,"adsorb",void 0),l([f(Boolean)],t.prototype,"hideLabel",void 0),l([f()],t.prototype,"dotOptions",void 0),l([f()],t.prototype,"dotAttrs",void 0),l([f()],t.prototype,"railStyle",void 0),l([f()],t.prototype,"processStyle",void 0),l([f()],t.prototype,"dotStyle",void 0),l([f()],t.prototype,"tooltipStyle",void 0),l([f()],t.prototype,"stepStyle",void 0),l([f()],t.prototype,"stepActiveStyle",void 0),l([f()],t.prototype,"labelStyle",void 0),l([f()],t.prototype,"labelActiveStyle",void 0),l([m("value")],t.prototype,"onValueChanged",null),t=l([p()({data:function(){return{control:null}},components:{VueSliderDot:P,VueSliderMark:U}})],t),t}(),zt=$t;zt.VueSliderMark=U,zt.VueSliderDot=P;var Qt=zt;e["default"]=Qt}})["default"]}))},"46c0":function(t,e,i){var n=i("7797");n("flatMap")},4894:function(t,e,i){"use strict";var n=i("2513"),r=i("dc8e"),a=i("f690"),o=i("ceb0"),s=i("8e65"),l=i("892c");n({target:"Array",proto:!0},{flatMap:function(t){var e,i=a(this),n=o(i.length);return s(t),e=l(i,0),e.length=r(e,i,i,n,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},5:function(t,e,i){t.exports=i("7939")},6094:function(t,e,i){"use strict";e["a"]="13.8.34"},"758b":function(t,e,i){"use strict";var n=i("2513"),r=i("16ea").f,a=i("ceb0"),o=i("f5d0"),s=i("41e6"),l=i("3b94"),u=i("3c2a"),c="".endsWith,h=Math.min,p=l("endsWith"),d=!u&&!p&&!!function(){var t=r(String.prototype,"endsWith");return t&&!t.writable}();n({target:"String",proto:!0,forced:!d&&!p},{endsWith:function(t){var e=String(s(this));o(t);var i=arguments.length>1?arguments[1]:void 0,n=a(e.length),r=void 0===i?n:h(a(i),n),l=String(t);return c?c.call(e,l,r):e.slice(r-l.length,r)===l}})},7939:function(t,e,i){"use strict";i.r(e);i("fd85"),i("15db"),i("c026"),i("4031");var n=i("a4b5"),r=i("4af9"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),i("form",{staticClass:"d-flex flex-column",on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[i("div",{staticClass:"row order-3"},[i("div",{staticClass:"col-12 description small"},[t._v(" Example searches: "),i("ul",{staticClass:"inline-list"},[i("li",[i("example-link",{attrs:{query:"piracy"}}),t._v(" "),i("span",{attrs:{"aria-hidden":"true"}},[t._v(" / ")])],1),i("li",[i("example-link",{attrs:{query:"he said, she said"}}),t._v(" "),i("span",{attrs:{"aria-hidden":"true"}},[t._v(" / ")])],1),i("li",[i("example-link",{attrs:{query:"ride a *"}}),t._v(" "),i("span",{attrs:{"aria-hidden":"true"}},[t._v(" / ")])],1),i("li",[i("example-link",{attrs:{query:"me: lobster, cal: gold, tex: cowboy"}}),t._v(" "),i("span",{attrs:{"aria-hidden":"true"}},[t._v(" / ")])],1),i("li",[i("example-link",{attrs:{query:"*: gold"}}),t._v(" "),i("span",{attrs:{"aria-hidden":"true"}},[t._v(" / ")])],1),i("li",[i("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.clickHelpButton(e)}}},[t._v("more ...")])])])])]),i("div",{staticClass:"form-row query-row"},[i("div",{staticClass:"col-sm pr-0 mr-2 mb-2"},[i("input",{ref:"textToGraph",staticClass:"text-to-graph mr-5",attrs:{"aria-label":"terms to graph"},domProps:{value:t.textToGraph}})]),i("loading-button",{staticClass:"col-auto pl-sm-0 ml-auto",attrs:{showLoading:t.showLoading}},[t._v("Search")]),i("div",{staticClass:"col-auto"},[i("panelset-button",{attrs:{"panel-id":"help","current-panel":t.currentPanel,title:"Advanced search tips","aria-label":"advanced search tips"}},[t._v(" ADVANCED ")])],1)],1),i("panelset-panel",{attrs:{"panel-id":"help","current-panel":t.currentPanel}},[i("div",{on:{click:t.helpLinkClicked}},[i("h5",[t._v("Search tips")]),i("p",[t._v(" Search for phrases of one to three words. Multiple phrases can be separated by commas. Do not use quotes. All searches are case-insensitive. Examples: ")]),i("ul",{staticClass:"bullets"},[i("li",[i("example-link",{attrs:{query:"piracy"}}),t._v(' (history of the term "piracy")')],1),i("li",[i("example-link",{attrs:{query:"his or her"}}),t._v(' (history of the term "his or her")')],1),i("li",[i("example-link",{attrs:{query:"apple, banana, orange, pear"}}),t._v(' (compare "apple" to "banana" to "orange" to "pear")')],1),i("li",[i("example-link",{attrs:{query:"he said, she said"}}),t._v(' (compare "he said" to "she said")')],1)]),i("h5",{staticClass:"card-title"},[t._v("Wildcard search")]),i("p",[t._v(' Replace the final word of a phrase with "*" to perform a wildcard search. This will return the top ten phrases beginning with your first one or two words. Wildcards are currently allowed only as the final word in a phrase. Examples: ')]),i("ul",{staticClass:"bullets"},[i("li",[i("example-link",{attrs:{query:"constitutional *"}}),t._v(' (top ten two-word phrases beginning with "constitutional")')],1),i("li",[i("example-link",{attrs:{query:"ride a *"}}),t._v(' (top ten three-word phrases beginning with "ride a")')],1),i("li",[t._v("* amendment (not currently supported)")])]),i("h5",{staticClass:"card-title"},[t._v("Jurisdiction search")]),i("p",[t._v(" Limit a term to a particular jurisdiction (US state or state-level political division) by starting the term with that jurisdiction's code. Available jurisdiction codes are listed below. Examples: ")]),i("ul",{staticClass:"bullets"},[i("li",[i("example-link",{attrs:{query:"cal: gold mine"}}),t._v(' (history of the term "gold mine" in California)')],1),i("li",[i("example-link",{attrs:{query:"me: lobster, cal: gold, tex: cowboy"}}),t._v(' (compare "lobster" in Maine, "gold" in California, and "cowboy" in Texas)')],1)]),i("p",[t._v(' Show all jurisdictions separately by using the special jurisdiction code "*". Examples: ')]),i("ul",{staticClass:"bullets"},[i("li",[i("example-link",{attrs:{query:"*: gold"}}),t._v(' (compare "gold" in all jurisdictions separately)')],1)]),i("h5",{staticClass:"card-title"},[t._v("Jurisdiction codes")]),i("div",{staticClass:"row"},t._l(t.jurisdictions,(function(e){return i("div",{key:e[0],staticClass:"col-4"},[i("p",[t._v(" "+t._s(e[1])+': "'),i("a",{attrs:{href:"?q="+e[0]+"}: "},on:{click:function(i){return i.preventDefault(),t.appendJurisdictionCode(e[0])}}},[t._v(" "+t._s(e[0])+":")]),t._v('" ')])])})),0)])])],1),t.errors.length?i("div",{staticClass:"row"},[i("ul",{staticClass:"small alert-danger"},t._l(t.errors,(function(e){return i("li",[t._v(t._s(e))])})),0)]):t._e(),t.chartData.datasets.length>0?i("div",{staticClass:"row graph-menu"},[i("div",{staticClass:"col-auto ml-auto"},[i("panelset-button",{attrs:{"panel-id":"options","current-panel":t.currentPanel,title:"Customize"}},[i("img",{attrs:{src:t.urls.static+"img/icons/settings.svg"}}),i("span",[t._v("Customize graph")])]),i("panelset-button",{attrs:{"panel-id":"keyboard","current-panel":t.currentPanel,title:"Keyboard commands"}},[i("img",{attrs:{src:t.urls.static+"img/icons/keyboard.svg"}}),i("span",[t._v("Keyboard commands")])]),i("panelset-button",{attrs:{"panel-id":"table","current-panel":t.currentPanel,title:"Table view"}},[i("img",{attrs:{src:t.urls.static+"img/icons/view_list.svg"}}),i("span",[t._v("Table view")])]),i("panelset-button",{attrs:{"panel-id":"cite","current-panel":t.currentPanel,title:"Cite"}},[i("img",{attrs:{src:t.urls.static+"img/icons/school.svg"}}),i("span",[t._v("Cite graph")])]),i("panelset-button",{attrs:{"panel-id":"download","current-panel":t.currentPanel,title:"Download"}},[i("img",{attrs:{src:t.urls.static+"img/icons/download.svg"}}),i("span",[t._v("Download")])])],1)]):t._e(),i("div",{attrs:{id:"collapsePanels"}},[i("panelset-panel",{attrs:{"panel-id":"options","current-panel":t.currentPanel}},[i("h5",[t._v("Customize graph display")]),i("fieldset",{staticClass:"form-group",attrs:{"aria-describedby":"percentOrAbsHelpText"}},[i("p",{staticClass:"form-text",attrs:{id:"percentOrAbsHelpText"}},[t._v(" Show count as a percentage of all grams for the year, or an absolute number? ")]),i("div",{staticClass:"form-check form-check-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.percentOrAbs,expression:"percentOrAbs"}],staticClass:"form-check-input",attrs:{type:"radio",name:"percentOrAbs",id:"percentOrAbs1",value:"percent"},domProps:{checked:t._q(t.percentOrAbs,"percent")},on:{change:function(e){t.percentOrAbs="percent"}}}),i("label",{staticClass:"form-check-label",attrs:{for:"percentOrAbs1"}},[t._v("Percentage")])]),i("div",{staticClass:"form-check form-check-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.percentOrAbs,expression:"percentOrAbs"}],staticClass:"form-check-input",attrs:{type:"radio",name:"percentOrAbs",id:"percentOrAbs2",value:"absolute"},domProps:{checked:t._q(t.percentOrAbs,"absolute")},on:{change:function(e){t.percentOrAbs="absolute"}}}),i("label",{staticClass:"form-check-label",attrs:{for:"percentOrAbs2"}},[t._v("Absolute number")])])]),i("fieldset",{staticClass:"form-group",attrs:{"aria-describedby":"countTypeHelpText"}},[i("p",{staticClass:"form-text",attrs:{id:"countTypeHelpText"}},[t._v(" Show count of cases containing your term, or count of individual instances of your term? ")]),i("div",{staticClass:"form-check form-check-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.countType,expression:"countType"}],staticClass:"form-check-input",attrs:{type:"radio",name:"countType",id:"countType1",value:"doc_count"},domProps:{checked:t._q(t.countType,"doc_count")},on:{change:function(e){t.countType="doc_count"}}}),i("label",{staticClass:"form-check-label",attrs:{for:"countType1"}},[t._v("Case count")])]),i("div",{staticClass:"form-check form-check-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.countType,expression:"countType"}],staticClass:"form-check-input",attrs:{type:"radio",name:"countType",id:"countType2",value:"count"},domProps:{checked:t._q(t.countType,"count")},on:{change:function(e){t.countType="count"}}}),i("label",{staticClass:"form-check-label",attrs:{for:"countType2"}},[t._v("Instance count")])])]),i("fieldset",{staticClass:"form-group",attrs:{"aria-describedby":"sameYAxisHelpText"}},[i("p",{staticClass:"form-text",attrs:{id:"sameYAxisHelpText"}},[t._v(" Show all terms on the same Y axis (for comparing frequency) or scale each term to fill the Y axis (for comparing correlation)? ")]),i("div",{staticClass:"form-check form-check-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.sameYAxis,expression:"sameYAxis"}],staticClass:"form-check-input",attrs:{type:"radio",name:"sameYAxis",id:"sameYAxis1"},domProps:{value:!0,checked:t._q(t.sameYAxis,!0)},on:{change:function(e){t.sameYAxis=!0}}}),i("label",{staticClass:"form-check-label",attrs:{for:"sameYAxis1"}},[t._v("Terms on the same Y axis")])]),i("div",{staticClass:"form-check form-check-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.sameYAxis,expression:"sameYAxis"}],staticClass:"form-check-input",attrs:{type:"radio",name:"sameYAxis",id:"sameYAxis2"},domProps:{value:!1,checked:t._q(t.sameYAxis,!1)},on:{change:function(e){t.sameYAxis=!1}}}),i("label",{staticClass:"form-check-label",attrs:{for:"sameYAxis2"}},[t._v("Terms scaled to fill Y axis")])])]),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"formControlRange"}},[t._v("Smoothing")]),i("p",{staticClass:"form-text",attrs:{id:"smoothingFactorHelpText"}},[t.smoothingFactor>0?i("span",[t._v(" Data points will be averaged with the nearest "+t._s(t.smoothingFactor)+"% of other points. ")]):i("span",[t._v(" No smoothing will be applied. ")])]),i("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.smoothingFactor,expression:"smoothingFactor",modifiers:{lazy:!0}}],staticClass:"form-control-range",attrs:{type:"range",min:"0",max:"10",id:"formControlRange"},domProps:{value:t.smoothingFactor},on:{change:function(e){t.smoothingFactor=e.target.value}}})])]),i("panelset-panel",{attrs:{"panel-id":"keyboard","current-panel":t.currentPanel}},[i("h5",[t._v("Keyboard Commands")]),i("p",[t._v("The graph is keyboard accessible. With the graph selected, press:")]),i("ul",{staticClass:"bullets"},[i("li",[t._v("up and down arrows: select terms")]),i("li",[t._v("left and right arrows: select points")]),i("li",[t._v("space bar: enable or disable selected trend line")]),i("li",[t._v("enter key: search for example cases")]),i("li",[t._v(" Sounds: "),i("ul",{staticClass:"bullets"},[i("li",[t._v('"s" key: audio tones on/off')]),i("li",[t._v('"p" key: auto play audio tones')]),i("li",[t._v('"b" key: blues mode')])])])])]),i("panelset-panel",{attrs:{"panel-id":"table","current-panel":t.currentPanel}},[i("h5",[t._v("Table View")]),i("div",{staticClass:"table-responsive"},[i("table",{staticClass:"table table-sm"},[i("thead",[i("tr",[i("th",{attrs:{scope:"col"}},[t._v("Year")]),t._l(t.chartData.datasets,(function(e){return i("th",{attrs:{scope:"col"}},[t._v(t._s(e.label))])}))],2)]),i("tbody",t._l(t.chartData.labels,(function(e,n){return i("tr",[i("th",{attrs:{scope:"row"}},[t._v(t._s(e))]),t._l(t.chartData.datasets,(function(e,r){return i("td",[i("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.searchForPoint(r,n)}}},[t._v(t._s(t.formatValue(e.data[n])))])])}))],2)})),0)])])]),i("panelset-panel",{attrs:{"panel-id":"cite","current-panel":t.currentPanel}},[i("h5",[t._v("Scholarly Citation and Reuse")]),i("p",[t._v(" Version: Historical Trends dataset version "+t._s(t.datasetVersion)+", published "+t._s(t.datasetDate)+". ")]),i("p",[t._v("Graphs on this page may be freely reproduced with credit. Suggested citation formats:")]),i("dl",{staticClass:"row"},[i("dt",{staticClass:"col-sm-3"},[t._v("APA")]),i("dd",{staticClass:"col-sm-9"},[t._v(" \"Graph of '"+t._s(t.textToGraph)+",'\" by "+t._s(t.author)+", "+t._s(t.datasetYear)+", "+t._s(t.publication)+" v."+t._s(t.datasetVersion)+". Retrieved [date], from "+t._s(t.currentUrl)+". ")]),i("dt",{staticClass:"col-sm-3"},[t._v("MLA")]),i("dd",{staticClass:"col-sm-9"},[t._v("\"Graph of '"+t._s(t.textToGraph)+".'\" "),i("i",[t._v(t._s(t.publication)+" v."+t._s(t.datasetVersion))]),t._v(", "),t._v(t._s(t.author)+". "),t._v(t._s(t.datasetDate)+", "),t._v(t._s(t.currentUrl)+". "),t._v("Accessed [date]. ")]),i("dt",{staticClass:"col-sm-3"},[t._v("Chicago / Turabian")]),i("dd",{staticClass:"col-sm-9"},[t._v(' Graph of "'+t._s(t.textToGraph)+'." '+t._s(t.datasetYear)+". "+t._s(t.publication)+" v."+t._s(t.datasetVersion)+", "+t._s(t.author)+", Cambridge, MA. "+t._s(t.currentUrl)+". ")]),i("dt",{staticClass:"col-sm-3"},[t._v("Bluebook")]),i("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.author)+", "),i("i",[t._v(t._s(t.publication)+" v."+t._s(t.datasetVersion))]),t._v(', Graph of "'+t._s(t.textToGraph)+'," '+t._s(t.currentUrl)+" (last visited [date]).")])])]),i("panelset-panel",{attrs:{"panel-id":"download","current-panel":t.currentPanel}},[i("h5",[t._v("Download")]),i("ul",{staticClass:"bullets"},[i("li",[i("strong",[i("a",{attrs:{href:"#",download:"trends.png"},on:{click:t.imageDownloadClicked,contextmenu:t.imageDownloadClicked}},[t._v("Download as an image")])])]),i("li",[i("a",{attrs:{href:"#",download:"trends.csv"},on:{click:t.csvDownloadClicked,contextmenu:t.csvDownloadClicked}},[t._v("Download CSV")]),t._v(" (best for analyzing in Excel)")]),i("li",[i("a",{attrs:{href:"#",download:"trends.json"},on:{click:t.jsonDownloadClicked,contextmenu:t.jsonDownloadClicked}},[t._v("Download JSON")]),t._v(" (best for analyzing from a program)")])]),i("div",[i("p",{staticClass:"d-inline"},[t._v("View the API queries that generated this graph: ")]),i("ul",{staticClass:"inline-list"},t._l(t.currentApiQueries,(function(e,n){return i("li",[i("a",{attrs:{href:e[1],target:"_blank"}},[t._v(t._s(e[0]))]),n!==t.currentApiQueries.length-1?i("span",{attrs:{"aria-hidden":"true"}},[t._v(" / ")]):t._e()])})),0)])])],1),t._v(" "),i("div",{staticClass:"graph"},[i("div",{staticClass:"container graph-container",attrs:{tabindex:"0"},on:{keydown:t.chartKeyDown}},[i("line-example",{ref:"chart",attrs:{chartData:t.chartData,options:t.chartOptions,styles:t.chartStyles,"aria-label":"Graph of '"+t.textToGraph+"' between "+t.minYear+" and "+t.maxYear+". See table view for details.","aria-describedby":"tablePanelButton",role:"img"}}),i("div",{staticClass:"sr-only",attrs:{"aria-live":"assertive","aria-atomic":"true"}},[t._v(t._s(t.canvasStatus))])],1),t.chartData.datasets.length>0?i("div",{staticClass:"row zoom-row"},[i("div",{staticClass:"col-auto mr-2"},[t._v("years")]),i("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:t.minYear,expression:"minYear",modifiers:{lazy:!0,number:!0}}],staticClass:"col-auto",attrs:{id:"min-year","aria-label":"start year",type:"number",min:"1640",max:"2018"},domProps:{value:t.minYear},on:{change:function(e){t.minYear=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),i("vue-slider",{staticClass:"col mr-3",attrs:{"enable-cross":!1,min:t.minPossible,max:t.maxPossible},model:{value:t.yearSlider,callback:function(e){t.yearSlider=e},expression:"yearSlider"}}),i("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:t.maxYear,expression:"maxYear",modifiers:{lazy:!0,number:!0}}],staticClass:"col-auto",attrs:{id:"max-year","aria-label":"end year",type:"number",min:"1640",max:"2018"},domProps:{value:t.maxYear},on:{change:function(e){t.maxYear=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}})],1):t._e()]),i("search-results",{ref:"searchResults",attrs:{urls:t.urls}}),t.screenshotReady?i("div",{attrs:{id:"screenshot-ready"}}):t._e()],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-title"},[i("h1",[t._v("Historical Trends")]),i("p",[t._v(" The "),i("a",{attrs:{href:"/"}},[t._v("Caselaw Access Project")]),t._v(" includes over 6 million U.S. legal cases from the Harvard Law School Library  about 12 billion words in all. Our Historical Trends tool graphs the frequency of words and phrases through time, similar to the Google Ngram Viewer. ")])])}],s=(i("862d"),i("0b89"),i("4894"),i("22f4"),i("b902"),i("f1c6"),i("966c"),i("c770"),i("581e"),i("5e5b"),i("46c0"),i("657c"),i("7e9e"),i("eae2"),i("cd24"),i("494a"),i("241c"),i("c8f2"),i("32ec"),i("f542"),i("758b"),i("e0d3"),i("5a85"),i("cbcf"),i("5f99"),i("6991"),i("4a00"),i("534d"),i("e124"),i("e82c")),l=i("2e1a"),u=i("0a99"),c=i("b5d1"),h=i("4c98"),p=i("2282");function d(t){return Object(u["a"])(t)||Object(c["a"])(t)||Object(h["a"])(t)||Object(p["a"])()}var f=i("68d6"),m=i("57d2"),y=i("4b68"),v=i.n(y),g=i("4428"),_=i.n(g),b=i("8df7"),T=i.n(b),S=i("1a7f");S["a"].TimeBase=function(t,e){if(!(this instanceof S["a"].TimeBase))return new S["a"].TimeBase(t,e);if(this._val=t,this._units=e,S["a"].isUndef(this._units)&&S["a"].isString(this._val)&&parseFloat(this._val)==this._val&&"+"!==this._val.charAt(0))this._val=parseFloat(this._val),this._units=this._defaultUnits;else if(t&&t.constructor===this.constructor)this._val=t._val,this._units=t._units;else if(t instanceof S["a"].TimeBase)switch(this._defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break;default:throw new Error("Unrecognized default units "+this._defaultUnits)}},S["a"].extend(S["a"].TimeBase),S["a"].TimeBase.prototype._expressions={n:{regexp:/^(\d+)n(\.?)$/i,method:function(t,e){t=parseInt(t);var i="."===e?1.5:1;return 1===t?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/t)*i}},t:{regexp:/^(\d+)t$/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\d+)m$/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._getTimeSignature())}},i:{regexp:/^(\d+)i$/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz$/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/,method:function(t,e,i){var n=0;return t&&"0"!==t&&(n+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(n+=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(n+=this._beatsToUnits(parseFloat(i)/4)),n}},s:{regexp:/^(\d+(?:\.\d+)?)s$/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\d+)samples$/,method:function(t){return parseInt(t)/this.context.sampleRate}},default:{regexp:/^(\d+(?:\.\d+)?)$/,method:function(t){return this._expressions[this._defaultUnits].method.call(this,t)}}},S["a"].TimeBase.prototype._defaultUnits="s",S["a"].TimeBase.prototype._getBpm=function(){return S["a"].Transport?S["a"].Transport.bpm.value:120},S["a"].TimeBase.prototype._getTimeSignature=function(){return S["a"].Transport?S["a"].Transport.timeSignature:4},S["a"].TimeBase.prototype._getPPQ=function(){return S["a"].Transport?S["a"].Transport.PPQ:192},S["a"].TimeBase.prototype._now=function(){return this.now()},S["a"].TimeBase.prototype._frequencyToUnits=function(t){return 1/t},S["a"].TimeBase.prototype._beatsToUnits=function(t){return 60/this._getBpm()*t},S["a"].TimeBase.prototype._secondsToUnits=function(t){return t},S["a"].TimeBase.prototype._ticksToUnits=function(t){return t*(this._beatsToUnits(1)/this._getPPQ())},S["a"].TimeBase.prototype._noArg=function(){return this._now()},S["a"].TimeBase.prototype.valueOf=function(){if(S["a"].isUndef(this._val))return this._noArg();if(S["a"].isString(this._val)&&S["a"].isUndef(this._units)){for(var t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(S["a"].isObject(this._val)){var e=0;for(var i in this._val){var n=this._val[i],r=new this.constructor(i).valueOf()*n;e+=r}return e}if(S["a"].isDefined(this._units)){var a=this._expressions[this._units],o=this._val.toString().trim().match(a.regexp);return o?a.method.apply(this,o.slice(1)):a.method.call(this,parseFloat(this._val))}return this._val},S["a"].TimeBase.prototype.toSeconds=function(){return this.valueOf()},S["a"].TimeBase.prototype.toFrequency=function(){return 1/this.toSeconds()},S["a"].TimeBase.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},S["a"].TimeBase.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},S["a"].TimeBase.prototype.dispose=function(){this._val=null,this._units=null};S["a"].TimeBase;S["a"].Frequency=function(t,e){if(!(this instanceof S["a"].Frequency))return new S["a"].Frequency(t,e);S["a"].TimeBase.call(this,t,e)},S["a"].extend(S["a"].Frequency,S["a"].TimeBase),S["a"].Frequency.prototype._expressions=Object.assign({},S["a"].TimeBase.prototype._expressions,{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return"midi"===this._defaultUnits?t:S["a"].Frequency.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,e){var i=O[t.toLowerCase()],n=i+12*(parseInt(e)+1);return"midi"===this._defaultUnits?n:S["a"].Frequency.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,i){var n=1;return t&&"0"!==t&&(n*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(n*=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(n*=this._beatsToUnits(parseFloat(i)/4)),n}}}),S["a"].Frequency.prototype.transpose=function(t){return new this.constructor(this.valueOf()*S["a"].intervalToFrequencyRatio(t))},S["a"].Frequency.prototype.harmonize=function(t){return t.map(function(t){return this.transpose(t)}.bind(this))},S["a"].Frequency.prototype.toMidi=function(){return S["a"].Frequency.ftom(this.valueOf())},S["a"].Frequency.prototype.toNote=function(){var t=this.toFrequency(),e=Math.log2(t/S["a"].Frequency.A4),i=Math.round(12*e)+57,n=Math.floor(i/12);n<0&&(i+=-12*n);var r=k[i%12];return r+n.toString()},S["a"].Frequency.prototype.toSeconds=function(){return 1/S["a"].TimeBase.prototype.toSeconds.call(this)},S["a"].Frequency.prototype.toFrequency=function(){return S["a"].TimeBase.prototype.toFrequency.call(this)},S["a"].Frequency.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*S["a"].Transport.PPQ)},S["a"].Frequency.prototype._noArg=function(){return 0},S["a"].Frequency.prototype._frequencyToUnits=function(t){return t},S["a"].Frequency.prototype._ticksToUnits=function(t){return 1/(60*t/(S["a"].Transport.bpm.value*S["a"].Transport.PPQ))},S["a"].Frequency.prototype._beatsToUnits=function(t){return 1/S["a"].TimeBase.prototype._beatsToUnits.call(this,t)},S["a"].Frequency.prototype._secondsToUnits=function(t){return 1/t},S["a"].Frequency.prototype._defaultUnits="hz";var O={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},k=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];S["a"].Frequency.A4=440,S["a"].Frequency.mtof=function(t){return S["a"].Frequency.A4*Math.pow(2,(t-69)/12)},S["a"].Frequency.ftom=function(t){return 69+Math.round(12*Math.log2(t/S["a"].Frequency.A4))};S["a"].Frequency;S["a"].Time=function(t,e){if(!(this instanceof S["a"].Time))return new S["a"].Time(t,e);S["a"].TimeBase.call(this,t,e)},S["a"].extend(S["a"].Time,S["a"].TimeBase),S["a"].Time.prototype._expressions=Object.assign({},S["a"].TimeBase.prototype._expressions,{quantize:{regexp:/^@(.+)/,method:function(t){if(S["a"].Transport){var e=new this.constructor(t);return this._secondsToUnits(S["a"].Transport.nextSubdivision(e))}return 0}},now:{regexp:/^\+(.+)/,method:function(t){return this._now()+new this.constructor(t)}}}),S["a"].Time.prototype.quantize=function(t,e){e=S["a"].defaultArg(e,1);var i=new this.constructor(t),n=this.valueOf(),r=Math.round(n/i),a=r*i,o=a-n;return n+o*e},S["a"].Time.prototype.toNotation=function(){for(var t=this.toSeconds(),e=["1m"],i=1;i<8;i++){var n=Math.pow(2,i);e.push(n+"n."),e.push(n+"n"),e.push(n+"t")}e.push("0");var r=e[0],a=S["a"].Time(e[0]).toSeconds();return e.forEach((function(e){var i=S["a"].Time(e).toSeconds();Math.abs(i-t)<Math.abs(a-t)&&(r=e,a=i)})),r},S["a"].Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var i=Math.floor(e/this._getTimeSignature()),n=e%1*4;e=Math.floor(e)%this._getTimeSignature(),n=n.toString(),n.length>3&&(n=parseFloat(parseFloat(n).toFixed(3)));var r=[i,e,n];return r.join(":")},S["a"].Time.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())},S["a"].Time.prototype.toSeconds=function(){return this.valueOf()},S["a"].Time.prototype.toMidi=function(){return S["a"].Frequency.ftom(this.toFrequency())};S["a"].Time;S["a"].TransportTime=function(t,e){if(!(this instanceof S["a"].TransportTime))return new S["a"].TransportTime(t,e);S["a"].Time.call(this,t,e)},S["a"].extend(S["a"].TransportTime,S["a"].Time),S["a"].TransportTime.prototype._now=function(){return S["a"].Transport.seconds};S["a"].TransportTime;S["a"].Emitter=function(){S["a"].call(this),this._events={}},S["a"].extend(S["a"].Emitter),S["a"].Emitter.prototype.on=function(t,e){for(var i=t.split(/\W+/),n=0;n<i.length;n++){var r=i[n];this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(e)}return this},S["a"].Emitter.prototype.once=function(t,e){var i=function(){e.apply(this,arguments),this.off(t,i)}.bind(this);return this.on(t,i),this},S["a"].Emitter.prototype.off=function(t,e){for(var i=t.split(/\W+/),n=0;n<i.length;n++)if(t=i[n],this._events.hasOwnProperty(t))if(S["a"].isUndef(e))this._events[t]=[];else for(var r=this._events[t],a=0;a<r.length;a++)r[a]===e&&r.splice(a,1);return this},S["a"].Emitter.prototype.emit=function(t){if(this._events){var e=Array.apply(null,arguments).slice(1);if(this._events.hasOwnProperty(t))for(var i=this._events[t].slice(0),n=0,r=i.length;n<r;n++)i[n].apply(this,e)}return this},S["a"].Emitter.mixin=function(t){var e=["on","once","off","emit"];t._events={};for(var i=0;i<e.length;i++){var n=e[i],r=S["a"].Emitter.prototype[n];t[n]=r}return S["a"].Emitter},S["a"].Emitter.prototype.dispose=function(){return S["a"].prototype.dispose.call(this),this._events=null,this};S["a"].Emitter;S["a"].Timeline=function(){var t=S["a"].defaults(arguments,["memory"],S["a"].Timeline);S["a"].call(this),this._timeline=[],this.memory=t.memory},S["a"].extend(S["a"].Timeline),S["a"].Timeline.defaults={memory:1/0},Object.defineProperty(S["a"].Timeline.prototype,"length",{get:function(){return this._timeline.length}}),S["a"].Timeline.prototype.add=function(t){if(S["a"].isUndef(t.time))throw new Error("Tone.Timeline: events must have a time attribute");t.time=t.time.valueOf();var e=this._search(t.time);if(this._timeline.splice(e+1,0,t),this.length>this.memory){var i=this.length-this.memory;this._timeline.splice(0,i)}return this},S["a"].Timeline.prototype.remove=function(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this},S["a"].Timeline.prototype.get=function(t,e){e=S["a"].defaultArg(e,"time");var i=this._search(t,e);return-1!==i?this._timeline[i]:null},S["a"].Timeline.prototype.peek=function(){return this._timeline[0]},S["a"].Timeline.prototype.shift=function(){return this._timeline.shift()},S["a"].Timeline.prototype.getAfter=function(t,e){e=S["a"].defaultArg(e,"time");var i=this._search(t,e);return i+1<this._timeline.length?this._timeline[i+1]:null},S["a"].Timeline.prototype.getBefore=function(t,e){e=S["a"].defaultArg(e,"time");var i=this._timeline.length;if(i>0&&this._timeline[i-1][e]<t)return this._timeline[i-1];var n=this._search(t,e);return n-1>=0?this._timeline[n-1]:null},S["a"].Timeline.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var i=e;i>=0;i--){if(this._timeline[i].time!==t)break;e=i}this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},S["a"].Timeline.prototype.cancelBefore=function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this},S["a"].Timeline.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null},S["a"].Timeline.prototype._search=function(t,e){if(0===this._timeline.length)return-1;e=S["a"].defaultArg(e,"time");var i=0,n=this._timeline.length,r=n;if(n>0&&this._timeline[n-1][e]<=t)return n-1;while(i<r){var a=Math.floor(i+(r-i)/2),o=this._timeline[a],s=this._timeline[a+1];if(o[e]===t){for(var l=a;l<this._timeline.length;l++){var u=this._timeline[l];u[e]===t&&(a=l)}return a}if(o[e]<t&&s[e]>t)return a;o[e]>t?r=a:i=a+1}return-1},S["a"].Timeline.prototype._iterate=function(t,e,i){e=S["a"].defaultArg(e,0),i=S["a"].defaultArg(i,this._timeline.length-1),this._timeline.slice(e,i+1).forEach(function(e){t.call(this,e)}.bind(this))},S["a"].Timeline.prototype.forEach=function(t){return this._iterate(t),this},S["a"].Timeline.prototype.forEachBefore=function(t,e){var i=this._search(t);return-1!==i&&this._iterate(e,0,i),this},S["a"].Timeline.prototype.forEachAfter=function(t,e){var i=this._search(t);return this._iterate(e,i+1),this},S["a"].Timeline.prototype.forEachBetween=function(t,e,i){var n=this._search(t),r=this._search(e);return-1!==n&&-1!==r?(this._timeline[n].time!==t&&(n+=1),this._timeline[r].time===e&&(r-=1),this._iterate(i,n,r)):-1===n&&this._iterate(i,0,r),this},S["a"].Timeline.prototype.forEachFrom=function(t,e){var i=this._search(t);while(i>=0&&this._timeline[i].time>=t)i--;return this._iterate(e,i+1),this},S["a"].Timeline.prototype.forEachAtTime=function(t,e){var i=this._search(t);return-1!==i&&this._iterate((function(i){i.time===t&&e.call(this,i)}),0,i),this},S["a"].Timeline.prototype.dispose=function(){return S["a"].prototype.dispose.call(this),this._timeline=null,this};S["a"].Timeline;if(S["a"].supported){!S["a"].global.hasOwnProperty("OfflineAudioContext")&&S["a"].global.hasOwnProperty("webkitOfflineAudioContext")&&(S["a"].global.OfflineAudioContext=S["a"].global.webkitOfflineAudioContext);var x=new OfflineAudioContext(1,1,44100),w=x.startRendering();w&&S["a"].isFunction(w.then)||(OfflineAudioContext.prototype._native_startRendering=OfflineAudioContext.prototype.startRendering,OfflineAudioContext.prototype.startRendering=function(){return new Promise(function(t){this.oncomplete=function(e){t(e.renderedBuffer)},this._native_startRendering()}.bind(this))})}if(S["a"].supported){!S["a"].global.hasOwnProperty("AudioContext")&&S["a"].global.hasOwnProperty("webkitAudioContext")&&(S["a"].global.AudioContext=S["a"].global.webkitAudioContext),AudioContext.prototype.close||(AudioContext.prototype.close=function(){return S["a"].isFunction(this.suspend)&&this.suspend(),Promise.resolve()}),AudioContext.prototype.resume||(AudioContext.prototype.resume=function(){var t=this.createBuffer(1,1,this.sampleRate),e=this.createBufferSource();return e.buffer=t,e.connect(this.destination),e.start(0),Promise.resolve()}),!AudioContext.prototype.createGain&&AudioContext.prototype.createGainNode&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),!AudioContext.prototype.createDelay&&AudioContext.prototype.createDelayNode&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode);var A=!1,P=new OfflineAudioContext(1,1,44100),C=new Uint32Array([1179011410,48,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,8,0,0,0,0]).buffer;try{var E=P.decodeAudioData(C);E&&S["a"].isFunction(E.then)&&(A=!0)}catch(Rt){A=!1}A||(AudioContext.prototype._native_decodeAudioData=AudioContext.prototype.decodeAudioData,AudioContext.prototype.decodeAudioData=function(t){return new Promise(function(e,i){this._native_decodeAudioData(t,e,i)}.bind(this))})}var j=["baseLatency","destination","currentTime","sampleRate","listener","state"],M=["suspend","close","resume","getOutputTimestamp","createMediaElementSource","createMediaStreamSource","createMediaStreamDestination","createBuffer","decodeAudioData","createBufferSource","createConstantSource","createGain","createDelay","createBiquadFilter","createIIRFilter","createWaveShaper","createPanner","createConvolver","createDynamicsCompressor","createAnalyser","createScriptProcessor","createStereoPanner","createOscillator","createPeriodicWave","createChannelSplitter","createChannelMerger","audioWorklet"];S["a"].Context=function(){S["a"].Emitter.call(this);var t=S["a"].defaults(arguments,["context"],S["a"].Context);if(!t.context&&(t.context=new S["a"].global.AudioContext,!t.context))throw new Error("could not create AudioContext. Possibly too many AudioContexts running already.");this._context=t.context;while(this._context.rawContext)this._context=this._context.rawContext;j.forEach(function(t){this._defineProperty(this._context,t)}.bind(this)),M.forEach(function(t){this._defineMethod(this._context,t)}.bind(this)),this._latencyHint=t.latencyHint,this._constants={},this.lookAhead=t.lookAhead,this._computedUpdateInterval=0,this._ticker=new R(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this._timeouts=new S["a"].Timeline,this._timeoutIds=0,this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=function(t){this.emit("statechange",t)}.bind(this)},S["a"].extend(S["a"].Context,S["a"].Emitter),S["a"].Emitter.mixin(S["a"].Context),S["a"].Context.defaults={clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.03},S["a"].Context.prototype.isContext=!0,S["a"].Context.prototype._defineProperty=function(t,e){S["a"].isUndef(this[e])&&Object.defineProperty(this,e,{get:function(){return t[e]},set:function(i){t[e]=i}})},S["a"].Context.prototype._defineMethod=function(t,e){S["a"].isUndef(this[e])&&Object.defineProperty(this,e,{get:function(){return t[e].bind(t)}})},S["a"].Context.prototype.now=function(){return this._context.currentTime+this.lookAhead},Object.defineProperty(S["a"].Context.prototype,"destination",{get:function(){return this.master?this.master:this._context.destination}}),S["a"].Context.prototype.resume=function(){return"suspended"===this._context.state&&this._context instanceof AudioContext?this._context.resume():Promise.resolve()},S["a"].Context.prototype.close=function(){var t=Promise.resolve();return this!==S["a"].global.TONE_AUDIO_CONTEXT&&(t=this.rawContext.close()),t.then(function(){S["a"].Context.emit("close",this)}.bind(this))},S["a"].Context.prototype.getConstant=function(t){if(this._constants[t])return this._constants[t];for(var e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0),n=0;n<i.length;n++)i[n]=t;var r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants[t]=r,r},S["a"].Context.prototype._timeoutLoop=function(){var t=this.now();while(this._timeouts&&this._timeouts.length&&this._timeouts.peek().time<=t)this._timeouts.shift().callback()},S["a"].Context.prototype.setTimeout=function(t,e){this._timeoutIds++;var i=this.now();return this._timeouts.add({callback:t,time:i+e,id:this._timeoutIds}),this._timeoutIds},S["a"].Context.prototype.clearTimeout=function(t){return this._timeouts.forEach((function(e){e.id===t&&this.remove(e)})),this},Object.defineProperty(S["a"].Context.prototype,"updateInterval",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t}}),Object.defineProperty(S["a"].Context.prototype,"rawContext",{get:function(){return this._context}}),Object.defineProperty(S["a"].Context.prototype,"clockSource",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t}}),Object.defineProperty(S["a"].Context.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(t){var e=t;if(this._latencyHint=t,S["a"].isString(t))switch(t){case"interactive":e=.1,this._context.latencyHint=t;break;case"playback":e=.8,this._context.latencyHint=t;break;case"balanced":e=.25,this._context.latencyHint=t;break;case"fastest":this._context.latencyHint="interactive",e=.01;break}this.lookAhead=e,this.updateInterval=e/3}}),S["a"].Context.prototype.dispose=function(){return this.close().then(function(){for(var t in S["a"].Emitter.prototype.dispose.call(this),this._ticker.dispose(),this._ticker=null,this._timeouts.dispose(),this._timeouts=null,this._constants)this._constants[t].disconnect();this._constants=null}.bind(this))};var R=function(t,e,i){this._type=e,this._updateInterval=i,this._callback=S["a"].defaultArg(t,S["a"].noOp),this._createClock()};if(R.Type={Worker:"worker",Timeout:"timeout",Offline:"offline"},R.prototype._createWorker=function(){S["a"].global.URL=S["a"].global.URL||S["a"].global.webkitURL;var t=new Blob(["var timeoutTime = "+(1e3*this._updateInterval).toFixed(1)+";self.onmessage = function(msg){\ttimeoutTime = parseInt(msg.data);};function tick(){\tsetTimeout(tick, timeoutTime);\tself.postMessage('tick');}tick();"]),e=URL.createObjectURL(t),i=new Worker(e);i.onmessage=this._callback.bind(this),this._worker=i},R.prototype._createTimeout=function(){this._timeout=setTimeout(function(){this._createTimeout(),this._callback()}.bind(this),1e3*this._updateInterval)},R.prototype._createClock=function(){if(this._type===R.Type.Worker)try{this._createWorker()}catch(Rt){this._type=R.Type.Timeout,this._createClock()}else this._type===R.Type.Timeout&&this._createTimeout()},Object.defineProperty(R.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),this._type===R.Type.Worker&&this._worker.postMessage(Math.max(1e3*t,1))}}),Object.defineProperty(R.prototype,"type",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()}}),R.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._worker&&(this._worker.terminate(),this._worker.onmessage=null,this._worker=null)},R.prototype.dispose=function(){this._disposeClock(),this._callback=null},S["a"].supported&&!S["a"].initialized){if(S["a"].global.TONE_AUDIO_CONTEXT||(S["a"].global.TONE_AUDIO_CONTEXT=new S["a"].Context),S["a"].context=S["a"].global.TONE_AUDIO_CONTEXT,!S["a"].global.TONE_SILENCE_LOGGING){var D="v";"dev"===S["a"].version&&(D="");var I=" * Tone.js "+D+S["a"].version+" * ";console.log("%c"+I,"background: #000; color: #fff")}}else S["a"].supported||S["a"].global.TONE_SILENCE_LOGGING||console.warn("This browser does not support Tone.js");S["a"].Context;S["a"].Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Gain:"gain",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},S["a"].prototype.toSeconds=function(t){return S["a"].isNumber(t)?t:S["a"].isUndef(t)?this.now():S["a"].isString(t)||S["a"].isObject(t)?new S["a"].Time(t).toSeconds():t instanceof S["a"].TimeBase?t.toSeconds():void 0},S["a"].prototype.toFrequency=function(t){return S["a"].isNumber(t)?t:S["a"].isString(t)||S["a"].isUndef(t)||S["a"].isObject(t)?new S["a"].Frequency(t).valueOf():t instanceof S["a"].TimeBase?t.toFrequency():void 0},S["a"].prototype.toTicks=function(t){return S["a"].isNumber(t)||S["a"].isString(t)||S["a"].isObject(t)?new S["a"].TransportTime(t).toTicks():S["a"].isUndef(t)?S["a"].Transport.ticks:t instanceof S["a"].TimeBase?t.toTicks():void 0};S["a"];if(S["a"].supported){var q=new OfflineAudioContext(2,1,44100),N=q.createGain(),B=q.createGain();if(N.connect(B)!==B){var V=AudioNode.prototype.connect;AudioNode.prototype.connect=function(){return V.apply(this,arguments),arguments[0]}}}S["a"].AudioNode=function(){S["a"].call(this);var t=S["a"].defaults(arguments,["context"],{context:S["a"].context});this._context=t.context},S["a"].extend(S["a"].AudioNode),Object.defineProperty(S["a"].AudioNode.prototype,"context",{get:function(){return this._context}}),S["a"].AudioNode.prototype.createInsOuts=function(t,e){1===t?this.input=this.context.createGain():t>1&&(this.input=new Array(t)),1===e?this.output=this.context.createGain():e>1&&(this.output=new Array(e))},Object.defineProperty(S["a"].AudioNode.prototype,"channelCount",{get:function(){return this.output.channelCount},set:function(t){return this.output.channelCount=t}}),Object.defineProperty(S["a"].AudioNode.prototype,"channelCountMode",{get:function(){return this.output.channelCountMode},set:function(t){return this.output.channelCountMode=t}}),Object.defineProperty(S["a"].AudioNode.prototype,"channelInterpretation",{get:function(){return this.output.channelInterpretation},set:function(t){return this.output.channelInterpretation=t}}),Object.defineProperty(S["a"].AudioNode.prototype,"numberOfInputs",{get:function(){return this.input?S["a"].isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(S["a"].AudioNode.prototype,"numberOfOutputs",{get:function(){return this.output?S["a"].isArray(this.output)?this.output.length:1:0}}),S["a"].AudioNode.prototype.connect=function(t,e,i){return S["a"].isArray(this.output)?(e=S["a"].defaultArg(e,0),this.output[e].connect(t,0,i)):S["a"].connect(this.output,t,e,i),this},S["a"].AudioNode.prototype.disconnect=function(t,e,i){return S["a"].isArray(this.output)?(e=S["a"].defaultArg(e,0),this.output[e].disconnect(t,0,i)):S["a"].disconnect(this.output,t,e,i),this},S["a"].AudioNode.prototype.chain=function(){var t=Array.from(arguments);return t.unshift(this),S["a"].connectSeries.apply(void 0,t),this},S["a"].AudioNode.prototype.fan=function(){for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},S["a"].AudioNode.prototype.dispose=function(){return S["a"].isDefined(this.input)&&(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),S["a"].isDefined(this.output)&&(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this._context=null,this};S["a"].AudioNode;S["a"].Param=function(){var t=S["a"].defaults(arguments,["param","units","convert"],S["a"].Param);S["a"].AudioNode.call(this,t),this._param=this.input=t.param,this.units=t.units,this.convert=t.convert,this.overridden=!1,this._events=new S["a"].Timeline(1e3),S["a"].isDefined(t.value)&&this._param&&this.setValueAtTime(t.value,0)},S["a"].extend(S["a"].Param,S["a"].AudioNode),S["a"].Param.defaults={units:S["a"].Type.Default,convert:!0,param:void 0},Object.defineProperty(S["a"].Param.prototype,"value",{get:function(){var t=this.now();return this._toUnits(this.getValueAtTime(t))},set:function(t){this._initialValue=this._fromUnits(t),this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}}),Object.defineProperty(S["a"].Param.prototype,"minValue",{get:function(){return this.units===S["a"].Type.Time||this.units===S["a"].Type.Frequency||this.units===S["a"].Type.NormalRange||this.units===S["a"].Type.Positive||this.units===S["a"].Type.BPM?0:this.units===S["a"].Type.AudioRange?-1:this.units===S["a"].Type.Decibels?-1/0:this._param.minValue}}),Object.defineProperty(S["a"].Param.prototype,"maxValue",{get:function(){return this.units===S["a"].Type.NormalRange||this.units===S["a"].Type.AudioRange?1:this._param.maxValue}}),S["a"].Param.prototype._fromUnits=function(t){if(!this.convert&&!S["a"].isUndef(this.convert)||this.overridden)return t;switch(this.units){case S["a"].Type.Time:return this.toSeconds(t);case S["a"].Type.Frequency:return this.toFrequency(t);case S["a"].Type.Decibels:return S["a"].dbToGain(t);case S["a"].Type.NormalRange:return Math.min(Math.max(t,0),1);case S["a"].Type.AudioRange:return Math.min(Math.max(t,-1),1);case S["a"].Type.Positive:return Math.max(t,0);default:return t}},S["a"].Param.prototype._toUnits=function(t){if(!this.convert&&!S["a"].isUndef(this.convert))return t;switch(this.units){case S["a"].Type.Decibels:return S["a"].gainToDb(t);default:return t}},S["a"].Param.prototype._minOutput=1e-5,S["a"].Param.AutomationType={Linear:"linearRampToValueAtTime",Exponential:"exponentialRampToValueAtTime",Target:"setTargetAtTime",SetValue:"setValueAtTime",Cancel:"cancelScheduledValues"},S["a"].Param.prototype.setValueAtTime=function(t,e){return e=this.toSeconds(e),t=this._fromUnits(t),this._events.add({type:S["a"].Param.AutomationType.SetValue,value:t,time:e}),this.log(S["a"].Param.AutomationType.SetValue,t,e),this._param.setValueAtTime(t,e),this},S["a"].Param.prototype.getValueAtTime=function(t){t=this.toSeconds(t);var e=this._events.getAfter(t),i=this._events.get(t),n=S["a"].defaultArg(this._initialValue,this._param.defaultValue),r=n;if(null===i)r=n;else if(i.type===S["a"].Param.AutomationType.Target){var a,o=this._events.getBefore(i.time);a=null===o?n:o.value,r=this._exponentialApproach(i.time,a,i.value,i.constant,t)}else r=null===e?i.value:e.type===S["a"].Param.AutomationType.Linear?this._linearInterpolate(i.time,i.value,e.time,e.value,t):e.type===S["a"].Param.AutomationType.Exponential?this._exponentialInterpolate(i.time,i.value,e.time,e.value,t):i.value;return r},S["a"].Param.prototype.setRampPoint=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===e&&(e=this._minOutput),this.setValueAtTime(this._toUnits(e),t),this},S["a"].Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),e=this.toSeconds(e),this._events.add({type:S["a"].Param.AutomationType.Linear,value:t,time:e}),this.log(S["a"].Param.AutomationType.Linear,t,e),this._param.linearRampToValueAtTime(t,e),this},S["a"].Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),e=this.toSeconds(e),this._events.add({type:S["a"].Param.AutomationType.Exponential,time:e,value:t}),this.log(S["a"].Param.AutomationType.Exponential,t,e),this._param.exponentialRampToValueAtTime(t,e),this},S["a"].Param.prototype.exponentialRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},S["a"].Param.prototype.linearRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},S["a"].Param.prototype.targetRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(t,i,e),this},S["a"].Param.prototype.exponentialApproachValueAtTime=function(t,e,i){var n=Math.log(this.toSeconds(i)+1)/Math.log(200);return e=this.toSeconds(e),this.setTargetAtTime(t,e,n),this.cancelAndHoldAtTime(e+.9*i),this.linearRampToValueAtTime(t,e+i),this},S["a"].Param.prototype.setTargetAtTime=function(t,e,i){if(t=this._fromUnits(t),i<=0)throw new Error("timeConstant must be greater than 0");return e=this.toSeconds(e),this._events.add({type:S["a"].Param.AutomationType.Target,value:t,time:e,constant:i}),this.log(S["a"].Param.AutomationType.Target,t,e,i),this._param.setTargetAtTime(t,e,i),this},S["a"].Param.prototype.setValueCurveAtTime=function(t,e,i,n){n=S["a"].defaultArg(n,1),i=this.toSeconds(i),e=this.toSeconds(e),this.setValueAtTime(t[0]*n,e);for(var r=i/(t.length-1),a=1;a<t.length;a++)this.linearRampToValueAtTime(t[a]*n,e+a*r);return this},S["a"].Param.prototype.cancelScheduledValues=function(t){return t=this.toSeconds(t),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(S["a"].Param.AutomationType.Cancel,t),this},S["a"].Param.prototype.cancelAndHoldAtTime=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);this.log("cancelAndHoldAtTime",t,"value="+e),this._param.cancelScheduledValues(t);var i=this._events.get(t),n=this._events.getAfter(t);return i&&i.time===t?n?this._events.cancel(n.time):this._events.cancel(t+this.sampleTime):n&&(this._events.cancel(n.time),n.type===S["a"].Param.AutomationType.Linear?this.linearRampToValueAtTime(e,t):n.type===S["a"].Param.AutomationType.Exponential&&this.exponentialRampToValueAtTime(e,t)),this._events.add({type:S["a"].Param.AutomationType.SetValue,value:e,time:t}),this._param.setValueAtTime(e,t),this},S["a"].Param.prototype.rampTo=function(t,e,i){return e=S["a"].defaultArg(e,.1),this.units===S["a"].Type.Frequency||this.units===S["a"].Type.BPM||this.units===S["a"].Type.Decibels?this.exponentialRampTo(t,e,i):this.linearRampTo(t,e,i),this},S["a"].Param.prototype._exponentialApproach=function(t,e,i,n,r){return i+(e-i)*Math.exp(-(r-t)/n)},S["a"].Param.prototype._linearInterpolate=function(t,e,i,n,r){return e+(r-t)/(i-t)*(n-e)},S["a"].Param.prototype._exponentialInterpolate=function(t,e,i,n,r){return e*Math.pow(n/e,(r-t)/(i-t))},S["a"].Param.prototype.dispose=function(){return S["a"].AudioNode.prototype.dispose.call(this),this._param=null,this._events=null,this};S["a"].Param;S["a"].SignalBase=function(){S["a"].AudioNode.call(this)},S["a"].extend(S["a"].SignalBase,S["a"].AudioNode),S["a"].SignalBase.prototype.connect=function(t,e,i){return S["a"].Signal&&S["a"].Signal===t.constructor||S["a"].Param&&S["a"].Param===t.constructor?(t._param.cancelScheduledValues(0),t._param.setValueAtTime(0,0),t.overridden=!0):t instanceof AudioParam&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0)),S["a"].AudioNode.prototype.connect.call(this,t,e,i),this};S["a"].SignalBase;S["a"].Gain=function(){var t=S["a"].defaults(arguments,["gain","units"],S["a"].Gain);S["a"].AudioNode.call(this,t),this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new S["a"].Param({param:this._gainNode.gain,units:t.units,value:t.gain,convert:t.convert}),this._readOnly("gain")},S["a"].extend(S["a"].Gain,S["a"].AudioNode),S["a"].Gain.defaults={gain:1,convert:!0},S["a"].Gain.prototype.dispose=function(){S["a"].AudioNode.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null};S["a"].Gain;if(S["a"].supported&&!S["a"].global.AudioContext.prototype.createConstantSource){var F=function(t){this.context=t;for(var e=t.createBuffer(1,128,t.sampleRate),i=e.getChannelData(0),n=0;n<i.length;n++)i[n]=1;this._bufferSource=t.createBufferSource(),this._bufferSource.channelCount=1,this._bufferSource.channelCountMode="explicit",this._bufferSource.buffer=e,this._bufferSource.loop=!0;var r=this._output=t.createGain();this.offset=r.gain,this._bufferSource.connect(r)};F.prototype.start=function(t){return this._bufferSource.start(t),this},F.prototype.stop=function(t){return this._bufferSource.stop(t),this},F.prototype.connect=function(){return this._output.connect.apply(this._output,arguments),this},F.prototype.disconnect=function(){return this._output.disconnect.apply(this._output,arguments),this},AudioContext.prototype.createConstantSource=function(){return new F(this)},S["a"].Context.prototype.createConstantSource=function(){return new F(this)}}S["a"].Signal=function(){var t=S["a"].defaults(arguments,["value","units"],S["a"].Signal);S["a"].Param.call(this,t),this._constantSource=this.context.createConstantSource(),this._constantSource.start(0),this._param=this._constantSource.offset,this.value=t.value,this.output=this._constantSource,this.input=this._param=this.output.offset},S["a"].extend(S["a"].Signal,S["a"].Param),S["a"].Signal.defaults={value:0,units:S["a"].Type.Default,convert:!0},S["a"].Signal.prototype.connect=S["a"].SignalBase.prototype.connect,S["a"].Signal.prototype.disconnect=S["a"].SignalBase.prototype.disconnect,S["a"].Signal.prototype.getValueAtTime=function(t){return this._param.getValueAtTime?this._param.getValueAtTime(t):S["a"].Param.prototype.getValueAtTime.call(this,t)},S["a"].Signal.prototype.dispose=function(){return S["a"].Param.prototype.dispose.call(this),this._constantSource.stop(),this._constantSource.disconnect(),this._constantSource=null,this};S["a"].Signal;if(S["a"].supported&&!S["a"].global.AudioContext.prototype._native_createWaveShaper){var L=navigator.userAgent.toLowerCase(),U=L.includes("safari")&&!L.includes("chrome");if(U){var Y=function(t){for(var e in this._internalNode=this.input=this.output=t._native_createWaveShaper(),this._curve=null,this._internalNode)this._defineProperty(this._internalNode,e)};Object.defineProperty(Y.prototype,"curve",{get:function(){return this._curve},set:function(t){this._curve=t;var e=new Float32Array(t.length+1);e.set(t,1),e[0]=t[0],this._internalNode.curve=e}}),Y.prototype._defineProperty=function(t,e){S["a"].isUndef(this[e])&&Object.defineProperty(this,e,{get:function(){return"function"===typeof t[e]?t[e].bind(t):t[e]},set:function(i){t[e]=i}})},S["a"].global.AudioContext.prototype._native_createWaveShaper=S["a"].global.AudioContext.prototype.createWaveShaper,S["a"].global.AudioContext.prototype.createWaveShaper=function(){return new Y(this)}}}S["a"].WaveShaper=function(t,e){S["a"].SignalBase.call(this),this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(t)?this.curve=t:isFinite(t)||S["a"].isUndef(t)?this._curve=new Float32Array(S["a"].defaultArg(t,1024)):S["a"].isFunction(t)&&(this._curve=new Float32Array(S["a"].defaultArg(e,1024)),this.setMap(t))},S["a"].extend(S["a"].WaveShaper,S["a"].SignalBase),S["a"].WaveShaper.prototype.setMap=function(t){for(var e=new Array(this._curve.length),i=0,n=this._curve.length;i<n;i++){var r=i/(n-1)*2-1;e[i]=t(r,i)}return this.curve=e,this},Object.defineProperty(S["a"].WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(S["a"].WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(!["none","2x","4x"].includes(t))throw new RangeError("Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'");this._shaper.oversample=t}}),S["a"].WaveShaper.prototype.dispose=function(){return S["a"].SignalBase.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this};S["a"].WaveShaper;S["a"].Pow=function(t){S["a"].SignalBase.call(this),this._exp=S["a"].defaultArg(t,1),this._expScaler=this.input=this.output=new S["a"].WaveShaper(this._expFunc(this._exp),8192)},S["a"].extend(S["a"].Pow,S["a"].SignalBase),Object.defineProperty(S["a"].Pow.prototype,"value",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),S["a"].Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},S["a"].Pow.prototype.dispose=function(){return S["a"].SignalBase.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this};S["a"].Pow;S["a"].Envelope=function(){var t=S["a"].defaults(arguments,["attack","decay","sustain","release"],S["a"].Envelope);S["a"].AudioNode.call(this),this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this._attackCurve="linear",this._releaseCurve="exponential",this._sig=this.output=new S["a"].Signal(0),this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve},S["a"].extend(S["a"].Envelope,S["a"].AudioNode),S["a"].Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},Object.defineProperty(S["a"].Envelope.prototype,"value",{get:function(){return this.getValueAtTime(this.now())}}),S["a"].Envelope.prototype._getCurve=function(t,e){if(S["a"].isString(t))return t;if(S["a"].isArray(t))for(var i in S["a"].Envelope.Type)if(S["a"].Envelope.Type[i][e]===t)return i},S["a"].Envelope.prototype._setCurve=function(t,e,i){if(S["a"].Envelope.Type.hasOwnProperty(i)){var n=S["a"].Envelope.Type[i];S["a"].isObject(n)?this[t]=n[e]:this[t]=n}else{if(!S["a"].isArray(i))throw new Error("Tone.Envelope: invalid curve: "+i);this[t]=i}},Object.defineProperty(S["a"].Envelope.prototype,"attackCurve",{get:function(){return this._getCurve(this._attackCurve,"In")},set:function(t){this._setCurve("_attackCurve","In",t)}}),Object.defineProperty(S["a"].Envelope.prototype,"releaseCurve",{get:function(){return this._getCurve(this._releaseCurve,"Out")},set:function(t){this._setCurve("_releaseCurve","Out",t)}}),Object.defineProperty(S["a"].Envelope.prototype,"decayCurve",{get:function(){return this._decayCurve},set:function(t){var e=["linear","exponential"];if(!e.includes(t))throw new Error("Tone.Envelope: invalid curve: "+t);this._decayCurve=t}}),S["a"].Envelope.prototype.triggerAttack=function(t,e){this.log("triggerAttack",t,e),t=this.toSeconds(t);var i=this.toSeconds(this.attack),n=i,r=this.toSeconds(this.decay);e=S["a"].defaultArg(e,1);var a=this.getValueAtTime(t);if(a>0){var o=1/n,s=1-a;n=s/o}if(0===n)this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else if(n>0){this._sig.cancelAndHoldAtTime(t);for(var l=this._attackCurve,u=1;u<l.length;u++)if(l[u-1]<=a&&a<=l[u]){l=this._attackCurve.slice(u),l[0]=a;break}this._sig.setValueCurveAtTime(l,t,n,e)}if(r){var c=e*this.sustain,h=t+n;this.log("decay",h),"linear"===this._decayCurve?this._sig.linearRampTo(c,r,h+this.sampleTime):"exponential"===this._decayCurve&&this._sig.exponentialApproachValueAtTime(c,h,r)}return this},S["a"].Envelope.prototype.triggerRelease=function(t){this.log("triggerRelease",t),t=this.toSeconds(t);var e=this.getValueAtTime(t);if(e>0){var i=this.toSeconds(this.release);if("linear"===this._releaseCurve)this._sig.linearRampTo(0,i,t);else if("exponential"===this._releaseCurve)this._sig.targetRampTo(0,i,t);else{var n=this._releaseCurve;S["a"].isArray(n)&&(this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(n,t,i,e))}}return this},S["a"].Envelope.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},S["a"].Envelope.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this},S["a"].Envelope.prototype.cancel=function(t){return this._sig.cancelScheduledValues(t),this},S["a"].Envelope.prototype.connect=S["a"].SignalBase.prototype.connect,function(){var t,e,i=128,n=[];for(t=0;t<i;t++)n[t]=Math.sin(t/(i-1)*(Math.PI/2));var r=[],a=6.4;for(t=0;t<i-1;t++){e=t/(i-1);var o=Math.sin(e*(2*Math.PI)*a-Math.PI/2)+1;r[t]=o/10+.83*e}r[i-1]=1;var s=[],l=5;for(t=0;t<i;t++)s[t]=Math.ceil(t/(i-1)*l)/l;var u=[];for(t=0;t<i;t++)e=t/(i-1),u[t]=.5*(1-Math.cos(Math.PI*e));var c=[];for(t=0;t<i;t++){e=t/(i-1);var h=4*Math.pow(e,3)+.2,p=Math.cos(h*Math.PI*2*e);c[t]=Math.abs(p*(1-e))}function d(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[i]=1-t[i];return e}function f(t){return t.slice(0).reverse()}S["a"].Envelope.Type={linear:"linear",exponential:"exponential",bounce:{In:d(c),Out:c},cosine:{In:n,Out:f(n)},step:{In:s,Out:d(s)},ripple:{In:r,Out:d(r)},sine:{In:u,Out:d(u)}}}(),S["a"].Envelope.prototype.dispose=function(){return S["a"].AudioNode.prototype.dispose.call(this),this._sig.dispose(),this._sig=null,this._attackCurve=null,this._releaseCurve=null,this};S["a"].Envelope;S["a"].AmplitudeEnvelope=function(){S["a"].Envelope.apply(this,arguments),this.input=this.output=new S["a"].Gain,this._sig.connect(this.output.gain)},S["a"].extend(S["a"].AmplitudeEnvelope,S["a"].Envelope),S["a"].AmplitudeEnvelope.prototype.dispose=function(){return S["a"].Envelope.prototype.dispose.call(this),this};S["a"].AmplitudeEnvelope;function W(t){return function(e,i){i=this.toSeconds(i),t.apply(this,arguments);var n=this._events.get(i),r=this._events.previousEvent(n),a=this._getTicksUntilEvent(r,i);return n.ticks=Math.max(a,0),this}}S["a"].TickSignal=function(t){t=S["a"].defaultArg(t,1),S["a"].Signal.call(this,{units:S["a"].Type.Ticks,value:t}),this._events.memory=1/0,this.cancelScheduledValues(0),this._events.add({type:S["a"].Param.AutomationType.SetValue,time:0,value:t})},S["a"].extend(S["a"].TickSignal,S["a"].Signal),S["a"].TickSignal.prototype.setValueAtTime=W(S["a"].Signal.prototype.setValueAtTime),S["a"].TickSignal.prototype.linearRampToValueAtTime=W(S["a"].Signal.prototype.linearRampToValueAtTime),S["a"].TickSignal.prototype.setTargetAtTime=function(t,e,i){e=this.toSeconds(e),this.setRampPoint(e),t=this._fromUnits(t);for(var n=this._events.get(e),r=Math.round(Math.max(1/i,1)),a=0;a<=r;a++){var o=i*a+e,s=this._exponentialApproach(n.time,n.value,t,i,o);this.linearRampToValueAtTime(this._toUnits(s),o)}return this},S["a"].TickSignal.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e),t=this._fromUnits(t);for(var i=this._events.get(e),n=Math.round(Math.max(10*(e-i.time),1)),r=(e-i.time)/n,a=0;a<=n;a++){var o=r*a+i.time,s=this._exponentialInterpolate(i.time,i.value,e,t,o);this.linearRampToValueAtTime(this._toUnits(s),o)}return this},S["a"].TickSignal.prototype._getTicksUntilEvent=function(t,e){if(null===t)t={ticks:0,time:0};else if(S["a"].isUndef(t.ticks)){var i=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(i,t.time)}var n=this.getValueAtTime(t.time),r=this.getValueAtTime(e);return this._events.get(e).time===e&&this._events.get(e).type===S["a"].Param.AutomationType.SetValue&&(r=this.getValueAtTime(e-this.sampleTime)),.5*(e-t.time)*(n+r)+t.ticks},S["a"].TickSignal.prototype.getTicksAtTime=function(t){t=this.toSeconds(t);var e=this._events.get(t);return Math.max(this._getTicksUntilEvent(e,t),0)},S["a"].TickSignal.prototype.getDurationOfTicks=function(t,e){e=this.toSeconds(e);var i=this.getTicksAtTime(e);return this.getTimeOfTick(i+t)-e},S["a"].TickSignal.prototype.getTimeOfTick=function(t){var e=this._events.get(t,"ticks"),i=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&i&&i.type===S["a"].Param.AutomationType.Linear&&e.value!==i.value){var n=this.getValueAtTime(e.time),r=this.getValueAtTime(i.time),a=(r-n)/(i.time-e.time),o=Math.sqrt(Math.pow(n,2)-2*a*(e.ticks-t)),s=(-n+o)/a,l=(-n-o)/a;return(s>0?s:l)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue},S["a"].TickSignal.prototype.ticksToTime=function(t,e){return e=this.toSeconds(e),new S["a"].Time(this.getDurationOfTicks(t,e))},S["a"].TickSignal.prototype.timeToTicks=function(t,e){e=this.toSeconds(e),t=this.toSeconds(t);var i=this.getTicksAtTime(e),n=this.getTicksAtTime(e+t);return new S["a"].Ticks(n-i)};S["a"].TickSignal;S["a"].TimelineState=function(t){S["a"].Timeline.call(this),this._initial=t},S["a"].extend(S["a"].TimelineState,S["a"].Timeline),S["a"].TimelineState.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},S["a"].TimelineState.prototype.setStateAtTime=function(t,e){return this.add({state:t,time:e}),this},S["a"].TimelineState.prototype.getLastState=function(t,e){e=this.toSeconds(e);for(var i=this._search(e),n=i;n>=0;n--){var r=this._timeline[n];if(r.state===t)return r}},S["a"].TimelineState.prototype.getNextState=function(t,e){e=this.toSeconds(e);var i=this._search(e);if(-1!==i)for(var n=i;n<this._timeline.length;n++){var r=this._timeline[n];if(r.state===t)return r}};S["a"].TimelineState;S["a"].TickSource=function(){var t=S["a"].defaults(arguments,["frequency"],S["a"].TickSource);this.frequency=new S["a"].TickSignal(t.frequency),this._readOnly("frequency"),this._state=new S["a"].TimelineState(S["a"].State.Stopped),this._state.setStateAtTime(S["a"].State.Stopped,0),this._tickOffset=new S["a"].Timeline,this.setTicksAtTime(0,0)},S["a"].extend(S["a"].TickSource),S["a"].TickSource.defaults={frequency:1},Object.defineProperty(S["a"].TickSource.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),S["a"].TickSource.prototype.start=function(t,e){return t=this.toSeconds(t),this._state.getValueAtTime(t)!==S["a"].State.Started&&(this._state.setStateAtTime(S["a"].State.Started,t),S["a"].isDefined(e)&&this.setTicksAtTime(e,t)),this},S["a"].TickSource.prototype.stop=function(t){if(t=this.toSeconds(t),this._state.getValueAtTime(t)===S["a"].State.Stopped){var e=this._state.get(t);e.time>0&&(this._tickOffset.cancel(e.time),this._state.cancel(e.time))}return this._state.cancel(t),this._state.setStateAtTime(S["a"].State.Stopped,t),this.setTicksAtTime(0,t),this},S["a"].TickSource.prototype.pause=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)===S["a"].State.Started&&this._state.setStateAtTime(S["a"].State.Paused,t),this},S["a"].TickSource.prototype.cancel=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this},S["a"].TickSource.prototype.getTicksAtTime=function(t){t=this.toSeconds(t);var e=this._state.getLastState(S["a"].State.Stopped,t),i={state:S["a"].State.Paused,time:t};this._state.add(i);var n=e,r=0;return this._state.forEachBetween(e.time,t+this.sampleTime,function(t){var e=n.time,i=this._tickOffset.get(t.time);i.time>=n.time&&(r=i.ticks,e=i.time),n.state===S["a"].State.Started&&t.state!==S["a"].State.Started&&(r+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e)),n=t}.bind(this)),this._state.remove(i),r},Object.defineProperty(S["a"].TickSource.prototype,"ticks",{get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())}}),Object.defineProperty(S["a"].TickSource.prototype,"seconds",{get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),i=this.frequency.timeToTicks(t,e);this.setTicksAtTime(i,e)}}),S["a"].TickSource.prototype.getSecondsAtTime=function(t){t=this.toSeconds(t);var e=this._state.getLastState(S["a"].State.Stopped,t),i={state:S["a"].State.Paused,time:t};this._state.add(i);var n=e,r=0;return this._state.forEachBetween(e.time,t+this.sampleTime,function(t){var e=n.time,i=this._tickOffset.get(t.time);i.time>=n.time&&(r=i.seconds,e=i.time),n.state===S["a"].State.Started&&t.state!==S["a"].State.Started&&(r+=t.time-e),n=t}.bind(this)),this._state.remove(i),r},S["a"].TickSource.prototype.setTicksAtTime=function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({time:e,ticks:t,seconds:this.frequency.getDurationOfTicks(t,e)}),this},S["a"].TickSource.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},S["a"].TickSource.prototype.getTimeOfTick=function(t,e){e=S["a"].defaultArg(e,this.now());var i=this._tickOffset.get(e),n=this._state.get(e),r=Math.max(i.time,n.time),a=this.frequency.getTicksAtTime(r)+t-i.ticks;return this.frequency.getTimeOfTick(a)},S["a"].TickSource.prototype.forEachTickBetween=function(t,e,i){var n=this._state.get(t);if(this._state.forEachBetween(t,e,function(e){n.state===S["a"].State.Started&&e.state!==S["a"].State.Started&&this.forEachTickBetween(Math.max(n.time,t),e.time-this.sampleTime,i),n=e}.bind(this)),t=Math.max(n.time,t),n.state===S["a"].State.Started&&this._state){var r=this.frequency.getTicksAtTime(t),a=this.frequency.getTicksAtTime(n.time),o=r-a,s=o%1;0!==s&&(s=1-s);var l=this.frequency.getTimeOfTick(r+s),u=null;while(l<e&&this._state){try{i(l,Math.round(this.getTicksAtTime(l)))}catch(Rt){u=Rt;break}this._state&&(l+=this.frequency.getDurationOfTicks(1,l))}}if(u)throw u;return this},S["a"].TickSource.prototype.dispose=function(){return S["a"].Param.prototype.dispose.call(this),this._state.dispose(),this._state=null,this._tickOffset.dispose(),this._tickOffset=null,this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this};S["a"].TickSource;S["a"].Clock=function(){var t=S["a"].defaults(arguments,["callback","frequency"],S["a"].Clock);S["a"].Emitter.call(this),this.callback=t.callback,this._nextTick=0,this._tickSource=new S["a"].TickSource(t.frequency),this._lastUpdate=0,this.frequency=this._tickSource.frequency,this._readOnly("frequency"),this._state=new S["a"].TimelineState(S["a"].State.Stopped),this._state.setStateAtTime(S["a"].State.Stopped,0),this._boundLoop=this._loop.bind(this),this.context.on("tick",this._boundLoop)},S["a"].extend(S["a"].Clock,S["a"].Emitter),S["a"].Clock.defaults={callback:S["a"].noOp,frequency:1},Object.defineProperty(S["a"].Clock.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),S["a"].Clock.prototype.start=function(t,e){return this.context.resume(),t=this.toSeconds(t),this._state.getValueAtTime(t)!==S["a"].State.Started&&(this._state.setStateAtTime(S["a"].State.Started,t),this._tickSource.start(t,e),t<this._lastUpdate&&this.emit("start",t,e)),this},S["a"].Clock.prototype.stop=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._state.setStateAtTime(S["a"].State.Stopped,t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this},S["a"].Clock.prototype.pause=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)===S["a"].State.Started&&(this._state.setStateAtTime(S["a"].State.Paused,t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this},Object.defineProperty(S["a"].Clock.prototype,"ticks",{get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t}}),Object.defineProperty(S["a"].Clock.prototype,"seconds",{get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t}}),S["a"].Clock.prototype.getSecondsAtTime=function(t){return this._tickSource.getSecondsAtTime(t)},S["a"].Clock.prototype.setTicksAtTime=function(t,e){return this._tickSource.setTicksAtTime(t,e),this},S["a"].Clock.prototype.getTicksAtTime=function(t){return this._tickSource.getTicksAtTime(t)},S["a"].Clock.prototype.nextTickTime=function(t,e){e=this.toSeconds(e);var i=this.getTicksAtTime(e);return this._tickSource.getTimeOfTick(i+t,e)},S["a"].Clock.prototype._loop=function(){var t=this._lastUpdate,e=this.now();this._lastUpdate=e,t!==e&&(this._state.forEachBetween(t,e,function(t){switch(t.state){case S["a"].State.Started:var e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case S["a"].State.Stopped:0!==t.time&&this.emit("stop",t.time);break;case S["a"].State.Paused:this.emit("pause",t.time);break}}.bind(this)),this._tickSource.forEachTickBetween(t,e,function(t,e){this.callback(t,e)}.bind(this)))},S["a"].Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},S["a"].Clock.prototype.dispose=function(){S["a"].Emitter.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._writable("frequency"),this._tickSource.dispose(),this._tickSource=null,this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null};S["a"].Clock;S["a"].IntervalTimeline=function(){S["a"].call(this),this._root=null,this._length=0},S["a"].extend(S["a"].IntervalTimeline),S["a"].IntervalTimeline.prototype.add=function(t){if(S["a"].isUndef(t.time)||S["a"].isUndef(t.duration))throw new Error("Tone.IntervalTimeline: events must have time and duration parameters");t.time=t.time.valueOf();var e=new G(t.time,t.time+t.duration,t);null===this._root?this._root=e:this._root.insert(e),this._length++;while(null!==e)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this},S["a"].IntervalTimeline.prototype.remove=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var i=0;i<e.length;i++){var n=e[i];if(n.event===t){this._removeNode(n),this._length--;break}}}return this},Object.defineProperty(S["a"].IntervalTimeline.prototype,"length",{get:function(){return this._length}}),S["a"].IntervalTimeline.prototype.cancel=function(t){return this.forEachFrom(t,function(t){this.remove(t)}.bind(this)),this},S["a"].IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},S["a"].IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},S["a"].IntervalTimeline.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,i,n=t.getBalance();if(n>0)if(null===t.left.right)e=t.left,e.right=t.right,i=e;else{e=t.left.right;while(null!==e.right)e=e.right;e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)e=t.right,e.left=t.left,i=e;else{e=t.right.left;while(null!==e.left)e=e.left;e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(i)}t.dispose()},S["a"].IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,i=t.isLeftChild(),n=t.right;t.right=n.left,n.left=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},S["a"].IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,i=t.isLeftChild(),n=t.left;t.left=n.right,n.right=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},S["a"].IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},S["a"].IntervalTimeline.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var i=e[0],n=1;n<e.length;n++)e[n].low>i.low&&(i=e[n]);return i.event}}return null},S["a"].IntervalTimeline.prototype.forEach=function(t){if(null!==this._root){var e=[];this._root.traverse((function(t){e.push(t)}));for(var i=0;i<e.length;i++){var n=e[i].event;n&&t(n)}}return this},S["a"].IntervalTimeline.prototype.forEachAtTime=function(t,e){if(null!==this._root){var i=[];this._root.search(t,i);for(var n=i.length-1;n>=0;n--){var r=i[n].event;r&&e(r)}}return this},S["a"].IntervalTimeline.prototype.forEachFrom=function(t,e){if(null!==this._root){var i=[];this._root.searchAfter(t,i);for(var n=i.length-1;n>=0;n--){var r=i[n].event;e(r)}}return this},S["a"].IntervalTimeline.prototype.dispose=function(){var t=[];null!==this._root&&this._root.traverse((function(e){t.push(e)}));for(var e=0;e<t.length;e++)t[e].dispose();return t=null,this._root=null,this};var G=function(t,e,i){this.event=i,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};G.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},G.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},G.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},G.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},G.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},G.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},G.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},G.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(G.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(G.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),G.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null};S["a"].IntervalTimeline;S["a"].Ticks=function(t,e){if(!(this instanceof S["a"].Ticks))return new S["a"].Ticks(t,e);S["a"].TransportTime.call(this,t,e)},S["a"].extend(S["a"].Ticks,S["a"].TransportTime),S["a"].Ticks.prototype._defaultUnits="i",S["a"].Ticks.prototype._now=function(){return S["a"].Transport.ticks},S["a"].Ticks.prototype._beatsToUnits=function(t){return this._getPPQ()*t},S["a"].Ticks.prototype._secondsToUnits=function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())},S["a"].Ticks.prototype._ticksToUnits=function(t){return t},S["a"].Ticks.prototype.toTicks=function(){return this.valueOf()},S["a"].Ticks.prototype.toSeconds=function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())};S["a"].Ticks;S["a"].TransportEvent=function(t,e){e=S["a"].defaultArg(e,S["a"].TransportEvent.defaults),S["a"].call(this),this.Transport=t,this.id=S["a"].TransportEvent._eventId++,this.time=S["a"].Ticks(e.time),this.callback=e.callback,this._once=e.once},S["a"].extend(S["a"].TransportEvent),S["a"].TransportEvent.defaults={once:!1,callback:S["a"].noOp},S["a"].TransportEvent._eventId=0,S["a"].TransportEvent.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.Transport&&this.Transport.clear(this.id))},S["a"].TransportEvent.prototype.dispose=function(){return S["a"].prototype.dispose.call(this),this.Transport=null,this.callback=null,this.time=null,this};S["a"].TransportEvent;S["a"].TransportRepeatEvent=function(t,e){S["a"].TransportEvent.call(this,t,e),e=S["a"].defaultArg(e,S["a"].TransportRepeatEvent.defaults),this.duration=S["a"].Ticks(e.duration),this._interval=S["a"].Ticks(e.interval),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this),this.Transport.on("start loopStart",this._boundRestart),this._restart()},S["a"].extend(S["a"].TransportRepeatEvent,S["a"].TransportEvent),S["a"].TransportRepeatEvent.defaults={duration:1/0,interval:1},S["a"].TransportRepeatEvent.prototype.invoke=function(t){this._createEvents(t),S["a"].TransportEvent.prototype.invoke.call(this,t)},S["a"].TransportRepeatEvent.prototype._createEvents=function(t){var e=this.Transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),S["a"].Ticks(this._nextTick)))},S["a"].TransportRepeatEvent.prototype._restart=function(t){this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this._nextTick=this.time;var e=this.Transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.Transport.scheduleOnce(this.invoke.bind(this),S["a"].Ticks(this._nextTick)),this._nextTick+=this._interval,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),S["a"].Ticks(this._nextTick))},S["a"].TransportRepeatEvent.prototype.dispose=function(){return this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this.Transport.off("start loopStart",this._boundRestart),this._boundCreateEvents=null,S["a"].TransportEvent.prototype.dispose.call(this),this.duration=null,this._interval=null,this};S["a"].TransportRepeatEvent;S["a"].Transport=function(){S["a"].Emitter.call(this),S["a"].getContext(function(){this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=H.defaults.PPQ,this._clock=new S["a"].Clock({callback:this._processTick.bind(this),frequency:0}),this._bindClockEvents(),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=S["a"].Type.BPM,this.bpm.value=H.defaults.bpm,this._readOnly("bpm"),this._timeSignature=H.defaults.timeSignature,this._scheduledEvents={},this._timeline=new S["a"].Timeline,this._repeatedEvents=new S["a"].IntervalTimeline,this._syncedSignals=[],this._swingTicks=H.defaults.PPQ/2,this._swingAmount=0,this.context.transport=this}.bind(this))},S["a"].extend(S["a"].Transport,S["a"].Emitter),S["a"].Transport.defaults={bpm:120,swing:0,swingSubdivision:"8n",timeSignature:4,loopStart:0,loopEnd:"4m",PPQ:192},S["a"].Transport.prototype.isTransport=!0,S["a"].Transport.prototype._processTick=function(t,e){if(this._swingAmount>0&&e%this._ppq!==0&&e%(2*this._swingTicks)!==0){var i=e%(2*this._swingTicks)/(2*this._swingTicks),n=Math.sin(i*Math.PI)*this._swingAmount;t+=S["a"].Ticks(2*this._swingTicks/3).toSeconds()*n}this.loop&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._timeline.forEachAtTime(e,(function(e){e.invoke(t)}))},S["a"].Transport.prototype.schedule=function(t,e){var i=new S["a"].TransportEvent(this,{time:S["a"].TransportTime(e),callback:t});return this._addEvent(i,this._timeline)},S["a"].Transport.prototype.scheduleRepeat=function(t,e,i,n){var r=new S["a"].TransportRepeatEvent(this,{callback:t,interval:S["a"].Time(e),time:S["a"].TransportTime(i),duration:S["a"].Time(S["a"].defaultArg(n,1/0))});return this._addEvent(r,this._repeatedEvents)},S["a"].Transport.prototype.scheduleOnce=function(t,e){var i=new S["a"].TransportEvent(this,{time:S["a"].TransportTime(e),callback:t,once:!0});return this._addEvent(i,this._timeline)},S["a"].Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},S["a"].Transport.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},S["a"].Transport.prototype.cancel=function(t){return t=S["a"].defaultArg(t,0),t=this.toTicks(t),this._timeline.forEachFrom(t,function(t){this.clear(t.id)}.bind(this)),this._repeatedEvents.forEachFrom(t,function(t){this.clear(t.id)}.bind(this)),this},S["a"].Transport.prototype._bindClockEvents=function(){this._clock.on("start",function(t,e){e=S["a"].Ticks(e).toSeconds(),this.emit("start",t,e)}.bind(this)),this._clock.on("stop",function(t){this.emit("stop",t)}.bind(this)),this._clock.on("pause",function(t){this.emit("pause",t)}.bind(this))},Object.defineProperty(S["a"].Transport.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())}}),S["a"].Transport.prototype.start=function(t,e){return S["a"].isDefined(e)&&(e=this.toTicks(e)),this._clock.start(t,e),this},S["a"].Transport.prototype.stop=function(t){return this._clock.stop(t),this},S["a"].Transport.prototype.pause=function(t){return this._clock.pause(t),this},S["a"].Transport.prototype.toggle=function(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!==S["a"].State.Started?this.start(t):this.stop(t),this},Object.defineProperty(S["a"].Transport.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){S["a"].isArray(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}}),Object.defineProperty(S["a"].Transport.prototype,"loopStart",{get:function(){return S["a"].Ticks(this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(S["a"].Transport.prototype,"loopEnd",{get:function(){return S["a"].Ticks(this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}}),S["a"].Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(S["a"].Transport.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}}),Object.defineProperty(S["a"].Transport.prototype,"swingSubdivision",{get:function(){return S["a"].Ticks(this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(S["a"].Transport.prototype,"position",{get:function(){var t=this.now(),e=this._clock.getTicksAtTime(t);return S["a"].Ticks(e).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(S["a"].Transport.prototype,"seconds",{get:function(){return this._clock.seconds},set:function(t){var e=this.now(),i=this.bpm.timeToTicks(t,e);this.ticks=i}}),Object.defineProperty(S["a"].Transport.prototype,"progress",{get:function(){if(this.loop){var t=this.now(),e=this._clock.getTicksAtTime(t);return(e-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}}),Object.defineProperty(S["a"].Transport.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(t){if(this._clock.ticks!==t){var e=this.now();this.state===S["a"].State.Started?(this.emit("stop",e),this._clock.setTicksAtTime(t,e),this.emit("start",e,this.seconds)):this._clock.setTicksAtTime(t,e)}}}),S["a"].Transport.prototype.getTicksAtTime=function(t){return Math.round(this._clock.getTicksAtTime(t))},S["a"].Transport.prototype.getSecondsAtTime=function(t){return this._clock.getSecondsAtTime(t)},Object.defineProperty(S["a"].Transport.prototype,"PPQ",{get:function(){return this._ppq},set:function(t){var e=this.bpm.value;this._ppq=t,this.bpm.value=e}}),S["a"].Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},S["a"].Transport.prototype._toUnits=function(t){return t/this.PPQ*60},S["a"].Transport.prototype.nextSubdivision=function(t){if(t=this.toTicks(t),this.state!==S["a"].State.Started)return 0;var e=this.now(),i=this.getTicksAtTime(e),n=t-i%t;return this._clock.nextTickTime(n,e)},S["a"].Transport.prototype.syncSignal=function(t,e){if(!e){var i=this.now();e=0!==t.getValueAtTime(i)?t.getValueAtTime(i)/this.bpm.getValueAtTime(i):0}var n=new S["a"].Gain(e);return this.bpm.chain(n,t._param),this._syncedSignals.push({ratio:n,signal:t,initial:t.value}),t.value=0,this},S["a"].Transport.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var i=this._syncedSignals[e];i.signal===t&&(i.ratio.dispose(),i.signal.value=i.initial,this._syncedSignals.splice(e,1))}return this},S["a"].Transport.prototype.dispose=function(){return S["a"].Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable("bpm"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this};var H=S["a"].Transport;S["a"].Transport=new H,S["a"].Context.on("init",(function(t){t.transport&&t.transport.isTransport?S["a"].Transport=t.transport:S["a"].Transport=new H})),S["a"].Context.on("close",(function(t){t.transport&&t.transport.isTransport&&t.transport.dispose()}));S["a"].Transport;S["a"].Volume=function(){var t=S["a"].defaults(arguments,["volume"],S["a"].Volume);S["a"].AudioNode.call(this,t),this.output=this.input=new S["a"].Gain(t.volume,S["a"].Type.Decibels),this._unmutedVolume=t.volume,this.volume=this.output.gain,this._readOnly("volume"),this.mute=t.mute},S["a"].extend(S["a"].Volume,S["a"].AudioNode),S["a"].Volume.defaults={volume:0,mute:!1},Object.defineProperty(S["a"].Volume.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}}),S["a"].Volume.prototype.dispose=function(){return this.input.dispose(),S["a"].AudioNode.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this};S["a"].Volume;S["a"].Master=function(){S["a"].AudioNode.call(this),S["a"].getContext(function(){this.createInsOuts(1,0),this._volume=this.output=new S["a"].Volume,this.volume=this._volume.volume,this._readOnly("volume"),S["a"].connectSeries(this.input,this.output,this.context.destination),this.context.master=this}.bind(this))},S["a"].extend(S["a"].Master,S["a"].AudioNode),S["a"].Master.defaults={volume:0,mute:!1},S["a"].Master.prototype.isMaster=!0,Object.defineProperty(S["a"].Master.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),S["a"].Master.prototype.chain=function(){this.input.disconnect();var t=Array.from(arguments);t.unshift(this.input),t.push(this.output),S["a"].connectSeries.apply(void 0,t)},S["a"].Master.prototype.dispose=function(){S["a"].AudioNode.prototype.dispose.call(this),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null},S["a"].AudioNode.prototype.toMaster=function(){return this.connect(this.context.master),this};var $=S["a"].Master;S["a"].Master=new $,S["a"].Context.on("init",(function(t){t.master&&t.master.isMaster?S["a"].Master=t.master:S["a"].Master=new $})),S["a"].Context.on("close",(function(t){t.master&&t.master.isMaster&&t.master.dispose()}));S["a"].Master;S["a"].Source=function(t){t=S["a"].defaultArg(t,S["a"].Source.defaults),S["a"].AudioNode.call(this),this._volume=this.output=new S["a"].Volume(t.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._state=new S["a"].TimelineState(S["a"].State.Stopped),this._state.memory=100,this._synced=!1,this._scheduled=[],this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=t.mute},S["a"].extend(S["a"].Source,S["a"].AudioNode),S["a"].Source.defaults={volume:0,mute:!1},Object.defineProperty(S["a"].Source.prototype,"state",{get:function(){return this._synced?S["a"].Transport.state===S["a"].State.Started?this._state.getValueAtTime(S["a"].Transport.seconds):S["a"].State.Stopped:this._state.getValueAtTime(this.now())}}),Object.defineProperty(S["a"].Source.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),S["a"].Source.prototype._start=S["a"].noOp,S["a"].Source.prototype.restart=S["a"].noOp,S["a"].Source.prototype._stop=S["a"].noOp,S["a"].Source.prototype.start=function(t,e,i){if(S["a"].isUndef(t)&&this._synced?t=S["a"].Transport.seconds:(t=this.toSeconds(t),this._synced||(t=Math.max(t,this.context.currentTime))),this._state.getValueAtTime(t)===S["a"].State.Started)this._state.cancel(t),this._state.setStateAtTime(S["a"].State.Started,t),this.restart(t,e,i);else if(this._state.setStateAtTime(S["a"].State.Started,t),this._synced){var n=this._state.get(t);n.offset=S["a"].defaultArg(e,0),n.duration=i;var r=S["a"].Transport.schedule(function(t){this._start(t,e,i)}.bind(this),t);this._scheduled.push(r),S["a"].Transport.state===S["a"].State.Started&&this._syncedStart(this.now(),S["a"].Transport.seconds)}else this._start.apply(this,arguments);return this},S["a"].Source.prototype.stop=function(t){if(S["a"].isUndef(t)&&this._synced?t=S["a"].Transport.seconds:(t=this.toSeconds(t),t=Math.max(t,this.context.currentTime)),this._synced){var e=S["a"].Transport.schedule(this._stop.bind(this),t);this._scheduled.push(e)}else this._stop.apply(this,arguments);return this._state.cancel(t),this._state.setStateAtTime(S["a"].State.Stopped,t),this},S["a"].Source.prototype.sync=function(){return this._synced=!0,this._syncedStart=function(t,e){if(e>0){var i=this._state.get(e);if(i&&i.state===S["a"].State.Started&&i.time!==e){var n,r=e-this.toSeconds(i.time);i.duration&&(n=this.toSeconds(i.duration)-r),this._start(t,this.toSeconds(i.offset)+r,n)}}}.bind(this),this._syncedStop=function(t){var e=S["a"].Transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)===S["a"].State.Started&&this._stop(t)}.bind(this),S["a"].Transport.on("start loopStart",this._syncedStart),S["a"].Transport.on("stop pause loopEnd",this._syncedStop),this},S["a"].Source.prototype.unsync=function(){this._synced&&(S["a"].Transport.off("stop pause loopEnd",this._syncedStop),S["a"].Transport.off("start loopStart",this._syncedStart)),this._synced=!1;for(var t=0;t<this._scheduled.length;t++){var e=this._scheduled[t];S["a"].Transport.clear(e)}return this._scheduled=[],this._state.cancel(0),this},S["a"].Source.prototype.dispose=function(){S["a"].AudioNode.prototype.dispose.call(this),this.unsync(),this._scheduled=null,this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null};S["a"].Source;S["a"].supported&&(AudioBuffer.prototype.copyToChannel||(AudioBuffer.prototype.copyToChannel=function(t,e,i){var n=this.getChannelData(e);i=i||0;for(var r=0;r<n.length;r++)n[r+i]=t[r]},AudioBuffer.prototype.copyFromChannel=function(t,e,i){var n=this.getChannelData(e);i=i||0;for(var r=0;r<t.length;r++)t[r]=n[r+i]})),S["a"].Buffer=function(){var t=S["a"].defaults(arguments,["url","onload","onerror"],S["a"].Buffer);S["a"].call(this),this._buffer=null,this._reversed=t.reverse,this._xhr=null,this.onload=S["a"].noOp,t.url instanceof AudioBuffer||t.url instanceof S["a"].Buffer?(this.set(t.url),this.loaded||(this.onload=t.onload)):S["a"].isString(t.url)&&this.load(t.url).then(t.onload).catch(t.onerror)},S["a"].extend(S["a"].Buffer),S["a"].Buffer.defaults={url:void 0,reverse:!1,onload:S["a"].noOp,onerror:S["a"].noOp},S["a"].Buffer.prototype.set=function(t){return t instanceof S["a"].Buffer?t.loaded?this._buffer=t.get():t.onload=function(){this.set(t),this.onload(this)}.bind(this):this._buffer=t,this._reversed&&this._reverse(),this},S["a"].Buffer.prototype.get=function(){return this._buffer},S["a"].Buffer.prototype.load=function(t,e,i){var n=new Promise(function(n,r){this._xhr=S["a"].Buffer.load(t,function(t){this._xhr=null,this.set(t),n(this),this.onload(this),e&&e(this)}.bind(this),function(t){this._xhr=null,r(t),i&&i(t)}.bind(this))}.bind(this));return n},S["a"].Buffer.prototype.dispose=function(){return S["a"].prototype.dispose.call(this),this._buffer=null,this._xhr&&(S["a"].Buffer._removeFromDownloadQueue(this._xhr),this._xhr.abort(),this._xhr=null),this},Object.defineProperty(S["a"].Buffer.prototype,"loaded",{get:function(){return this.length>0}}),Object.defineProperty(S["a"].Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),Object.defineProperty(S["a"].Buffer.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0}}),Object.defineProperty(S["a"].Buffer.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0}}),S["a"].Buffer.prototype.fromArray=function(t){var e=t[0].length>0,i=e?t.length:1,n=e?t[0].length:t.length,r=this.context.createBuffer(i,n,this.context.sampleRate);e||1!==i||(t=[t]);for(var a=0;a<i;a++)r.copyToChannel(t[a],a);return this._buffer=r,this},S["a"].Buffer.prototype.toMono=function(t){if(S["a"].isNumber(t))this.fromArray(this.toArray(t));else{for(var e=new Float32Array(this.length),i=this.numberOfChannels,n=0;n<i;n++)for(var r=this.toArray(n),a=0;a<r.length;a++)e[a]+=r[a];e=e.map((function(t){return t/i})),this.fromArray(e)}return this},S["a"].Buffer.prototype.toArray=function(t){if(S["a"].isNumber(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);for(var e=[],i=0;i<this.numberOfChannels;i++)e[i]=this.getChannelData(i);return e},S["a"].Buffer.prototype.getChannelData=function(t){return this._buffer.getChannelData(t)},S["a"].Buffer.prototype.slice=function(t,e){e=S["a"].defaultArg(e,this.duration);for(var i=Math.floor(this.context.sampleRate*this.toSeconds(t)),n=Math.floor(this.context.sampleRate*this.toSeconds(e)),r=[],a=0;a<this.numberOfChannels;a++)r[a]=this.toArray(a).slice(i,n);var o=(new S["a"].Buffer).fromArray(r);return o},S["a"].Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)Array.prototype.reverse.call(this.getChannelData(t));return this},Object.defineProperty(S["a"].Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),S["a"].Emitter.mixin(S["a"].Buffer),S["a"].Buffer._downloadQueue=[],S["a"].Buffer.baseUrl="",S["a"].Buffer.fromArray=function(t){return(new S["a"].Buffer).fromArray(t)},S["a"].Buffer.fromUrl=function(t){var e=new S["a"].Buffer;return e.load(t).then((function(){return e}))},S["a"].Buffer._removeFromDownloadQueue=function(t){var e=S["a"].Buffer._downloadQueue.indexOf(t);-1!==e&&S["a"].Buffer._downloadQueue.splice(e,1)},S["a"].Buffer.load=function(t,e,i){e=S["a"].defaultArg(e,S["a"].noOp);var n=t.match(/\[(.+\|?)+\]$/);if(n){for(var r=n[1].split("|"),a=r[0],o=0;o<r.length;o++)if(S["a"].Buffer.supportsType(r[o])){a=r[o];break}t=t.replace(n[0],a)}function s(t){if(S["a"].Buffer._removeFromDownloadQueue(u),S["a"].Buffer.emit("error",t),!i)throw t;i(t)}function l(){for(var t=0,e=0;e<S["a"].Buffer._downloadQueue.length;e++)t+=S["a"].Buffer._downloadQueue[e].progress;S["a"].Buffer.emit("progress",t/S["a"].Buffer._downloadQueue.length)}var u=new XMLHttpRequest;return u.open("GET",S["a"].Buffer.baseUrl+t,!0),u.responseType="arraybuffer",u.progress=0,S["a"].Buffer._downloadQueue.push(u),u.addEventListener("load",(function(){200===u.status?S["a"].context.decodeAudioData(u.response).then((function(t){u.progress=1,l(),e(t),S["a"].Buffer._removeFromDownloadQueue(u),0===S["a"].Buffer._downloadQueue.length&&S["a"].Buffer.emit("load")})).catch((function(){S["a"].Buffer._removeFromDownloadQueue(u),s("Tone.Buffer: could not decode audio data: "+t)})):s("Tone.Buffer: could not locate file: "+t)})),u.addEventListener("error",s),u.addEventListener("progress",(function(t){t.lengthComputable&&(u.progress=t.loaded/t.total*.95,l())})),u.send(),u},S["a"].Buffer.cancelDownloads=function(){return S["a"].Buffer._downloadQueue.slice().forEach((function(t){S["a"].Buffer._removeFromDownloadQueue(t),t.abort()})),S["a"].Buffer},S["a"].Buffer.supportsType=function(t){var e=t.split(".");e=e[e.length-1];var i=document.createElement("audio").canPlayType("audio/"+e);return""!==i},S["a"].loaded=function(){var t,e;function i(){S["a"].Buffer.off("load",t),S["a"].Buffer.off("error",e)}return new Promise((function(i,n){t=function(){i()},e=function(){n()},S["a"].Buffer.on("load",t),S["a"].Buffer.on("error",e)})).then(i).catch((function(t){throw i(),new Error(t)}))};S["a"].Buffer;S["a"].supported&&(OscillatorNode.prototype.setPeriodicWave||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),AudioContext.prototype.createPeriodicWave||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable)),S["a"].OscillatorNode=function(){var t=S["a"].defaults(arguments,["frequency","type"],S["a"].OscillatorNode);S["a"].AudioNode.call(this,t),this.onended=t.onended,this._startTime=-1,this._stopTime=-1,this._gainNode=this.output=new S["a"].Gain(0),this._oscillator=this.context.createOscillator(),S["a"].connect(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new S["a"].Param({param:this._oscillator.frequency,units:S["a"].Type.Frequency,value:t.frequency}),this.detune=new S["a"].Param({param:this._oscillator.detune,units:S["a"].Type.Cents,value:t.detune}),this._gain=1},S["a"].extend(S["a"].OscillatorNode,S["a"].AudioNode),S["a"].OscillatorNode.defaults={frequency:440,detune:0,type:"sine",onended:S["a"].noOp},Object.defineProperty(S["a"].OscillatorNode.prototype,"state",{get:function(){return this.getStateAtTime(this.now())}}),S["a"].OscillatorNode.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),-1!==this._startTime&&t>=this._startTime&&(-1===this._stopTime||t<=this._stopTime)?S["a"].State.Started:S["a"].State.Stopped},S["a"].OscillatorNode.prototype.start=function(t){if(this.log("start",t),-1!==this._startTime)throw new Error("cannot call OscillatorNode.start more than once");return this._startTime=this.toSeconds(t),this._startTime=Math.max(this._startTime,this.context.currentTime),this._oscillator.start(this._startTime),this._gainNode.gain.setValueAtTime(1,this._startTime),this},S["a"].OscillatorNode.prototype.setPeriodicWave=function(t){return this._oscillator.setPeriodicWave(t),this},S["a"].OscillatorNode.prototype.stop=function(t){return this.log("stop",t),this.assert(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop(),this._stopTime=this.toSeconds(t),this._stopTime=Math.max(this._stopTime,this.context.currentTime),this._stopTime>this._startTime?(this._gainNode.gain.setValueAtTime(0,this._stopTime),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(function(){this._oscillator.stop(this.now()),this.onended(),setTimeout(function(){this._oscillator&&(this._oscillator.disconnect(),this._gainNode.disconnect())}.bind(this),100)}.bind(this),this._stopTime-this.context.currentTime)):this._gainNode.gain.cancelScheduledValues(this._startTime),this},S["a"].OscillatorNode.prototype.cancelStop=function(){return-1!==this._startTime&&(this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1),this},Object.defineProperty(S["a"].OscillatorNode.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t}}),S["a"].OscillatorNode.prototype.dispose=function(){return this._wasDisposed||(this._wasDisposed=!0,this.context.clearTimeout(this._timeout),S["a"].AudioNode.prototype.dispose.call(this),this.onended=null,this._oscillator.disconnect(),this._oscillator=null,this._gainNode.dispose(),this._gainNode=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null),this};S["a"].OscillatorNode;S["a"].Oscillator=function(){var t=S["a"].defaults(arguments,["frequency","type"],S["a"].Oscillator);S["a"].Source.call(this,t),this._oscillator=null,this.frequency=new S["a"].Signal(t.frequency,S["a"].Type.Frequency),this.detune=new S["a"].Signal(t.detune,S["a"].Type.Cents),this._wave=null,this._partials=t.partials,this._partialCount=t.partialCount,this._phase=t.phase,this._type=t.type,t.partialCount&&t.type!==S["a"].Oscillator.Type.Custom&&(this._type=this.baseType+t.partialCount.toString()),this.phase=this._phase,this._readOnly(["frequency","detune"])},S["a"].extend(S["a"].Oscillator,S["a"].Source),S["a"].Oscillator.defaults={type:"sine",frequency:440,detune:0,phase:0,partials:[],partialCount:0},S["a"].Oscillator.Type={Sine:"sine",Triangle:"triangle",Sawtooth:"sawtooth",Square:"square",Custom:"custom"},S["a"].Oscillator.prototype._start=function(t){this.log("start",t);var e=new S["a"].OscillatorNode;this._oscillator=e,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),t=this.toSeconds(t),this._oscillator.start(t)},S["a"].Oscillator.prototype._stop=function(t){return this.log("stop",t),this._oscillator&&(t=this.toSeconds(t),this._oscillator.stop(t)),this},S["a"].Oscillator.prototype.restart=function(t){return this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(this.toSeconds(t)),this},S["a"].Oscillator.prototype.syncFrequency=function(){return S["a"].Transport.syncSignal(this.frequency),this},S["a"].Oscillator.prototype.unsyncFrequency=function(){return S["a"].Transport.unsyncSignal(this.frequency),this},Object.defineProperty(S["a"].Oscillator.prototype,"type",{get:function(){return this._type},set:function(t){var e=[S["a"].Oscillator.Type.Sine,S["a"].Oscillator.Type.Square,S["a"].Oscillator.Type.Triangle,S["a"].Oscillator.Type.Sawtooth].includes(t);if(0===this._phase&&e)this._wave=null,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{var i=this._getRealImaginary(t,this._phase),n=this.context.createPeriodicWave(i[0],i[1]);this._wave=n,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}this._type=t}}),Object.defineProperty(S["a"].Oscillator.prototype,"baseType",{get:function(){return this._type.replace(this.partialCount,"")},set:function(t){this.partialCount&&this._type!==S["a"].Oscillator.Type.Custom&&t!==S["a"].Oscillator.Type.Custom?this.type=t+this.partialCount:this.type=t}}),Object.defineProperty(S["a"].Oscillator.prototype,"partialCount",{get:function(){return this._partialCount},set:function(t){var e=this._type,i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);i&&(e=i[1]),this._type!==S["a"].Oscillator.Type.Custom&&(this.type=0===t?e:e+t.toString())}}),S["a"].Oscillator.prototype.get=function(){var t=S["a"].prototype.get.apply(this,arguments);return t.type!==S["a"].Oscillator.Type.Custom&&delete t.partials,t},S["a"].Oscillator.prototype._getRealImaginary=function(t,e){var i=4096,n=i/2,r=new Float32Array(n),a=new Float32Array(n),o=1;if(t===S["a"].Oscillator.Type.Custom)o=this._partials.length+1,this._partialCount=this._partials.length,n=o;else{var s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);s?(o=parseInt(s[2])+1,this._partialCount=parseInt(s[2]),t=s[1],o=Math.max(o,2),n=o):this._partialCount=0,this._partials=[]}for(var l=1;l<n;++l){var u,c=2/(l*Math.PI);switch(t){case S["a"].Oscillator.Type.Sine:u=l<=o?1:0,this._partials[l-1]=u;break;case S["a"].Oscillator.Type.Square:u=1&l?2*c:0,this._partials[l-1]=u;break;case S["a"].Oscillator.Type.Sawtooth:u=c*(1&l?1:-1),this._partials[l-1]=u;break;case S["a"].Oscillator.Type.Triangle:u=1&l?c*c*2*(l-1>>1&1?-1:1):0,this._partials[l-1]=u;break;case S["a"].Oscillator.Type.Custom:u=this._partials[l-1];break;default:throw new TypeError("Tone.Oscillator: invalid type: "+t)}0!==u?(r[l]=-u*Math.sin(e*l),a[l]=u*Math.cos(e*l)):(r[l]=0,a[l]=0)}return[r,a]},S["a"].Oscillator.prototype._inverseFFT=function(t,e,i){for(var n=0,r=t.length,a=0;a<r;a++)n+=t[a]*Math.cos(a*i)+e[a]*Math.sin(a*i);return n},S["a"].Oscillator.prototype._getInitialValue=function(){for(var t=this._getRealImaginary(this._type,0),e=t[0],i=t[1],n=0,r=2*Math.PI,a=0;a<8;a++)n=Math.max(this._inverseFFT(e,i,a/8*r),n);return-this._inverseFFT(e,i,this._phase)/n},Object.defineProperty(S["a"].Oscillator.prototype,"partials",{get:function(){return this._partials},set:function(t){this._partials=t,this.type=S["a"].Oscillator.Type.Custom}}),Object.defineProperty(S["a"].Oscillator.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}}),S["a"].Oscillator.prototype.dispose=function(){return S["a"].Source.prototype.dispose.call(this),null!==this._oscillator&&(this._oscillator.dispose(),this._oscillator=null),this._wave=null,this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._partials=null,this};S["a"].Oscillator;S["a"].PulseOscillator=function(){var t=S["a"].defaults(arguments,["frequency","width"],S["a"].Oscillator);S["a"].Source.call(this,t),this.width=new S["a"].Signal(t.width,S["a"].Type.NormalRange),this._widthGate=new S["a"].Gain(0),this._sawtooth=new S["a"].Oscillator({frequency:t.frequency,detune:t.detune,type:"sawtooth",phase:t.phase}),this.frequency=this._sawtooth.frequency,this.detune=this._sawtooth.detune,this._thresh=new S["a"].WaveShaper((function(t){return t<0?-1:1})),this._sawtooth.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),this._readOnly(["width","frequency","detune"])},S["a"].extend(S["a"].PulseOscillator,S["a"].Source),S["a"].PulseOscillator.defaults={frequency:440,detune:0,phase:0,width:.2},S["a"].PulseOscillator.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},S["a"].PulseOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.setValueAtTime(0,t)},S["a"].PulseOscillator.prototype.restart=function(t){this._sawtooth.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)},Object.defineProperty(S["a"].PulseOscillator.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t}}),Object.defineProperty(S["a"].PulseOscillator.prototype,"type",{get:function(){return"pulse"}}),Object.defineProperty(S["a"].PulseOscillator.prototype,"baseType",{get:function(){return"pulse"}}),Object.defineProperty(S["a"].PulseOscillator.prototype,"partials",{get:function(){return[]}}),S["a"].PulseOscillator.prototype.dispose=function(){return S["a"].Source.prototype.dispose.call(this),this._sawtooth.dispose(),this._sawtooth=null,this._writable(["width","frequency","detune"]),this.width.dispose(),this.width=null,this._widthGate.dispose(),this._widthGate=null,this._thresh.dispose(),this._thresh=null,this.frequency=null,this.detune=null,this};S["a"].PulseOscillator;S["a"].Multiply=function(t){S["a"].Signal.call(this),this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new S["a"].Gain,this._param=this.input[1]=this.output.gain,this.value=S["a"].defaultArg(t,0)},S["a"].extend(S["a"].Multiply,S["a"].Signal),S["a"].Multiply.prototype.dispose=function(){return S["a"].Signal.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this};S["a"].Multiply;S["a"].PWMOscillator=function(){var t=S["a"].defaults(arguments,["frequency","modulationFrequency"],S["a"].PWMOscillator);S["a"].Source.call(this,t),this._pulse=new S["a"].PulseOscillator(t.modulationFrequency),this._pulse._sawtooth.type="sine",this._modulator=new S["a"].Oscillator({frequency:t.frequency,detune:t.detune,phase:t.phase}),this._scale=new S["a"].Multiply(2),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this.modulationFrequency=this._pulse.frequency,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),this._readOnly(["modulationFrequency","frequency","detune"])},S["a"].extend(S["a"].PWMOscillator,S["a"].Source),S["a"].PWMOscillator.defaults={frequency:440,detune:0,phase:0,modulationFrequency:.4},S["a"].PWMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},S["a"].PWMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},S["a"].PWMOscillator.prototype.restart=function(t){this._modulator.restart(t),this._pulse.restart(t)},Object.defineProperty(S["a"].PWMOscillator.prototype,"type",{get:function(){return"pwm"}}),Object.defineProperty(S["a"].PWMOscillator.prototype,"baseType",{get:function(){return"pwm"}}),Object.defineProperty(S["a"].PWMOscillator.prototype,"partials",{get:function(){return[]}}),Object.defineProperty(S["a"].PWMOscillator.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}}),S["a"].PWMOscillator.prototype.dispose=function(){return S["a"].Source.prototype.dispose.call(this),this._pulse.dispose(),this._pulse=null,this._scale.dispose(),this._scale=null,this._modulator.dispose(),this._modulator=null,this._writable(["modulationFrequency","frequency","detune"]),this.frequency=null,this.detune=null,this.modulationFrequency=null,this};S["a"].PWMOscillator;S["a"].FMOscillator=function(){var t=S["a"].defaults(arguments,["frequency","type","modulationType"],S["a"].FMOscillator);S["a"].Source.call(this,t),this._carrier=new S["a"].Oscillator(t.frequency,t.type),this.frequency=new S["a"].Signal(t.frequency,S["a"].Type.Frequency),this.detune=this._carrier.detune,this.detune.value=t.detune,this.modulationIndex=new S["a"].Multiply(t.modulationIndex),this.modulationIndex.units=S["a"].Type.Positive,this._modulator=new S["a"].Oscillator(t.frequency,t.modulationType),this.harmonicity=new S["a"].Multiply(t.harmonicity),this.harmonicity.units=S["a"].Type.Positive,this._modulationNode=new S["a"].Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),this.phase=t.phase,this._readOnly(["modulationIndex","frequency","detune","harmonicity"])},S["a"].extend(S["a"].FMOscillator,S["a"].Source),S["a"].FMOscillator.defaults={frequency:440,detune:0,phase:0,type:"sine",modulationIndex:2,modulationType:"square",harmonicity:1},S["a"].FMOscillator.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},S["a"].FMOscillator.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},S["a"].FMOscillator.prototype.restart=function(t){this._modulator.restart(t),this._carrier.restart(t)},Object.defineProperty(S["a"].FMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(S["a"].FMOscillator.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t}}),Object.defineProperty(S["a"].FMOscillator.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t}}),Object.defineProperty(S["a"].FMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(S["a"].FMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(S["a"].FMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),S["a"].FMOscillator.prototype.dispose=function(){return S["a"].Source.prototype.dispose.call(this),this._writable(["modulationIndex","frequency","detune","harmonicity"]),this.frequency.dispose(),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this.modulationIndex.dispose(),this.modulationIndex=null,this};S["a"].FMOscillator;S["a"].AudioToGain=function(){S["a"].SignalBase.call(this),this._norm=this.input=this.output=new S["a"].WaveShaper((function(t){return(t+1)/2}))},S["a"].extend(S["a"].AudioToGain,S["a"].SignalBase),S["a"].AudioToGain.prototype.dispose=function(){return S["a"].SignalBase.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this};S["a"].AudioToGain;S["a"].AMOscillator=function(){var t=S["a"].defaults(arguments,["frequency","type","modulationType"],S["a"].AMOscillator);S["a"].Source.call(this,t),this._carrier=new S["a"].Oscillator(t.frequency,t.type),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this.detune.value=t.detune,this._modulator=new S["a"].Oscillator(t.frequency,t.modulationType),this._modulationScale=new S["a"].AudioToGain,this.harmonicity=new S["a"].Multiply(t.harmonicity),this.harmonicity.units=S["a"].Type.Positive,this._modulationNode=new S["a"].Gain(0),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.connect(this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this.phase=t.phase,this._readOnly(["frequency","detune","harmonicity"])},S["a"].extend(S["a"].AMOscillator,S["a"].Oscillator),S["a"].AMOscillator.defaults={frequency:440,detune:0,phase:0,type:"sine",modulationType:"square",harmonicity:1},S["a"].AMOscillator.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},S["a"].AMOscillator.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},S["a"].AMOscillator.prototype.restart=function(t){this._modulator.restart(t),this._carrier.restart(t)},Object.defineProperty(S["a"].AMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(S["a"].AMOscillator.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t}}),Object.defineProperty(S["a"].AMOscillator.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t}}),Object.defineProperty(S["a"].AMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(S["a"].AMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(S["a"].AMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),S["a"].AMOscillator.prototype.dispose=function(){return S["a"].Source.prototype.dispose.call(this),this._writable(["frequency","detune","harmonicity"]),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this._modulationScale.dispose(),this._modulationScale=null,this};S["a"].AMOscillator;S["a"].FatOscillator=function(){var t=S["a"].defaults(arguments,["frequency","type","spread"],S["a"].FatOscillator);S["a"].Source.call(this,t),this.frequency=new S["a"].Signal(t.frequency,S["a"].Type.Frequency),this.detune=new S["a"].Signal(t.detune,S["a"].Type.Cents),this._oscillators=[],this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,this._readOnly(["frequency","detune"])},S["a"].extend(S["a"].FatOscillator,S["a"].Source),S["a"].FatOscillator.defaults={frequency:440,detune:0,phase:0,spread:20,count:3,type:"sawtooth",partials:[],partialCount:0},S["a"].FatOscillator.prototype._start=function(t){t=this.toSeconds(t),this._forEach((function(e){e.start(t)}))},S["a"].FatOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._forEach((function(e){e.stop(t)}))},S["a"].FatOscillator.prototype.restart=function(t){t=this.toSeconds(t),this._forEach((function(e){e.restart(t)}))},S["a"].FatOscillator.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t.call(this,this._oscillators[e],e)},Object.defineProperty(S["a"].FatOscillator.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._forEach((function(e){e.type=t}))}}),Object.defineProperty(S["a"].FatOscillator.prototype,"spread",{get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,i=t/(this._oscillators.length-1);this._forEach((function(t,n){t.detune.value=e+i*n}))}}}),Object.defineProperty(S["a"].FatOscillator.prototype,"count",{get:function(){return this._oscillators.length},set:function(t){if(t=Math.max(t,1),this._oscillators.length!==t){this._forEach((function(t){t.dispose()})),this._oscillators=[];for(var e=0;e<t;e++){var i=new S["a"].Oscillator;this.type===S["a"].Oscillator.Type.Custom?i.partials=this._partials:i.type=this._type,i.partialCount=this._partialCount,i.phase=this._phase+e/t*360,i.volume.value=-6-1.1*t,this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.connect(this.output),this._oscillators[e]=i}this.spread=this._spread,this.state===S["a"].State.Started&&this._forEach((function(t){t.start()}))}}}),Object.defineProperty(S["a"].FatOscillator.prototype,"phase",{get:function(){return this._phase},set:function(t){this._phase=t,this._forEach((function(e){e.phase=t}))}}),Object.defineProperty(S["a"].FatOscillator.prototype,"baseType",{get:function(){return this._oscillators[0].baseType},set:function(t){this._forEach((function(e){e.baseType=t})),this._type=this._oscillators[0].type}}),Object.defineProperty(S["a"].FatOscillator.prototype,"partials",{get:function(){return this._oscillators[0].partials},set:function(t){this._partials=t,this._type=S["a"].Oscillator.Type.Custom,this._forEach((function(e){e.partials=t}))}}),Object.defineProperty(S["a"].FatOscillator.prototype,"partialCount",{get:function(){return this._oscillators[0].partialCount},set:function(t){this._partialCount=t,this._forEach((function(e){e.partialCount=t})),this._type=this._oscillators[0].type}}),S["a"].FatOscillator.prototype.dispose=function(){return S["a"].Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._forEach((function(t){t.dispose()})),this._oscillators=null,this._partials=null,this};S["a"].FatOscillator;S["a"].OmniOscillator=function(){var t=S["a"].defaults(arguments,["frequency","type"],S["a"].OmniOscillator);S["a"].Source.call(this,t),this.frequency=new S["a"].Signal(t.frequency,S["a"].Type.Frequency),this.detune=new S["a"].Signal(t.detune,S["a"].Type.Cents),this._sourceType=void 0,this._oscillator=null,this.type=t.type,this._readOnly(["frequency","detune"]),this.set(t)},S["a"].extend(S["a"].OmniOscillator,S["a"].Source),S["a"].OmniOscillator.defaults={frequency:440,detune:0,type:"sine",phase:0};var z={Pulse:"PulseOscillator",PWM:"PWMOscillator",Osc:"Oscillator",FM:"FMOscillator",AM:"AMOscillator",Fat:"FatOscillator"};S["a"].OmniOscillator.prototype._start=function(t){this._oscillator.start(t)},S["a"].OmniOscillator.prototype._stop=function(t){this._oscillator.stop(t)},S["a"].OmniOscillator.prototype.restart=function(t){this._oscillator.restart(t)},Object.defineProperty(S["a"].OmniOscillator.prototype,"type",{get:function(){var t="";return this._sourceType===z.FM?t="fm":this._sourceType===z.AM?t="am":this._sourceType===z.Fat&&(t="fat"),t+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator(z.FM),this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator(z.AM),this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator(z.Fat),this._oscillator.type=t.substr(3)):"pwm"===t?this._createNewOscillator(z.PWM):"pulse"===t?this._createNewOscillator(z.Pulse):(this._createNewOscillator(z.Osc),this._oscillator.type=t)}}),Object.defineProperty(S["a"].OmniOscillator.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(t){this._oscillator.partials=t}}),Object.defineProperty(S["a"].OmniOscillator.prototype,"partialCount",{get:function(){return this._oscillator.partialCount},set:function(t){this._oscillator.partialCount=t}}),S["a"].OmniOscillator.prototype.set=function(t,e){return"type"===t?this.type=e:S["a"].isObject(t)&&t.hasOwnProperty("type")&&(this.type=t.type),S["a"].prototype.set.apply(this,arguments),this},S["a"].OmniOscillator.prototype.get=function(t){var e=this._oscillator.get(t);return e.type=this.type,e},S["a"].OmniOscillator.prototype._createNewOscillator=function(t){if(t!==this._sourceType){this._sourceType=t;var e=S["a"][t],i=this.now();if(null!==this._oscillator){var n=this._oscillator;n.stop(i),this.context.setTimeout((function(){n.dispose(),n=null}),this.blockTime)}this._oscillator=new e,this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this.state===S["a"].State.Started&&this._oscillator.start(i)}},Object.defineProperty(S["a"].OmniOscillator.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}});var Q={PulseOscillator:"pulse",PWMOscillator:"pwm",Oscillator:"oscillator",FMOscillator:"fm",AMOscillator:"am",FatOscillator:"fat"};Object.defineProperty(S["a"].OmniOscillator.prototype,"sourceType",{get:function(){return Q[this._sourceType]},set:function(t){var e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),t===Q.FMOscillator?this.type="fm"+e:t===Q.AMOscillator?this.type="am"+e:t===Q.FatOscillator?this.type="fat"+e:t===Q.Oscillator?this.type=e:t===Q.PulseOscillator?this.type="pulse":t===Q.PWMOscillator&&(this.type="pwm")}}),Object.defineProperty(S["a"].OmniOscillator.prototype,"baseType",{get:function(){return this._oscillator.baseType},set:function(t){this.sourceType!==Q.PulseOscillator&&this.sourceType!==Q.PWMOscillator&&(this._oscillator.baseType=t)}}),Object.defineProperty(S["a"].OmniOscillator.prototype,"width",{get:function(){return this._sourceType===z.Pulse?this._oscillator.width:void 0}}),Object.defineProperty(S["a"].OmniOscillator.prototype,"count",{get:function(){return this._sourceType===z.Fat?this._oscillator.count:void 0},set:function(t){this._sourceType===z.Fat&&(this._oscillator.count=t)}}),Object.defineProperty(S["a"].OmniOscillator.prototype,"spread",{get:function(){return this._sourceType===z.Fat?this._oscillator.spread:void 0},set:function(t){this._sourceType===z.Fat&&(this._oscillator.spread=t)}}),Object.defineProperty(S["a"].OmniOscillator.prototype,"modulationType",{get:function(){return this._sourceType===z.FM||this._sourceType===z.AM?this._oscillator.modulationType:void 0},set:function(t){this._sourceType!==z.FM&&this._sourceType!==z.AM||(this._oscillator.modulationType=t)}}),Object.defineProperty(S["a"].OmniOscillator.prototype,"modulationIndex",{get:function(){return this._sourceType===z.FM?this._oscillator.modulationIndex:void 0}}),Object.defineProperty(S["a"].OmniOscillator.prototype,"harmonicity",{get:function(){return this._sourceType===z.FM||this._sourceType===z.AM?this._oscillator.harmonicity:void 0}}),Object.defineProperty(S["a"].OmniOscillator.prototype,"modulationFrequency",{get:function(){return this._sourceType===z.PWM?this._oscillator.modulationFrequency:void 0}}),S["a"].OmniOscillator.prototype.dispose=function(){return S["a"].Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.detune.dispose(),this.detune=null,this.frequency.dispose(),this.frequency=null,this._oscillator.dispose(),this._oscillator=null,this._sourceType=null,this};S["a"].OmniOscillator;S["a"].Instrument=function(t){t=S["a"].defaultArg(t,S["a"].Instrument.defaults),S["a"].AudioNode.call(this),this._volume=this.output=new S["a"].Volume(t.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._scheduledEvents=[]},S["a"].extend(S["a"].Instrument,S["a"].AudioNode),S["a"].Instrument.defaults={volume:0},S["a"].Instrument.prototype.triggerAttack=S["a"].noOp,S["a"].Instrument.prototype.triggerRelease=S["a"].noOp,S["a"].Instrument.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this},S["a"].Instrument.prototype._syncMethod=function(t,e){var i=this["_original_"+t]=this[t];this[t]=function(){var t=Array.prototype.slice.call(arguments),n=t[e],r=S["a"].Transport.schedule(function(n){t[e]=n,i.apply(this,t)}.bind(this),n);this._scheduledEvents.push(r)}.bind(this)},S["a"].Instrument.prototype.unsync=function(){return this._scheduledEvents.forEach((function(t){S["a"].Transport.clear(t)})),this._scheduledEvents=[],this._original_triggerAttack&&(this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this},S["a"].Instrument.prototype.triggerAttackRelease=function(t,e,i,n){return i=this.toSeconds(i),e=this.toSeconds(e),this.triggerAttack(t,i,n),this.triggerRelease(i+e),this},S["a"].Instrument.prototype.dispose=function(){return S["a"].AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable(["volume"]),this.volume=null,this.unsync(),this._scheduledEvents=null,this};S["a"].Instrument;S["a"].Monophonic=function(t){t=S["a"].defaultArg(t,S["a"].Monophonic.defaults),S["a"].Instrument.call(this,t),this.portamento=t.portamento},S["a"].extend(S["a"].Monophonic,S["a"].Instrument),S["a"].Monophonic.defaults={portamento:0},S["a"].Monophonic.prototype.triggerAttack=function(t,e,i){return this.log("triggerAttack",t,e,i),e=this.toSeconds(e),this._triggerEnvelopeAttack(e,i),this.setNote(t,e),this},S["a"].Monophonic.prototype.triggerRelease=function(t){return this.log("triggerRelease",t),t=this.toSeconds(t),this._triggerEnvelopeRelease(t),this},S["a"].Monophonic.prototype._triggerEnvelopeAttack=function(){},S["a"].Monophonic.prototype._triggerEnvelopeRelease=function(){},S["a"].Monophonic.prototype.getLevelAtTime=function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)},S["a"].Monophonic.prototype.setNote=function(t,e){if(e=this.toSeconds(e),this.portamento>0&&this.getLevelAtTime(e)>.05){var i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(t,i,e)}else this.frequency.setValueAtTime(t,e);return this};S["a"].Monophonic;S["a"].Synth=function(t){t=S["a"].defaultArg(t,S["a"].Synth.defaults),S["a"].Monophonic.call(this,t),this.oscillator=new S["a"].OmniOscillator(t.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new S["a"].AmplitudeEnvelope(t.envelope),this.oscillator.chain(this.envelope,this.output),this._readOnly(["oscillator","frequency","detune","envelope"])},S["a"].extend(S["a"].Synth,S["a"].Monophonic),S["a"].Synth.defaults={oscillator:{type:"triangle"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}},S["a"].Synth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain&&this.oscillator.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this},S["a"].Synth.prototype._triggerEnvelopeRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release)),this},S["a"].Synth.prototype.dispose=function(){return S["a"].Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.frequency=null,this.detune=null,this};var X,J,K,Z,tt=S["a"].Synth,et=i("27d7"),it=i.n(et),nt=(i("d16e"),i("92ea")),rt={extends:nt["b"],mixins:[nt["c"].reactiveProp],props:["options"]},at=rt,ot=i("a6c2"),st=Object(ot["a"])(at,X,J,!1,null,null,null),lt=st.exports,ut=i("15f7"),ct={components:{PanelsetButton:n["default"].component("panelset-button",{props:["panelId","currentPanel","title"],template:'\n        <button class="btn-secondary"\n                :id="`${panelId}PanelButton`"\n                type="button"\n                @click="onClick"\n                @blur="onBlur"\n                :aria-expanded="currentPanel === panelId"\n                :aria-controls="currentPanel === panelId ? `${panelId}Panel` : false">\n          <slot></slot>\n        </button>\n      ',methods:{onClick:function(){this.currentPanel===this.panelId?this.$parent.currentPanel=null:(this.$parent.currentPanel=this.panelId,this.focusInPanel())},onBlur:function(){this.currentPanel===this.panelId&&this.focusInPanel()},focusInPanel:function(){var t=this;n["default"].nextTick().then((function(){var e=document.getElementById("".concat(t.panelId,"Panel")).querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')[0];e.focus()}))}}}),PanelsetPanel:n["default"].component("panelset-panel",{props:["panelId","currentPanel"],template:'\n        <div class="card panelset-panel"\n             :id="`${panelId}Panel`"\n             v-if="currentPanel === panelId"\n             tabindex="-1"\n             @keydown.esc="closeButtonClick">\n          <div class="card-body">\n            <slot></slot>\n            <button type="button"\n                    @click="closeButtonClick"\n                    class="close"\n                    @blur.prevent="closeButtonBlur"\n                    :aria-controls="`${panelId}Panel`"\n                    :aria-label="`close ${panelId} panel`">\n              <span aria-hidden="true">&times;</span>\n            </button>\n          </div>\n        </div>\n      ',methods:{focusOnButton:function(){document.getElementById("".concat(this.panelId,"PanelButton")).focus()},closeButtonClick:function(){this.$parent.currentPanel=null,this.focusOnButton()},closeButtonBlur:function(){this.focusOnButton()}}})},data:function(){return{currentPanel:null}}},ht=ct,pt=Object(ot["a"])(ht,K,Z,!1,null,null,null),dt=pt.exports,ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showLoading?i("div",{ref:"loadingMessage",staticClass:"results-list-container d-flex align-items-center",attrs:{tabindex:"-1"}},[i("span",{staticClass:"spinner-border spinner-border-sm mr-2",attrs:{role:"status","aria-hidden":"true"}}),t._v(" Loading example cases ... ")]):t.error?i("div",{staticClass:"results-list-container"},[t._v(" "+t._s(t.error)+" ")]):t.results?i("div",{staticClass:"results-list-container"},[i("h2",{ref:"casesHeader",attrs:{tabindex:"-1"}},[t._v("Example cases")]),i("p",[t._v('Cases matching "'+t._s(t.term)+'" in '+t._s(t.startYear)),t.startYear!==t.endYear?i("span",[t._v("-"+t._s(t.endYear))]):t._e(),t._v(":")]),t.results.length?i("ul",{staticClass:"results-list"},t._l(t.results,(function(t){return i("case-result",{key:t.id,attrs:{result:t}})})),1):i("p",[t._v("No results found.")]),i("div",{staticClass:"text-right"},[i("a",{attrs:{href:t.searchPageUrl()}},[t.results.length>=5?i("span",[t._v(" View more ")]):i("span",[t._v(" View search page ")]),t._v(" >> ")])]),i("p",{staticClass:"text-muted font-italic"},[t._v(" Note: because of differences in tokenization, search results may not exactly match graph counts. ")])]):t._e()},mt=[],yt=i("6104"),vt=i("0afd"),gt=i("6c44"),_t={components:{CaseResult:yt["default"]},props:["urls"],data:function(){return{showLoading:!1,error:null,results:null,params:null,term:null,startYear:null,endYear:null}},methods:{search:function(t,e,i,r){var a=this,o=this.params={search:'"'.concat(e.q,'"'),decision_date_min:"".concat(i,"-01-01"),decision_date_max:"".concat(r,"-12-31"),page_size:5};e.jurisdiction&&"total"!==e.jurisdiction&&(o.jurisdiction=e.jurisdiction),this.showLoading=!0,n["default"].nextTick().then((function(){a.$refs.loadingMessage.focus()})),this.error=null;var s=Object(vt["a"])(urls.api_root,"cases",o);Object(vt["b"])(s).then((function(e){a.results=e.results,a.term=t,a.startYear=i,a.endYear=r,a.showLoading=!1,n["default"].nextTick().then((function(){a.$refs.casesHeader.focus()}))}))["catch"]((function(){a.showLoading=!1,a.error="Error loading examples."}))},searchPageUrl:function(){return"".concat(this.urls.search_page,"?").concat(Object(gt["a"])(this.params))},reset:function(){this.showLoading=!1,this.error=null,this.results=null}}},bt=_t,Tt=Object(ot["a"])(bt,ft,mt,!1,null,null,null),St=Tt.exports,Ot=function(t,e){return(t%e+e)%e},kt=Math.max,xt=Math.min,wt=function(t){return t.reduce((function(t,e){return t+e}))/t.length},At=function(t){return JSON.parse(JSON.stringify(t))},Pt={name:"Main",mixins:[dt],components:{LineExample:lt,LoadingButton:ut["a"],VueSlider:it.a,SearchResults:St,ExampleLink:n["default"].component("example-link",{template:'<router-link class="example-link" :to="`?q=${query}`">{{query}}</router-link>',props:["query"]})},beforeMount:function(){this.jurisdictions=[["*","Wildcard"]].concat(snippets.jurisdictions);var t,e=Object(m["a"])(this.jurisdictions);try{for(e.s();!(t=e.n()).done;){var i=Object(f["a"])(t.value,2),n=i[0],r=i[1];this.jurisdictionLookup[n]=r}}catch(a){e.e(a)}finally{e.f()}this.urls=urls,v.a.pluginService.register({beforeDraw:this.beforeDraw,afterLayout:this.afterLayout,afterRender:this.afterRender})},mounted:function(){var t=this,e=this.$route;this.initialQuery=At(e.query),this.handleRouteUpdate(e),e.query.q||this.textToGraphUpdated(),window.addEventListener("resize",(function(){t.handleWindowResize()})),this.handleWindowResize()},watch:{$route:function(t,e){this.handleRouteUpdate(t,e)},textToGraph:function(){this.setUrlParam("textToGraph"),this.textToGraphUpdated()},percentOrAbs:function(){this.setUrlParam("percentOrAbs"),this.graphResults()},countType:function(){this.setUrlParam("countType"),this.graphResults()},sameYAxis:function(){this.setUrlParam("sameYAxis"),this.graphResults()},minYear:function(){this.clampYears(),this.yearSlider=[this.minYear,this.maxYear],this.setUrlParam("minYear"),this.graphResults()},maxYear:function(){this.clampYears(),this.yearSlider=[this.minYear,this.maxYear],this.setUrlParam("maxYear"),this.graphResults()},yearSlider:function(t){var e=Object(f["a"])(t,2);this.minYear=e[0],this.maxYear=e[1]},smoothingFactor:function(){this.setUrlParam("smoothingFactor"),this.graphResults()},deselectedTerms:function(){this.setUrlParam("deselectedTerms"),this.graphResults()},currentLine:function(){this.selectLine()},currentPoint:function(){this.selectPoint()},totalChartHeight:function(t){this.chartStyles.height="".concat(t,"px")}},data:function(){for(var t=this,e=400,i={textToGraph:{param:"q",default:"apple pie, baseball"},smoothingFactor:{param:"sf",default:2},maxYear:{param:"xy",default:2018,toValue:this.clampYear,isDefault:function(e){return t.rawData&&e===t.rawData.maxYear}},minYear:{param:"ny",default:1800,toValue:this.clampYear,isDefault:function(e){return t.rawData&&e===t.rawData.minYear}},sameYAxis:{param:"sy",default:!0},countType:{param:"ct",default:"doc_count"},percentOrAbs:{param:"pa",default:"percent"},deselectedTerms:{param:"dt",default:[],toValue:function(t){return t.split(",")},toParam:function(t){return t.join(",")}}},n={baseUrl:window.location.origin+this.$router.options.base,currentYear:(new Date).getFullYear(),datasetVersion:"1.0",datasetDate:"June 6, 2019",datasetYear:"2019",author:"Harvard University",publication:"Caselaw Access Project Historical Trends",urlValues:i,yearSlider:[i.minYear["default"],i.maxYear["default"]],currentTab:null,currentLine:null,currentPoint:null,currentHelpPanel:null,currentApiQueries:[],chartHeight:e,chartLegendHeight:32,chartData:{datasets:[]},canvasStatus:"",rawData:null,textToGraph:"apple pie, baseball",minPossible:i.minYear["default"],maxPossible:i.maxYear["default"],smoothingWindow:0,previousSameYAxis:!0,jurisdictions:[],jurisdictionLookup:{},screenshotReady:!1,urls:{},colors:["rgb(0,0,0)","rgb(73,0,146)","rgb(146,0,0)","rgb(0,73,73)","rgb(0,109,219)","rgb(146,73,0)","rgb(0,146,146)","rgb(182,109,255)","rgb(219,109,0)"],pointStyles:["circle","cross","crossRot","rect","rectRounded","rectRot","star","triangle"],soundsOn:!1,soundAutoplay:!1,soundPlaySpeed:50,useScales:!1,soundScales:[[0,3,5,6,7,10]],currentSoundScale:0,synth:null,synthStopTime:null,errors:[],showLoading:!1,initialQuery:null,chartOptions:{responsive:!0,maintainAspectRatio:!1,onClick:this.chartOnClick,legend:{labels:{boxWidth:20,usePointStyle:!0},onClick:this.legendItemOnClick},layout:{padding:{bottom:10}},scales:{yAxes:[{id:"0",type:"linear",gridLines:{color:"rgba(0, 0, 0, 0)"},ticks:{beginAtZero:!0},scaleLabel:{display:!0}}],xAxes:[{gridLines:{color:"rgba(0, 0, 0, 0)"}}]},tooltips:{callbacks:{title:function(e){return t.formatYearRange(e[0].label)},label:function(e,i){return i.datasets[e.datasetIndex].label+": "+t.formatValue(e.yLabel)}}}},chartStyles:{height:"".concat(e,"px")}},r=0,a=Object.entries(i);r<a.length;r++){var o=Object(f["a"])(a[r],2),s=o[0],l=o[1];n[s]=At(l["default"])}return n},computed:{currentUrl:function(){return this.baseUrl.slice(0,-1)+this.$route.fullPath},totalChartHeight:function(){return this.chartHeight+this.chartLegendHeight},yScaleLabel:function(){var t="count"===this.countType?"instances":"cases";return"percent"===this.percentOrAbs?"% of ".concat(t):this.smoothingWindow?"".concat(t," per year"):t}},methods:{formatYearRange:function(t){if(!this.smoothingWindow)return t;var e=this.chartData.labels,i=kt(e[0],Number(t)-this.smoothingWindow),n=xt(e[e.length-1],Number(t)+this.smoothingWindow);return"".concat(i,"-").concat(n)},formatValue:function(t){return"percent"===this.percentOrAbs?"".concat(t?100===t?100:t.toPrecision(2):0).concat(this.yScaleLabel):this.smoothingWindow?"about ".concat(t<10?t.toPrecision(2):Math.round(t)," ").concat(this.yScaleLabel):"".concat(t," ").concat(this.yScaleLabel)},clampYear:function(t){return kt(xt(Number(t),this.maxPossible),this.minPossible)},clampYears:function(){if(this.minYear=this.clampYear(this.minYear),this.maxYear=this.clampYear(this.maxYear),this.minYear>this.maxYear){var t=[this.maxYear,this.minYear];this.minYear=t[0],this.maxYear=t[1]}},range:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t=Number(t),e=Number(e),Array(Math.ceil((e-t)/i)).fill(t).map((function(t,e){return t+e*i}))},getTerms:function(t){var e=t.split(",");return e.map((function(t){return t.trim()}))},submitForm:function(){this.textToGraph=this.$refs.textToGraph.value},handleRouteUpdate:function(t){for(var e=t.query,i=0,n=Object.entries(this.urlValues);i<n.length;i++){var r=Object(f["a"])(n[i],2),a=r[0],o=r[1],s=e[o.param];s&&(o.toValue&&(s=o.toValue(s)),this[a]=s)}},setUrlParam:function(t){var e=this.urlValues[t],i=this[t],n=At(this.$route.query),r=e.toParam||function(t){return t},a=e.isDefault?e.isDefault(i):r(e["default"])===r(i);a?delete n[e.param]:n[e.param]=r(i),this.$router.replace({query:n})},textToGraphUpdated:function(){var t=this;this.errors=[];var e=this.textToGraph;if(e.trim()){var i=this.getTerms(e);this.showLoading=!0,this.currentApiQueries=[],Promise.all(i.map((function(e){if(""===e)return null;var i=e.split(/\s/),n=d(i),r=n[0],a=n.slice(1),o={};if(r.endsWith(":")){var s=r.slice(0,-1);if(!t.jurisdictionLookup[s])return t.errors.push('Unknown jurisdiction "'.concat(s,'". Options are: ').concat(Object.keys(t.jurisdictionLookup))),null;if(!a.length)return t.errors.push("Jurisdiction ".concat(s," should be followed by a search term.")),null;o.jurisdiction=s,o.q=a.join(" ")}else o.q=e;var l=Object(vt["a"])(t.urls.api_root,"ngrams",o);return t.currentApiQueries.push([e,l]),Object(vt["b"])(l).then((function(i){return 0===Object.keys(i.results).length?(t.errors.push('"'.concat(e,'" does not appear in our corpus.')),null):{results:i.results,params:o}}))}))).then((function(e){t.showLoading=!1;var i=t.parseResponse(e);0!==Object.keys(i.results).length&&(t.rawData=i,t.initialQuery&&t.initialQuery[t.urlValues.minYear.param]||(t.minYear=t.rawData.minYear),t.initialQuery&&t.initialQuery[t.urlValues.maxYear.param]||(t.maxYear=t.rawData.maxYear),t.initialQuery&&t.initialQuery[t.urlValues.deselectedTerms.param]||(t.deselectedTerms=[]),t.$refs.searchResults.reset(),t.initialQuery=null,t.graphResults())}))["catch"]((function(e){t.showLoading=!1,t.errors.push("Connection error: failed to load results"),console.log("Connection error:",e)}))}else this.errors.push("Please enter text")},graphResults:T()((function(){var t=this;if(this.clampYears(),this.rawData){for(var e=[],i=this.rawData.minYear,n=this.rawData.maxYear,r=this.minYear,a=this.maxYear,o=this.rawData.colorOffset,s=!1,l=this.range(r,a+1),u=0,c=Object.entries(this.rawData.results);u<c.length;u++){var h=Object(f["a"])(c[u],2),p=h[0],d=h[1],m=d.data.map((function(e){return null===e?0:"absolute"===t.percentOrAbs?e[t.countType][0]:e[t.countType][0]/e[t.countType][1]*100}));m=this.movingAverage(m,n-i),m=Array(kt(i-r,0)).fill(0).concat(m.slice(kt(r-i,0),xt(a-i+1,m.length)),Array(kt(a-n,0)).fill(0));var y=this.colors[o++%this.colors.length],v=a-r<50?3:0;e.push({label:p,borderColor:y,backgroundColor:"rgba(0, 0, 0, 0)",borderWidth:2,borderRadius:100,data:m,pointStyle:this.pointStyles[o%this.pointStyles.length],pointRadius:v,pointHitRadius:5,yAxisID:this.sameYAxis?"0":e.length.toString(),hidden:this.deselectedTerms.includes(p)})}var g=this.chartOptions.scales.yAxes;if(this.sameYAxis)g[0].display=!0,g[0].scaleLabel.labelString!==this.yScaleLabel&&(g[0].scaleLabel.labelString=this.yScaleLabel,s=!0);else if(g[0].display=!1,g.length<e.length){s=!0;for(var _=g.length;_<e.length;_++)g.push(Object.assign({},g[0],{id:_.toString()}))}this.sameYAxis!==this.previousSameYAxis&&(this.previousSameYAxis=this.sameYAxis,s=!0),this.chartData={labels:l,datasets:e},s&&this.$refs.chart.renderChart(this.chartData,this.chartOptions)}}),50),parseResponse:function(t){var e,i={},n=null,r=null,a=Object(m["a"])(t);try{for(a.s();!(e=a.n()).done;){var o=e.value;if(null!==o)for(var s=0,u=Object.entries(o.results);s<u.length;s++)for(var c=Object(f["a"])(u[s],2),h=c[0],p=c[1],d=0,y=Object.entries(p);d<y.length;d++){var v,g=Object(f["a"])(y[d],2),_=g[0],b=g[1],T=new Array(this.maxPossible+1).fill(null),S=Object(m["a"])(b);try{for(S.s();!(v=S.n()).done;){var O=v.value,k=O["year"];"total"!==k&&(k=parseInt(k,10),(null===n||n>k)&&(n=k),(null===r||r<k)&&(r=k),T[k]=O)}}catch(E){S.e(E)}finally{S.f()}var x=Object(l["a"])(Object(l["a"])({},o.params),{},{jurisdiction:_,q:h});i[("total"===_?"":this.jurisdictionLookup[_]+": ")+h]={data:T,params:x}}}}catch(E){a.e(E)}finally{a.f()}n=kt(n,this.minPossible),r=xt(r,this.maxPossible);for(var w=0,A=Object.keys(i);w<A.length;w++){var P=A[w];i[P].data=i[P].data.slice(n,r+1)}var C=Math.floor(Math.random()*this.colors.length);return{colorOffset:C,minYear:n,maxYear:r,results:i}},movingAverage:function(t,e){var i=Math.floor(e*(this.smoothingFactor/100));return this.smoothingWindow=i,i<1?t:t.map((function(e,n){return wt(t.slice(kt(n-i,0),xt(n+i,t.length)))}))},appendJurisdictionCode:function(t){this.textToGraph&&(this.textToGraph+=", "),this.textToGraph+=t+": ",this.$refs.textToGraph.focus()},imageDownloadClicked:function(t){var e=this.$refs.chart.$refs.canvas.toDataURL("image/png");t.currentTarget.href=e},jsonDownloadClicked:function(t){var e=At(this.rawData);delete e.colorOffset,e="data:application/json;base64,"+btoa(JSON.stringify(e,null,2)),t.currentTarget.href=e},csvDownloadClicked:function(t){var e=this.rawData.results,i=Object.keys(e),n=[];n.push(["Year"].concat(Object(s["a"])(i.flatMap((function(t){return['"'.concat(t,'" Case Count'),'"'.concat(t,'" Case Denominator'),'"'.concat(t,'" Instance Count'),'"'.concat(t,'" Instance Denominator')]})))));var r,a=Object(m["a"])(this.chartData.labels.entries());try{var o=function(){var t=Object(f["a"])(r.value,2),a=t[0],o=t[1];n.push([o].concat(Object(s["a"])(i.flatMap((function(t){var i=e[t].data[a];return null===i?["","","",""]:[i.doc_count[0],i.doc_count[1],i.count[0],i.count[1]]})))))};for(a.s();!(r=a.n()).done;)o()}catch(l){a.e(l)}finally{a.f()}n="data:text/csv;base64,"+btoa(_()(n)),t.currentTarget.href=n},chartKeyDown:function(t){switch(t.key){case"ArrowDown":this.currentLine=Ot(null===this.currentLine?0:this.currentLine+1,this.chartData.datasets.length);break;case"ArrowUp":this.currentLine=Ot(null===this.currentLine?0:this.currentLine-1,this.chartData.datasets.length);break;case"ArrowRight":this.currentPoint=Ot(null===this.currentPoint?0:this.currentPoint+1,this.chartData.labels.length);break;case"ArrowLeft":this.currentPoint=Ot(null===this.currentPoint?0:this.currentPoint-1,this.chartData.labels.length);break;case" ":null!==this.currentLine&&this.clickLegendItem(this.currentLine);break;case"Enter":this.currentLine|=0,this.currentPoint|=0,this.searchForPoint(this.currentLine,this.currentPoint);break;case"s":this.toggleSoundsOn();break;case"p":this.soundAutoplay=!this.soundAutoplay,this.soundAutoplay&&(this.soundsOn||this.toggleSoundsOn(),this.currentLine|=0,this.currentPoint|=0,this.autoplaySound());break;case"b":this.useScales=!this.useScales,this.setCanvasStatus("blues mode ".concat(this.useScales?"on":"off")),this.soundsOn||this.toggleSoundsOn();break;default:return}t.preventDefault()},toggleSoundsOn:function(){this.soundsOn=!this.soundsOn,this.setCanvasStatus("audio tones ".concat(this.soundsOn?"on":"off")),this.soundsOn&&(this.synth=new tt({envelope:{attack:this.soundPlaySpeed/1e3}}).toMaster())},autoplaySound:function(){var t=this;setTimeout((function(){t.soundAutoplay&&(t.currentPoint<t.chartData.labels.length-1?(t.currentPoint+=1,t.autoplaySound()):t.soundAutoplay=!1)}),this.soundPlaySpeed)},selectLine:function(){var t,e=this.chartData.datasets,i=this.currentLine,n=Object(m["a"])(e.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(f["a"])(t.value,2),a=r[0],o=r[1];o.borderWidth=i===a?4:2}}catch(s){n.e(s)}finally{n.f()}this.chartOptions.animation={duration:0},this.$refs.chart.renderChart(this.chartData,this.chartOptions),delete this.chartOptions.animation,null!==this.currentPoint&&this.selectPoint(),this.setCanvasStatus(e[i].label+" trend line")},selectPoint:function(){null===this.currentLine&&(this.currentLine=0);var t=this.$refs.chart.$data._chart,e=t.getDatasetMeta(this.currentLine),i=t.canvas.getBoundingClientRect(),n=e.data[this.currentPoint].getCenterPoint();t.canvas.dispatchEvent(new MouseEvent("mousemove",{clientX:i.left+n.x,clientY:i.top+n.y}));var r=this.chartData.datasets[this.currentLine],a=r.data[this.currentPoint];if(this.setCanvasStatus("".concat(r.label," ").concat(this.formatYearRange(this.chartData.labels[this.currentPoint])," ").concat(this.formatValue(a))),this.soundsOn){var o,s=Math.pow(2,1/12),l=a/e.dataset._scale.max;if(this.useScales){var u=110,c=this.soundScales[this.currentSoundScale],h=4,p=h*c.length,d=Math.floor(l*p);d+=this.currentLine%12;var f=12*Math.floor(d/c.length)+c[d%c.length];o=u*Math.pow(s,f)}else{var m=220,y=3,v=12*l*y;o=m*Math.pow(s,v)}null===this.synthStopTime?this.synth.triggerAttack(o):this.synth.setNote(o),this.synthStopTime=S["a"].now()+this.soundPlaySpeed/1e3,setTimeout(this.endSounds,this.soundPlaySpeed)}},endSounds:function(){null===this.synthStopTime||this.synthStopTime<=S["a"].now()?(this.synth.triggerRelease(),this.synthStopTime=null):setTimeout(this.endSounds,this.soundPlaySpeed)},setCanvasStatus:T()((function(t){this.canvasStatus=t}),500),clickLegendItem:function(t){var e=this.$refs.chart.$data._chart,i=e.legend;i.options.onClick.call(i,null,i.legendItems[t])},legendItemOnClick:function(t,e){var i=this.chartData.datasets[e.datasetIndex].label,n=this.deselectedTerms.indexOf(i);-1===n?this.deselectedTerms.push(i):this.deselectedTerms.splice(n,1)},chartOnClick:function(t,e){if(e.length){var i=this.$refs.chart.$data._chart,n=i.getElementAtEvent(t)[0];this.currentPoint=n._index,this.currentLine=n._datasetIndex,this.searchForPoint(n._datasetIndex,n._index)}},searchForPoint:function(t,e){var i=this.chartData.labels[e],n=this.chartData.datasets[t].label,r=this.rawData.results[n].params;this.$refs.searchResults.search(n,r,i-this.smoothingWindow,i+this.smoothingWindow)},beforeDraw:function(t){var e=t.chart.ctx,i=e.canvas,n=i.clientWidth,r=i.clientHeight;e.save(),e.fillStyle="#FFF",e.fillRect(0,0,n,r),e.fillStyle="#888",e.font="10px Arial",e.textAlign="right",e.fillText("Caselaw Access Project".concat(n>400?" at Harvard Law School":"",". ").concat(this.baseUrl),n-5,r-11),e.restore()},handleWindowResize:function(){var t=window.innerHeight-document.getElementById("main-nav").offsetHeight;this.chartHeight=kt(200,xt(t,400))},afterLayout:function(t){this.chartLegendHeight=t.legend.height},afterRender:function(){this.screenshotReady=!0},clickHelpButton:function(){document.getElementById("helpPanelButton").click()},helpLinkClicked:function(t){"A"===t.target.tagName&&this.clickHelpButton()}}},Ct=Pt,Et=Object(ot["a"])(Ct,a,o,!1,null,null,null),jt=Et.exports;n["default"].config.devtools=!0,n["default"].config.productionTip=!1,n["default"].use(r["a"]);var Mt=new r["a"]({mode:"history",base:"/trends/",routes:[{path:"/",component:jt,name:"main"},{path:"*",redirect:"/"}]});new n["default"]({el:"#app",components:{Main:jt},template:"<Main/>",router:Mt})},"7e9e":function(t,e,i){"use strict";var n=i("1efa"),r=i("9c46"),a=i("f675"),o=i("d0ad"),s=i("b45d"),l=i("7d22"),u=i("e421"),c=i("5bd7"),h=i("fa22"),p=i("c3f2"),d=i("3958").f,f=i("16ea").f,m=i("9d17").f,y=i("1f41").trim,v="Number",g=r[v],_=g.prototype,b=l(p(_))==v,T=function(t){var e,i,n,r,a,o,s,l,u=c(t,!1);if("string"==typeof u&&u.length>2)if(u=y(u),e=u.charCodeAt(0),43===e||45===e){if(i=u.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+u}for(a=u.slice(2),o=a.length,s=0;s<o;s++)if(l=a.charCodeAt(s),l<48||l>r)return NaN;return parseInt(a,n)}return+u};if(a(v,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var S,O=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof O&&(b?h((function(){_.valueOf.call(i)})):l(i)!=v)?u(new g(T(e)),i,O):T(e)},k=n?d(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;k.length>x;x++)s(g,S=k[x])&&!s(O,S)&&m(O,S,f(g,S));O.prototype=_,_.constructor=O,o(r,v,O)}},c32d:function(t,e){if("undefined"===typeof moment){var i=new Error("Cannot find module 'moment'");throw i.code="MODULE_NOT_FOUND",i}t.exports=moment},d16e:function(t,e,i){},dc8e:function(t,e,i){"use strict";var n=i("87f3"),r=i("ceb0"),a=i("6bbd"),o=function(t,e,i,s,l,u,c,h){var p,d=l,f=0,m=!!c&&a(c,h,3);while(f<s){if(f in i){if(p=m?m(i[f],f,e):i[f],u>0&&n(p))d=o(t,e,p,r(p.length),d,u-1)-1;else{if(d>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[d]=p}d++}f++}return d};t.exports=o},eae2:function(t,e,i){"use strict";var n=i("2513"),r=i("fa22"),a=i("42d8"),o=1..toPrecision,s=r((function(){return"1"!==o.call(1,void 0)}))||!r((function(){o.call({})}));n({target:"Number",proto:!0,forced:s},{toPrecision:function(t){return void 0===t?o.call(a(this)):o.call(a(this),t)}})}});
//# sourceMappingURL=trends.f1d0d2de.js.map